<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>8.21. 伪类型</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="datatype-pg-lsn.html" title="8.20. pg_lsn 类型" /><link rel="next" href="functions.html" title="第 9 章 函数和操作符" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">8.21. 伪类型</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="datatype-pg-lsn.html" title="8.20. pg_lsn 类型">上一页</a> </td><td width="10%" align="left"><a accesskey="u" href="datatype.html" title="第 8 章 数据类型">上一级</a></td><th width="60%" align="center">第 8 章 数据类型</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 11.2 手册">起始页</a></td><td width="10%" align="right"> <a accesskey="n" href="functions.html" title="第 9 章 函数和操作符">下一页</a></td></tr></table><hr></hr></div><div class="sect1" id="DATATYPE-PSEUDO"><div class="titlepage"><div><div><h2 class="title" style="clear: both">8.21. 伪类型</h2></div></div></div><a id="id-1.5.7.29.2" class="indexterm"></a><a id="id-1.5.7.29.3" class="indexterm"></a><a id="id-1.5.7.29.4" class="indexterm"></a><a id="id-1.5.7.29.5" class="indexterm"></a><a id="id-1.5.7.29.6" class="indexterm"></a><a id="id-1.5.7.29.7" class="indexterm"></a><a id="id-1.5.7.29.8" class="indexterm"></a><a id="id-1.5.7.29.9" class="indexterm"></a><a id="id-1.5.7.29.10" class="indexterm"></a><a id="id-1.5.7.29.11" class="indexterm"></a><a id="id-1.5.7.29.12" class="indexterm"></a><a id="id-1.5.7.29.13" class="indexterm"></a><a id="id-1.5.7.29.14" class="indexterm"></a><a id="id-1.5.7.29.15" class="indexterm"></a><a id="id-1.5.7.29.16" class="indexterm"></a><a id="id-1.5.7.29.17" class="indexterm"></a><a id="id-1.5.7.29.18" class="indexterm"></a><a id="id-1.5.7.29.19" class="indexterm"></a><a id="id-1.5.7.29.20" class="indexterm"></a><p>
    <span class="productname">PostgreSQL</span>类型系统包含了一些特殊目的的项，它们被统称为<em class="firstterm">伪类型</em>。一个伪类型不能被用作一个列的数据类型，但是它可以被用来定义一个函数的参数或者结果类型。每一种可用的伪类型都有其可以发挥作用的情况，这些情况的特点是一个函数的行为并不能符合于简单使用或者返回一种特定<acronym class="acronym">SQL</acronym>数据类型的值。<a class="xref" href="datatype-pseudo.html#DATATYPE-PSEUDOTYPES-TABLE" title="表 8.25. 伪类型">表 8.25</a>列出了现有的伪类型。
   </p><div class="table" id="DATATYPE-PSEUDOTYPES-TABLE"><p class="title"><strong>表 8.25. 伪类型</strong></p><div class="table-contents"><table class="table" summary="伪类型" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>名字</th><th>描述</th></tr></thead><tbody><tr><td><code class="type">any</code></td><td>表示一个函数可以接受任意输入数据类型。</td></tr><tr><td><code class="type">anyelement</code></td><td>表示一个函数可以接受任意数据类型（参见<a class="xref" href="extend-type-system.html#EXTEND-TYPES-POLYMORPHIC" title="38.2.5. 多态类型">第 38.2.5 节</a>）。</td></tr><tr><td><code class="type">anyarray</code></td><td>表示一个函数可以接受任意数组数据类型（参见<a class="xref" href="extend-type-system.html#EXTEND-TYPES-POLYMORPHIC" title="38.2.5. 多态类型">第 38.2.5 节</a>）</td></tr><tr><td><code class="type">anynonarray</code></td><td>表示一个函数可以接受任意非数组数据类型（参见<a class="xref" href="extend-type-system.html#EXTEND-TYPES-POLYMORPHIC" title="38.2.5. 多态类型">第 38.2.5 节</a>）。</td></tr><tr><td><code class="type">anyenum</code></td><td>表示一个函数可以接受任意枚举数据类型（参见<a class="xref" href="extend-type-system.html#EXTEND-TYPES-POLYMORPHIC" title="38.2.5. 多态类型">第 38.2.5 节</a>和<a class="xref" href="datatype-enum.html" title="8.7. 枚举类型">第 8.7 节</a>）。</td></tr><tr><td><code class="type">anyrange</code></td><td>表示一个函数可以接受任意范围数据类型（参见<a class="xref" href="extend-type-system.html#EXTEND-TYPES-POLYMORPHIC" title="38.2.5. 多态类型">第 38.2.5 节</a>和<a class="xref" href="rangetypes.html" title="8.17. 范围类型">第 8.17 节</a>）。</td></tr><tr><td><code class="type">cstring</code></td><td>表示一个函数接受或者返回一个非空结尾的C字符串。</td></tr><tr><td><code class="type">internal</code></td><td>表示一个函数接受或返回一个服务器内部数据类型。</td></tr><tr><td><code class="type">language_handler</code></td><td>一个被声明为返回<code class="type">language_handler</code>的过程语言调用处理器。</td></tr><tr><td><code class="type">fdw_handler</code></td><td>一个被声明为返回<code class="type">fdw_handler</code>的外部数据包装器处理器。</td></tr><tr><td><code class="type">index_am_handler</code></td><td>一个被声明为返回<code class="type">index_am_handler</code>索引访问方法处理器。</td></tr><tr><td><code class="type">tsm_handler</code></td><td> 一个被声明为返回<code class="type">tsm_handler</code>的表采样方法处理器。</td></tr><tr><td><code class="type">record</code></td><td>标识一个接收或者返回一个未指定的行类型的函数。</td></tr><tr><td><code class="type">trigger</code></td><td>一个被声明为返回<code class="type">trigger</code>的触发器函数。</td></tr><tr><td><code class="type">event_trigger</code></td><td>一个被声明为返回<code class="type">event_trigger</code>的事件触发器函数。</td></tr><tr><td><code class="type">pg_ddl_command</code></td><td>标识一种对事件触发器可用的 DDL 命令的表达。</td></tr><tr><td><code class="type">void</code></td><td>表示一个函数不返回值。</td></tr><tr><td><code class="type">unknown</code></td><td>标识一种还未被解析的类型，例如一个未修饰的字符文本。</td></tr><tr><td><code class="type">opaque</code></td><td>一种已被废弃的类型名称，以前它用于实现以上的很多种目的。</td></tr></tbody></table></div></div><br class="table-break" /><p>
    用C编写的函数（不管是内建的还是动态载入的）可以被声明为接受或返回这些为数据类型的任意一种。函数的作者应当保证当一个伪类型被用作一个参数类型时函数的行为是安全的。
   </p><p>
    用过程语言编写的函数只有在其实现语言允许的情况下才能使用伪类型。目前大部分过程语言都禁止使用伪类型作为一种参数类型，并且只允许使用<code class="type">void</code>和<code class="type">record</code>作为结果类型（如果函数被用于一个触发器或者事件触发器， <code class="type">trigger</code>或者<code class="type">event_trigger</code>也被允许作为结果类型）。某些过程语言也支持在多态函数中使用类型<code class="type">anyelement</code>、<code class="type">anyarray</code>、<code class="type">anynonarray</code>、<code class="type">anyenum</code>和<code class="type">anyrange</code>。
   </p><p>
    <code class="type">internal</code>伪类型用于定义只在数据库系统内部调用的函数，这些函数不会被<acronym class="acronym">SQL</acronym>直接调用。如果一个函数拥有至少一个<code class="type">internal</code>类型的参数，则它不能从<acronym class="acronym">SQL</acronym>中被调用。为了保持这种限制的类型安全性，遵循以下编码规则非常重要：不要创建任何被声明要返回<code class="type">internal</code>的函数，除非它有至少一个<code class="type">internal</code>参数。
   </p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="datatype-pg-lsn.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="datatype.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="functions.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">8.20. <acronym class="acronym">pg_lsn 类型</acronym> </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> 第 9 章 函数和操作符</td></tr></table></div></body></html>