<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>9.4. 字符串函数和操作符</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="functions-math.html" title="9.3. 数学函数和操作符" /><link rel="next" href="functions-binarystring.html" title="9.5. 二进制串函数和操作符" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">9.4. 字符串函数和操作符</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="functions-math.html" title="9.3. 数学函数和操作符">上一页</a> </td><td width="10%" align="left"><a accesskey="u" href="functions.html" title="第 9 章 函数和操作符">上一级</a></td><th width="60%" align="center">第 9 章 函数和操作符</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 11.2 手册">起始页</a></td><td width="10%" align="right"> <a accesskey="n" href="functions-binarystring.html" title="9.5. 二进制串函数和操作符">下一页</a></td></tr></table><hr></hr></div><div class="sect1" id="FUNCTIONS-STRING"><div class="titlepage"><div><div><h2 class="title" style="clear: both">9.4. 字符串函数和操作符</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="functions-string.html#FUNCTIONS-STRING-FORMAT">9.4.1. <code class="function">format</code></a></span></dt></dl></div><p>
    本节描述了用于检查和操作字符串值的函数和操作符。在这个环境中的串包括所有类型<code class="type">character</code>、<code class="type">character varying</code>和<code class="type">text</code>的值。除非另外说明，所有下面列出的函数都可以处理这些类型，不过要小心的是，在使用<code class="type">character</code>类型的时候， 它有自动填充空白的潜在影响。有些函数还可以处理位串类型。
   </p><p>
    <acronym class="acronym">SQL</acronym>定义了一些字符串函数，它们使用关键字，而不是逗号来分隔参数。详情请见<a class="xref" href="functions-string.html#FUNCTIONS-STRING-SQL" title="表 9.8. SQL字符串函数和操作符">表 9.8</a>，<span class="productname">PostgreSQL</span>也提供了这些函数使用正常函数调用语法的版本（见<a class="xref" href="functions-string.html#FUNCTIONS-STRING-OTHER" title="表 9.9. 其他字符串函数">表 9.9</a>）。
   </p><div class="note"><h3 class="title">注意</h3><p>
     由于存在从那些数据类型到<code class="type">text</code>的隐式强制措施，在<span class="productname">PostgreSQL</span> 8.3之前，这些函数也可以接受多种非字符串数据类型。这些强制措施在目前的版本中已经被删除，因为它们常常导致令人惊讶的行为。不过，字符串串接操作符（<code class="literal">||</code>）仍然接受非字符串输入，只要至少一个输入是一种字符串类型，如<a class="xref" href="functions-string.html#FUNCTIONS-STRING-SQL" title="表 9.8. SQL字符串函数和操作符">表 9.8</a>所示。对于其他情况，如果你需要复制之前的行为，可以为<code class="type">text</code>插入一个显式强制措施。
    </p></div><div class="table" id="FUNCTIONS-STRING-SQL"><p class="title"><strong>表 9.8. <acronym class="acronym">SQL</acronym>字符串函数和操作符</strong></p><div class="table-contents"><table class="table" summary="SQL字符串函数和操作符" border="1"><colgroup><col /><col /><col /><col /><col /></colgroup><thead><tr><th>函数</th><th>返回类型</th><th>描述</th><th>例子</th><th>结果</th></tr></thead><tbody><tr><td><code class="literal"><em class="parameter"><code>string</code></em> <code class="literal">||</code>
        <em class="parameter"><code>string</code></em></code></td><td> <code class="type">text</code> </td><td>
        串接
        <a id="id-1.5.8.9.5.2.2.1.3.1" class="indexterm"></a>
       </td><td><code class="literal">'Post' || 'greSQL'</code></td><td><code class="literal">PostgreSQL</code></td></tr><tr><td>
        <code class="literal"><em class="parameter"><code>string</code></em> <code class="literal">||</code>
        <em class="parameter"><code>non-string</code></em></code>
        or
        <code class="literal"><em class="parameter"><code>non-string</code></em> <code class="literal">||</code>
        <em class="parameter"><code>string</code></em></code>
       </td><td> <code class="type">text</code> </td><td>
        使用一个非字符串输入的串接
       </td><td><code class="literal">'Value: ' || 42</code></td><td><code class="literal">Value: 42</code></td></tr><tr><td>
        <a id="id-1.5.8.9.5.2.2.3.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">bit_length(<em class="parameter"><code>string</code></em>)</code></code>
       </td><td><code class="type">int</code></td><td>串中的位数</td><td><code class="literal">bit_length('jose')</code></td><td><code class="literal">32</code></td></tr><tr><td>
        <a id="id-1.5.8.9.5.2.2.4.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">char_length(<em class="parameter"><code>string</code></em>)</code></code> or <code class="literal"><code class="function">character_length(<em class="parameter"><code>string</code></em>)</code></code>
       </td><td><code class="type">int</code></td><td>
        串中字符数
        <a id="id-1.5.8.9.5.2.2.4.3.1" class="indexterm"></a>
        <a id="id-1.5.8.9.5.2.2.4.3.2" class="indexterm"></a>
       </td><td><code class="literal">char_length('jose')</code></td><td><code class="literal">4</code></td></tr><tr><td>
        <a id="id-1.5.8.9.5.2.2.5.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">lower(<em class="parameter"><code>string</code></em>)</code></code>
       </td><td><code class="type">text</code></td><td>将字符串转换为小写形式</td><td><code class="literal">lower('TOM')</code></td><td><code class="literal">tom</code></td></tr><tr><td>
        <a id="id-1.5.8.9.5.2.2.6.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">octet_length(<em class="parameter"><code>string</code></em>)</code></code>
       </td><td><code class="type">int</code></td><td>串中的字节数</td><td><code class="literal">octet_length('jose')</code></td><td><code class="literal">4</code></td></tr><tr><td>
        <a id="id-1.5.8.9.5.2.2.7.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">overlay(<em class="parameter"><code>string</code></em> placing <em class="parameter"><code>string</code></em> from <code class="type">int</code> [<span class="optional">for <code class="type">int</code></span>])</code></code>
       </td><td><code class="type">text</code></td><td>
        替换子串
       </td><td><code class="literal">overlay('Txxxxas' placing 'hom' from 2 for 4)</code></td><td><code class="literal">Thomas</code></td></tr><tr><td>
        <a id="id-1.5.8.9.5.2.2.8.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">position(<em class="parameter"><code>substring</code></em> in <em class="parameter"><code>string</code></em>)</code></code>
       </td><td><code class="type">int</code></td><td>定位指定子串</td><td><code class="literal">position('om' in 'Thomas')</code></td><td><code class="literal">3</code></td></tr><tr><td>
        <a id="id-1.5.8.9.5.2.2.9.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">substring(<em class="parameter"><code>string</code></em> [<span class="optional">from <code class="type">int</code></span>] [<span class="optional">for <code class="type">int</code></span>])</code></code>
       </td><td><code class="type">text</code></td><td>
        提取子串
       </td><td><code class="literal">substring('Thomas' from 2 for 3)</code></td><td><code class="literal">hom</code></td></tr><tr><td><code class="literal"><code class="function">substring(<em class="parameter"><code>string</code></em> from <em class="replaceable"><code>pattern</code></em>)</code></code></td><td><code class="type">text</code></td><td>
        提取匹配POSIX正则表达式的子串。模式匹配详情见<a class="xref" href="functions-matching.html" title="9.7. 模式匹配">第 9.7 节</a>。
       </td><td><code class="literal">substring('Thomas' from '...$')</code></td><td><code class="literal">mas</code></td></tr><tr><td><code class="literal"><code class="function">substring(<em class="parameter"><code>string</code></em> from <em class="replaceable"><code>pattern</code></em> for <em class="replaceable"><code>escape</code></em>)</code></code></td><td><code class="type">text</code></td><td>
        提取匹配<acronym class="acronym">SQL</acronym>正则表达式的子串。模式匹配详情见<a class="xref" href="functions-matching.html" title="9.7. 模式匹配">第 9.7 节</a>。
       </td><td><code class="literal">substring('Thomas' from '%#"o_a#"_' for '#')</code></td><td><code class="literal">oma</code></td></tr><tr><td>
        <a id="id-1.5.8.9.5.2.2.12.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">trim([<span class="optional">leading | trailing | both</span>]
        [<span class="optional"><em class="parameter"><code>characters</code></em></span>] from
        <em class="parameter"><code>string</code></em>)</code></code>
       </td><td><code class="type">text</code></td><td>
        从<em class="parameter"><code>string</code></em>的开头、结尾或者两端（<code class="literal">both</code>是默认值）移除只包含<em class="parameter"><code>characters</code></em>（默认是一个空格）中字符的最长字符串
       </td><td><code class="literal">trim(both 'xyz' from 'yxTomxx')</code></td><td><code class="literal">Tom</code></td></tr><tr><td>
        <code class="literal"><code class="function">trim([<span class="optional">leading | trailing
        | both</span>] [<span class="optional">from</span>]
        <em class="parameter"><code>string</code></em>
        [<span class="optional">, <em class="parameter"><code>characters</code></em></span>]
        )</code></code>
       </td><td><code class="type">text</code></td><td>
        <code class="function">trim()</code>的非标准版本
       </td><td><code class="literal">trim(both from 'xTomxx', 'x')</code></td><td><code class="literal">Tom</code></td></tr><tr><td>
        <a id="id-1.5.8.9.5.2.2.14.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">upper(<em class="parameter"><code>string</code></em>)</code></code>
       </td><td><code class="type">text</code></td><td>将字符串转换成大写形式</td><td><code class="literal">upper('tom')</code></td><td><code class="literal">TOM</code></td></tr></tbody></table></div></div><br class="table-break" /><p>
    还有额外的串操作函数可以用，它们在<a class="xref" href="functions-string.html#FUNCTIONS-STRING-OTHER" title="表 9.9. 其他字符串函数">表 9.9</a>中列出。它们有些在内部用于实现<a class="xref" href="functions-string.html#FUNCTIONS-STRING-SQL" title="表 9.8. SQL字符串函数和操作符">表 9.8</a>列出的<acronym class="acronym">SQL</acronym>标准字符串函数。
   </p><div class="table" id="FUNCTIONS-STRING-OTHER"><p class="title"><strong>表 9.9. 其他字符串函数</strong></p><div class="table-contents"><table class="table" summary="其他字符串函数" border="1"><colgroup><col /><col /><col /><col /><col /></colgroup><thead><tr><th>函数</th><th>返回类型</th><th>描述</th><th>例子</th><th>结果</th></tr></thead><tbody><tr><td>
        <a id="id-1.5.8.9.7.2.2.1.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">ascii(<em class="parameter"><code>string</code></em>)</code></code>
       </td><td><code class="type">int</code></td><td>
        参数第一个字符的<acronym class="acronym">ASCII</acronym>代码。对于<acronym class="acronym">UTF8</acronym>返回该字符的Unicode代码点。对于其他多字节编码，该参数必须是一个<acronym class="acronym">ASCII</acronym>字符。
       </td><td><code class="literal">ascii('x')</code></td><td><code class="literal">120</code></td></tr><tr><td>
        <a id="id-1.5.8.9.7.2.2.2.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">btrim(<em class="parameter"><code>string</code></em> <code class="type">text</code>
        [<span class="optional">, <em class="parameter"><code>characters</code></em> <code class="type">text</code></span>])</code></code>
       </td><td><code class="type">text</code></td><td>
        从<em class="parameter"><code>string</code></em>的开头或结尾删除最长的只包含<em class="parameter"><code>characters</code></em>（默认是一个空格）的串
       </td><td><code class="literal">btrim('xyxtrimyyx', 'xyz')</code></td><td><code class="literal">trim</code></td></tr><tr><td>
        <a id="id-1.5.8.9.7.2.2.3.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">chr(<code class="type">int</code>)</code></code>
       </td><td><code class="type">text</code></td><td>
        给定代码的字符。对于<acronym class="acronym">UTF8</acronym>该参数被视作一个Unicode代码点。对于其他多字节编码该参数必须指定一个<acronym class="acronym">ASCII</acronym>字符。NULL (0) 字符不被允许，因为文本数据类型不能存储这种字节。
       </td><td><code class="literal">chr(65)</code></td><td><code class="literal">A</code></td></tr><tr><td>
        <a id="id-1.5.8.9.7.2.2.4.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">concat(<em class="parameter"><code>str</code></em> <code class="type">"any"</code>
         [, <em class="parameter"><code>str</code></em> <code class="type">"any"</code> [, ...] ])</code></code>
       </td><td><code class="type">text</code></td><td>
        串接所有参数的文本表示。NULL 参数被忽略。
       </td><td><code class="literal">concat('abcde', 2, NULL, 22)</code></td><td><code class="literal">abcde222</code></td></tr><tr><td>
        <a id="id-1.5.8.9.7.2.2.5.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">concat_ws(<em class="parameter"><code>sep</code></em> <code class="type">text</code>,
        <em class="parameter"><code>str</code></em> <code class="type">"any"</code>
        [, <em class="parameter"><code>str</code></em> <code class="type">"any"</code> [, ...] ])</code></code>
       </td><td><code class="type">text</code></td><td>
        将除了第一个参数外的其他参数用分隔符串接在一起。第一个参数被用作分隔符字符串。NULL 参数被忽略。
       </td><td><code class="literal">concat_ws(',', 'abcde', 2, NULL, 22)</code></td><td><code class="literal">abcde,2,22</code></td></tr><tr><td>
        <a id="id-1.5.8.9.7.2.2.6.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">convert(<em class="parameter"><code>string</code></em> <code class="type">bytea</code>,
        <em class="parameter"><code>src_encoding</code></em> <code class="type">name</code>,
        <em class="parameter"><code>dest_encoding</code></em> <code class="type">name</code>)</code></code>
       </td><td><code class="type">bytea</code></td><td>
        将字符串转换为<em class="parameter"><code>dest_encoding</code></em>。原始编码由<em class="parameter"><code>src_encoding</code></em>指定。<em class="parameter"><code>string</code></em>在这个编码中必须可用。转换可以使用<code class="command">CREATE CONVERSION</code>定义。也有一些预定义的转换。可用的转换请见<a class="xref" href="functions-string.html#CONVERSION-NAMES" title="表 9.10. 内建转换">表 9.10</a>。
       </td><td><code class="literal">convert('text_in_utf8', 'UTF8', 'LATIN1')</code></td><td>用Latin-1 encoding (ISO 8859-1) 表示的<code class="literal">text_in_utf8</code></td></tr><tr><td>
        <a id="id-1.5.8.9.7.2.2.7.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">convert_from(<em class="parameter"><code>string</code></em> <code class="type">bytea</code>,
        <em class="parameter"><code>src_encoding</code></em> <code class="type">name</code>)</code></code>
       </td><td><code class="type">text</code></td><td>
        将字符串转换为数据库编码。原始编码由<em class="parameter"><code>src_encoding</code></em>指定。<em class="parameter"><code>string</code></em>在这个编码中必须可用。
       </td><td><code class="literal">convert_from('text_in_utf8', 'UTF8')</code></td><td>用当前数据库编码表示的<code class="literal">text_in_utf8</code></td></tr><tr><td>
        <a id="id-1.5.8.9.7.2.2.8.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">convert_to(<em class="parameter"><code>string</code></em> <code class="type">text</code>,
        <em class="parameter"><code>dest_encoding</code></em> <code class="type">name</code>)</code></code>
       </td><td><code class="type">bytea</code></td><td>
        将字符串转换为<em class="parameter"><code>dest_encoding</code></em>。
       </td><td><code class="literal">convert_to('some text', 'UTF8')</code></td><td>用UTF8编码表达的<code class="literal">some text</code></td></tr><tr><td>
        <a id="id-1.5.8.9.7.2.2.9.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">decode(<em class="parameter"><code>string</code></em> <code class="type">text</code>,
        <em class="parameter"><code>format</code></em> <code class="type">text</code>)</code></code>
       </td><td><code class="type">bytea</code></td><td>
        从<em class="parameter"><code>string</code></em>中的文本表达解码二进制数据。<em class="parameter"><code>format</code></em>的选项和<code class="function">encode</code>中的一样。
       </td><td><code class="literal">decode('MTIzAAE=', 'base64')</code></td><td><code class="literal">\x3132330001</code></td></tr><tr><td>
        <a id="id-1.5.8.9.7.2.2.10.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">encode(<em class="parameter"><code>data</code></em> <code class="type">bytea</code>,
        <em class="parameter"><code>format</code></em> <code class="type">text</code>)</code></code>
       </td><td><code class="type">text</code></td><td>
        将二进制数据编码成一个文本表达。支持的格式有：<code class="literal">base64</code>、<code class="literal">hex</code>、<code class="literal">escape</code>。<code class="literal">escape</code>将零字节和高位组字节转换为八进制序列（<code class="literal">\</code><em class="replaceable"><code>nnn</code></em>）和双写的反斜线。
       </td><td><code class="literal">encode('123\000\001', 'base64')</code></td><td><code class="literal">MTIzAAE=</code></td></tr><tr><td id="FORMAT">
        <a id="id-1.5.8.9.7.2.2.11.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">format</code>(<em class="parameter"><code>formatstr</code></em> <code class="type">text</code>
        [, <em class="parameter"><code>formatarg</code></em> <code class="type">"any"</code> [, ...] ])</code>
       </td><td><code class="type">text</code></td><td>
         根据一个格式字符串格式化参数。该函数和C函数<code class="function">sprintf</code>相似。见<a class="xref" href="functions-string.html#FUNCTIONS-STRING-FORMAT" title="9.4.1. format">第 9.4.1 节</a>。
       </td><td><code class="literal">format('Hello %s, %1$s', 'World')</code></td><td><code class="literal">Hello World, World</code></td></tr><tr><td>
        <a id="id-1.5.8.9.7.2.2.12.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">initcap(<em class="parameter"><code>string</code></em>)</code></code>
       </td><td><code class="type">text</code></td><td>
        将每一个词的第一个字母转换为大写形式并把剩下的字母转换为小写形式。词是由非字母数字字符分隔的字母数字字符的序列。
       </td><td><code class="literal">initcap('hi THOMAS')</code></td><td><code class="literal">Hi Thomas</code></td></tr><tr><td>
        <a id="id-1.5.8.9.7.2.2.13.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">left(<em class="parameter"><code>str</code></em> <code class="type">text</code>,
        <em class="parameter"><code>n</code></em> <code class="type">int</code>)</code></code>
       </td><td><code class="type">text</code></td><td>
        返回字符串中的前<em class="replaceable"><code>n</code></em>个字符。当<em class="replaceable"><code>n</code></em>为负时，将返回除了最后|<em class="replaceable"><code>n</code></em>|个字符之外的所有字符。
        </td><td><code class="literal">left('abcde', 2)</code></td><td><code class="literal">ab</code></td></tr><tr><td>
        <a id="id-1.5.8.9.7.2.2.14.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">length(<em class="parameter"><code>string</code></em>)</code></code>
       </td><td><code class="type">int</code></td><td>
        <em class="parameter"><code>string</code></em>中的字符数
       </td><td><code class="literal">length('jose')</code></td><td><code class="literal">4</code></td></tr><tr><td><code class="literal"><code class="function">length(<em class="parameter"><code>string</code></em> <code class="type">bytea</code>,
        <em class="parameter"><code>encoding</code></em> <code class="type">name</code> )</code></code></td><td><code class="type">int</code></td><td>
        <em class="parameter"><code>string</code></em>在给定<em class="parameter"><code>编码</code></em>中的字符数。<em class="parameter"><code>string</code></em>必须在这个编码中有效。
       </td><td><code class="literal">length('jose', 'UTF8')</code></td><td><code class="literal">4</code></td></tr><tr><td>
        <a id="id-1.5.8.9.7.2.2.16.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">lpad(<em class="parameter"><code>string</code></em> <code class="type">text</code>,
        <em class="parameter"><code>length</code></em> <code class="type">int</code>
        [<span class="optional">, <em class="parameter"><code>fill</code></em> <code class="type">text</code></span>])</code></code>
       </td><td><code class="type">text</code></td><td>
        将<em class="parameter"><code>string</code></em>通过前置字符<em class="parameter"><code>fill</code></em>（默认是一个空格）填充到长度<em class="parameter"><code>length</code></em>。如果<em class="parameter"><code>string</code></em>已经长于<em class="parameter"><code>length</code></em>，则它被（从右边）截断。
       </td><td><code class="literal">lpad('hi', 5, 'xy')</code></td><td><code class="literal">xyxhi</code></td></tr><tr><td>
        <a id="id-1.5.8.9.7.2.2.17.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">ltrim(<em class="parameter"><code>string</code></em> <code class="type">text</code>
        [<span class="optional">, <em class="parameter"><code>characters</code></em> <code class="type">text</code></span>])</code></code>
       </td><td><code class="type">text</code></td><td>
        从<em class="parameter"><code>string</code></em>的开头删除最长的只包含<em class="parameter"><code>characters</code></em>（默认是一个空格）的串
       </td><td><code class="literal">ltrim('zzzytest', 'xyz')</code></td><td><code class="literal">test</code></td></tr><tr><td>
        <a id="id-1.5.8.9.7.2.2.18.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">md5(<em class="parameter"><code>string</code></em>)</code></code>
       </td><td><code class="type">text</code></td><td>
        计算<em class="parameter"><code>string</code></em>的 MD5 哈希，返回十六进制的结果
       </td><td><code class="literal">md5('abc')</code></td><td><code class="literal">900150983cd24fb0 d6963f7d28e17f72</code></td></tr><tr><td>
        <a id="id-1.5.8.9.7.2.2.19.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">parse_ident(<em class="parameter"><code>qualified_identifier</code></em> <code class="type">text</code>
           [, <em class="parameter"><code>strictmode</code></em> <code class="type">boolean</code> DEFAULT true ] )</code></code>
       </td><td><code class="type">text[]</code></td><td>
        把<em class="parameter"><code>qualified_identifier</code></em>分成一个标识符数组，移除单个标识符上的任何引号。默认情况下，最后一个标识符后面的多余字符会被当做错误。但是如果第二个参数为<code class="literal">false</code>，那么这一类多余的字符会被忽略（这种行为对于解析函数之类的对象名称有用）。注意这个函数不会截断超长标识符。如果想要进行截断，可以把结果转换成<code class="type">name[]</code>。
       </td><td><code class="literal">parse_ident('"SomeSchema".someTable')</code></td><td><code class="literal">{SomeSchema,sometable}</code></td></tr><tr><td>
        <a id="id-1.5.8.9.7.2.2.20.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">pg_client_encoding()</code></code>
       </td><td><code class="type">name</code></td><td>
        当前的客户端编码名字
       </td><td><code class="literal">pg_client_encoding()</code></td><td><code class="literal">SQL_ASCII</code></td></tr><tr><td>
        <a id="id-1.5.8.9.7.2.2.21.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">quote_ident(<em class="parameter"><code>string</code></em> <code class="type">text</code>)</code></code>
       </td><td><code class="type">text</code></td><td>
        将给定字符串返回成合适的引用形式，使它可以在一个<acronym class="acronym">SQL</acronym>语句字符串中被用作一个标识符。只有需要时才会加上引号（即，如果字符串包含非标识符字符或可能是大小写折叠的）。嵌入的引号会被正确地双写。参见<a class="xref" href="plpgsql-statements.html#PLPGSQL-QUOTE-LITERAL-EXAMPLE" title="例 43.1. 在动态查询中引用值">例 43.1</a>。
       </td><td><code class="literal">quote_ident('Foo bar')</code></td><td><code class="literal">"Foo bar"</code></td></tr><tr><td>
        <a id="id-1.5.8.9.7.2.2.22.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">quote_literal(<em class="parameter"><code>string</code></em> <code class="type">text</code>)</code></code>
       </td><td><code class="type">text</code></td><td>
        将给定字符串返回成合适的引用形式，使它可以在一个<acronym class="acronym">SQL</acronym>语句字符串中被用作一个字符串文字。嵌入的引号会被正确地双写。注意<code class="function">quote_literal</code>对空输入返回空；如果参数可能为空，<code class="function">quote_nullable</code>通常更合适。参见<a class="xref" href="plpgsql-statements.html#PLPGSQL-QUOTE-LITERAL-EXAMPLE" title="例 43.1. 在动态查询中引用值">例 43.1</a>。
       </td><td><code class="literal">quote_literal(E'O\'Reilly')</code></td><td><code class="literal">'O''Reilly'</code></td></tr><tr><td><code class="literal"><code class="function">quote_literal(<em class="parameter"><code>value</code></em> <code class="type">anyelement</code>)</code></code></td><td><code class="type">text</code></td><td>
        强迫给定值为文本并且接着将它用引号包围作为一个文本。嵌入的单引号和反斜线被正确的双写。
       </td><td><code class="literal">quote_literal(42.5)</code></td><td><code class="literal">'42.5'</code></td></tr><tr><td>
        <a id="id-1.5.8.9.7.2.2.24.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">quote_nullable(<em class="parameter"><code>string</code></em> <code class="type">text</code>)</code></code>
       </td><td><code class="type">text</code></td><td>
        将给定字符串返回成合适的引用形式，使它可以在一个<acronym class="acronym">SQL</acronym>语句字符串中被用作一个字符串文字；或者，如果参数为空，返回<code class="literal">NULL</code>。嵌入的引号会被正确地双写。请参见<a class="xref" href="plpgsql-statements.html#PLPGSQL-QUOTE-LITERAL-EXAMPLE" title="例 43.1. 在动态查询中引用值">例 43.1</a>。
       </td><td><code class="literal">quote_nullable(NULL)</code></td><td><code class="literal">NULL</code></td></tr><tr><td><code class="literal"><code class="function">quote_nullable(<em class="parameter"><code>value</code></em> <code class="type">anyelement</code>)</code></code></td><td><code class="type">text</code></td><td>
        强迫给定值为文本并且接着将它用引号包围作为一个文本；或者，如果参数为空，返回<code class="literal">NULL</code>。嵌入的单引号和反斜线被正确的双写。
       </td><td><code class="literal">quote_nullable(42.5)</code></td><td><code class="literal">'42.5'</code></td></tr><tr><td>
        <a id="id-1.5.8.9.7.2.2.26.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">regexp_match(<em class="parameter"><code>string</code></em> <code class="type">text</code>, <em class="parameter"><code>pattern</code></em> <code class="type">text</code> [, <em class="parameter"><code>flags</code></em> <code class="type">text</code>])</code></code>
       </td><td><code class="type">text[]</code></td><td>
        返回一个POSIX正则表达式与<em class="parameter"><code>string</code></em>的第一个匹配得到的子串。更多信息请见<a class="xref" href="functions-matching.html#FUNCTIONS-POSIX-REGEXP" title="9.7.3. POSIX正则表达式">第 9.7.3 节</a>。
       </td><td><code class="literal">regexp_match('foobarbequebaz', '(bar)(beque)')</code></td><td><code class="literal">{bar,beque}</code></td></tr><tr><td>
        <a id="id-1.5.8.9.7.2.2.27.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">regexp_matches(<em class="parameter"><code>string</code></em> <code class="type">text</code>, <em class="parameter"><code>pattern</code></em> <code class="type">text</code> [, <em class="parameter"><code>flags</code></em> <code class="type">text</code>])</code></code>
       </td><td><code class="type">setof text[]</code></td><td>
        返回一个POSIX正则表达式与<em class="parameter"><code>string</code></em>匹配得到的子串。更多信息请见<a class="xref" href="functions-matching.html#FUNCTIONS-POSIX-REGEXP" title="9.7.3. POSIX正则表达式">第 9.7.3 节</a>。
       </td><td><code class="literal">regexp_matches('foobarbequebaz', 'ba.', 'g')</code></td><td><code class="literal">{bar}</code><p><code class="literal">{baz}</code></p> (2 rows)</td></tr><tr><td>
        <a id="id-1.5.8.9.7.2.2.28.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">regexp_replace(<em class="parameter"><code>string</code></em> <code class="type">text</code>, <em class="parameter"><code>pattern</code></em> <code class="type">text</code>, <em class="parameter"><code>replacement</code></em> <code class="type">text</code> [, <em class="parameter"><code>flags</code></em> <code class="type">text</code>])</code></code>
       </td><td><code class="type">text</code></td><td>
        替换匹配一个POSIX正则表达式的子串。详见<a class="xref" href="functions-matching.html#FUNCTIONS-POSIX-REGEXP" title="9.7.3. POSIX正则表达式">第 9.7.3 节</a>。
       </td><td><code class="literal">regexp_replace('Thomas', '.[mN]a.', 'M')</code></td><td><code class="literal">ThM</code></td></tr><tr><td>
        <a id="id-1.5.8.9.7.2.2.29.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">regexp_split_to_array(<em class="parameter"><code>string</code></em> <code class="type">text</code>, <em class="parameter"><code>pattern</code></em> <code class="type">text</code> [, <em class="parameter"><code>flags</code></em> <code class="type">text</code> ])</code></code>
       </td><td><code class="type">text[]</code></td><td>
        使用一个POSIX正则表达式作为分隔符划分<em class="parameter"><code>string</code></em>。详见<a class="xref" href="functions-matching.html#FUNCTIONS-POSIX-REGEXP" title="9.7.3. POSIX正则表达式">第 9.7.3 节</a>。
       </td><td><code class="literal">regexp_split_to_array('hello world', '\s+')</code></td><td><code class="literal">{hello,world}</code></td></tr><tr><td>
        <a id="id-1.5.8.9.7.2.2.30.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">regexp_split_to_table(<em class="parameter"><code>string</code></em> <code class="type">text</code>, <em class="parameter"><code>pattern</code></em> <code class="type">text</code> [, <em class="parameter"><code>flags</code></em> <code class="type">text</code>])</code></code>
       </td><td><code class="type">setof text</code></td><td>
        使用一个POSIX正则表达式作为分隔符划分<em class="parameter"><code>string</code></em>。详见<a class="xref" href="functions-matching.html#FUNCTIONS-POSIX-REGEXP" title="9.7.3. POSIX正则表达式">第 9.7.3 节</a>。
       </td><td><code class="literal">regexp_split_to_table('hello world', '\s+')</code></td><td><code class="literal">hello</code><p><code class="literal">world</code></p> (2 rows)</td></tr><tr><td>
        <a id="id-1.5.8.9.7.2.2.31.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">repeat(<em class="parameter"><code>string</code></em> <code class="type">text</code>, <em class="parameter"><code>number</code></em> <code class="type">int</code>)</code></code>
       </td><td><code class="type">text</code></td><td>重复<em class="parameter"><code>string</code></em>指定的<em class="parameter"><code>number</code></em>次</td><td><code class="literal">repeat('Pg', 4)</code></td><td><code class="literal">PgPgPgPg</code></td></tr><tr><td>
        <a id="id-1.5.8.9.7.2.2.32.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">replace(<em class="parameter"><code>string</code></em> <code class="type">text</code>,
        <em class="parameter"><code>from</code></em> <code class="type">text</code>,
        <em class="parameter"><code>to</code></em> <code class="type">text</code>)</code></code>
       </td><td><code class="type">text</code></td><td>将<em class="parameter"><code>string</code></em>中出现的所有子串<em class="parameter"><code>from</code></em>替换为子串<em class="parameter"><code>to</code></em>
       </td><td><code class="literal">replace('abcdefabcdef', 'cd', 'XX')</code></td><td><code class="literal">abXXefabXXef</code></td></tr><tr><td>
        <a id="id-1.5.8.9.7.2.2.33.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">reverse(<em class="parameter"><code>str</code></em>)</code></code>
       </td><td><code class="type">text</code></td><td>
        返回反转的字符串。
       </td><td><code class="literal">reverse('abcde')</code></td><td><code class="literal">edcba</code></td></tr><tr><td>
        <a id="id-1.5.8.9.7.2.2.34.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">right(<em class="parameter"><code>str</code></em> <code class="type">text</code>,
         <em class="parameter"><code>n</code></em> <code class="type">int</code>)</code></code>
       </td><td><code class="type">text</code></td><td>
        返回字符串中的最后<em class="replaceable"><code>n</code></em>个字符。如果<em class="replaceable"><code>n</code></em>为负，返回除最前面的|<em class="replaceable"><code>n</code></em>|个字符外的所有字符。
       </td><td><code class="literal">right('abcde', 2)</code></td><td><code class="literal">de</code></td></tr><tr><td>
        <a id="id-1.5.8.9.7.2.2.35.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">rpad(<em class="parameter"><code>string</code></em> <code class="type">text</code>,
        <em class="parameter"><code>length</code></em> <code class="type">int</code>
        [<span class="optional">, <em class="parameter"><code>fill</code></em> <code class="type">text</code></span>])</code></code>
       </td><td><code class="type">text</code></td><td>
        将<em class="parameter"><code>string</code></em>通过增加字符<em class="parameter"><code>fill</code></em>（默认为一个空格）填充到长度<em class="parameter"><code>length</code></em>。如果<em class="parameter"><code>string</code></em>已经长于<em class="parameter"><code>length</code></em>则它会被截断。
       </td><td><code class="literal">rpad('hi', 5, 'xy')</code></td><td><code class="literal">hixyx</code></td></tr><tr><td>
        <a id="id-1.5.8.9.7.2.2.36.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">rtrim(<em class="parameter"><code>string</code></em> <code class="type">text</code>
         [<span class="optional">, <em class="parameter"><code>characters</code></em> <code class="type">text</code></span>])</code></code>
       </td><td><code class="type">text</code></td><td>
        从<em class="parameter"><code>string</code></em>的结尾删除最长的只包含<em class="parameter"><code>characters</code></em>（默认是一个空格）的串
       </td><td><code class="literal">rtrim('testxxzx', 'xyz')</code></td><td><code class="literal">test</code></td></tr><tr><td>
        <a id="id-1.5.8.9.7.2.2.37.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">split_part(<em class="parameter"><code>string</code></em> <code class="type">text</code>,
        <em class="parameter"><code>delimiter</code></em> <code class="type">text</code>,
        <em class="parameter"><code>field</code></em> <code class="type">int</code>)</code></code>
       </td><td><code class="type">text</code></td><td>按<em class="parameter"><code>delimiter</code></em>划分<em class="parameter"><code>string</code></em>并返回给定域（从1开始计算）
       </td><td><code class="literal">split_part('abc~@~def~@~ghi', '~@~', 2)</code></td><td><code class="literal">def</code></td></tr><tr><td>
        <a id="id-1.5.8.9.7.2.2.38.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">strpos(<em class="parameter"><code>string</code></em>, <em class="parameter"><code>substring</code></em>)</code></code>
       </td><td><code class="type">int</code></td><td>
        指定子串的位置（和<code class="literal">position(<em class="parameter"><code>substring</code></em> in
         <em class="parameter"><code>string</code></em>)</code>相同，但是注意相反的参数顺序）
       </td><td><code class="literal">strpos('high', 'ig')</code></td><td><code class="literal">2</code></td></tr><tr><td>
        <a id="id-1.5.8.9.7.2.2.39.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">substr(<em class="parameter"><code>string</code></em>, <em class="parameter"><code>from</code></em> [<span class="optional">, <em class="parameter"><code>count</code></em></span>])</code></code>
       </td><td><code class="type">text</code></td><td>
        提取子串（与<code class="literal">substring(<em class="parameter"><code>string</code></em> from <em class="parameter"><code>from</code></em> for <em class="parameter"><code>count</code></em>)</code>相同）
       </td><td><code class="literal">substr('alphabet', 3, 2)</code></td><td><code class="literal">ph</code></td></tr><tr><td>
        <a id="id-1.5.8.9.7.2.2.40.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">starts_with(<em class="parameter"><code>string</code></em>, <em class="parameter"><code>prefix</code></em>)</code></code>
       </td><td><code class="type">bool</code></td><td>
        如果<em class="parameter"><code>string</code></em>以<em class="parameter"><code>prefix</code></em>开始则返回真。
       </td><td><code class="literal">starts_with('alphabet', 'alph')</code></td><td><code class="literal">t</code></td></tr><tr><td>
        <a id="id-1.5.8.9.7.2.2.41.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">to_ascii(<em class="parameter"><code>string</code></em> <code class="type">text</code>
        [<span class="optional">, <em class="parameter"><code>encoding</code></em> <code class="type">text</code></span>])</code></code>
       </td><td><code class="type">text</code></td><td>
       将<em class="parameter"><code>string</code></em>从另一个编码转换到<acronym class="acronym">ASCII</acronym>（只支持从<code class="literal">LATIN1</code>、<code class="literal">LATIN2</code>、<code class="literal">LATIN9</code>和<code class="literal">WIN1250</code>编码的转换）
       </td><td><code class="literal">to_ascii('Karel')</code></td><td><code class="literal">Karel</code></td></tr><tr><td>
        <a id="id-1.5.8.9.7.2.2.42.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">to_hex(<em class="parameter"><code>number</code></em> <code class="type">int</code>
        or <code class="type">bigint</code>)</code></code>
       </td><td><code class="type">text</code></td><td>将<em class="parameter"><code>number</code></em>转换到它等效的十六进制表示
       </td><td><code class="literal">to_hex(2147483647)</code></td><td><code class="literal">7fffffff</code></td></tr><tr><td>
        <a id="id-1.5.8.9.7.2.2.43.1.1" class="indexterm"></a>
        <code class="literal"><code class="function">translate(<em class="parameter"><code>string</code></em> <code class="type">text</code>,
        <em class="parameter"><code>from</code></em> <code class="type">text</code>,
        <em class="parameter"><code>to</code></em> <code class="type">text</code>)</code></code>
       </td><td><code class="type">text</code></td><td>
        <em class="parameter"><code>string</code></em>中任何匹配<em class="parameter"><code>from</code></em>集合中一个字符的字符会被替换成<em class="parameter"><code>to</code></em>集合中的相应字符。如果<em class="parameter"><code>from</code></em>比<em class="parameter"><code>to</code></em>长，<em class="parameter"><code>from</code></em>中的额外字符会被删除。
       </td><td><code class="literal">translate('12345', '143', 'ax')</code></td><td><code class="literal">a2x5</code></td></tr></tbody></table></div></div><br class="table-break" /><p>
    <code class="function">concat</code>、<code class="function">concat_ws</code>和<code class="function">format</code>函数是可变的，因此可以把要串接或格式化的值作为一个标记了<code class="literal">VARIADIC</code>关键字的数组进行传递（见<a class="xref" href="xfunc-sql.html#XFUNC-SQL-VARIADIC-FUNCTIONS" title="38.5.5. 带有可变数量参数的SQL函数">第 38.5.5 节</a>）。数组的元素被当作函数的独立普通参数一样处理。如果可变数组参数为 NULL，<code class="function">concat</code>和<code class="function">concat_ws</code>返回 NULL，但<code class="function">format</code>把 NULL 当作一个零元素数组。
   </p><p>
   还可以参阅<a class="xref" href="functions-aggregate.html" title="9.20. 聚集函数">第 9.20 节</a>中的<code class="function">string_agg</code>。
   </p><div class="table" id="CONVERSION-NAMES"><p class="title"><strong>表 9.10. 内建转换</strong></p><div class="table-contents"><table class="table" summary="内建转换" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th>转换名
        <a href="#ftn.id-1.5.8.9.10.2.1.1.1.1" class="footnote"><sup class="footnote" id="id-1.5.8.9.10.2.1.1.1.1">[a]</sup></a>
       </th><th>源编码</th><th>目标编码</th></tr></thead><tbody><tr><td><code class="literal">ascii_to_mic</code></td><td><code class="literal">SQL_ASCII</code></td><td><code class="literal">MULE_INTERNAL</code></td></tr><tr><td><code class="literal">ascii_to_utf8</code></td><td><code class="literal">SQL_ASCII</code></td><td><code class="literal">UTF8</code></td></tr><tr><td><code class="literal">big5_to_euc_tw</code></td><td><code class="literal">BIG5</code></td><td><code class="literal">EUC_TW</code></td></tr><tr><td><code class="literal">big5_to_mic</code></td><td><code class="literal">BIG5</code></td><td><code class="literal">MULE_INTERNAL</code></td></tr><tr><td><code class="literal">big5_to_utf8</code></td><td><code class="literal">BIG5</code></td><td><code class="literal">UTF8</code></td></tr><tr><td><code class="literal">euc_cn_to_mic</code></td><td><code class="literal">EUC_CN</code></td><td><code class="literal">MULE_INTERNAL</code></td></tr><tr><td><code class="literal">euc_cn_to_utf8</code></td><td><code class="literal">EUC_CN</code></td><td><code class="literal">UTF8</code></td></tr><tr><td><code class="literal">euc_jp_to_mic</code></td><td><code class="literal">EUC_JP</code></td><td><code class="literal">MULE_INTERNAL</code></td></tr><tr><td><code class="literal">euc_jp_to_sjis</code></td><td><code class="literal">EUC_JP</code></td><td><code class="literal">SJIS</code></td></tr><tr><td><code class="literal">euc_jp_to_utf8</code></td><td><code class="literal">EUC_JP</code></td><td><code class="literal">UTF8</code></td></tr><tr><td><code class="literal">euc_kr_to_mic</code></td><td><code class="literal">EUC_KR</code></td><td><code class="literal">MULE_INTERNAL</code></td></tr><tr><td><code class="literal">euc_kr_to_utf8</code></td><td><code class="literal">EUC_KR</code></td><td><code class="literal">UTF8</code></td></tr><tr><td><code class="literal">euc_tw_to_big5</code></td><td><code class="literal">EUC_TW</code></td><td><code class="literal">BIG5</code></td></tr><tr><td><code class="literal">euc_tw_to_mic</code></td><td><code class="literal">EUC_TW</code></td><td><code class="literal">MULE_INTERNAL</code></td></tr><tr><td><code class="literal">euc_tw_to_utf8</code></td><td><code class="literal">EUC_TW</code></td><td><code class="literal">UTF8</code></td></tr><tr><td><code class="literal">gb18030_to_utf8</code></td><td><code class="literal">GB18030</code></td><td><code class="literal">UTF8</code></td></tr><tr><td><code class="literal">gbk_to_utf8</code></td><td><code class="literal">GBK</code></td><td><code class="literal">UTF8</code></td></tr><tr><td><code class="literal">iso_8859_10_to_utf8</code></td><td><code class="literal">LATIN6</code></td><td><code class="literal">UTF8</code></td></tr><tr><td><code class="literal">iso_8859_13_to_utf8</code></td><td><code class="literal">LATIN7</code></td><td><code class="literal">UTF8</code></td></tr><tr><td><code class="literal">iso_8859_14_to_utf8</code></td><td><code class="literal">LATIN8</code></td><td><code class="literal">UTF8</code></td></tr><tr><td><code class="literal">iso_8859_15_to_utf8</code></td><td><code class="literal">LATIN9</code></td><td><code class="literal">UTF8</code></td></tr><tr><td><code class="literal">iso_8859_16_to_utf8</code></td><td><code class="literal">LATIN10</code></td><td><code class="literal">UTF8</code></td></tr><tr><td><code class="literal">iso_8859_1_to_mic</code></td><td><code class="literal">LATIN1</code></td><td><code class="literal">MULE_INTERNAL</code></td></tr><tr><td><code class="literal">iso_8859_1_to_utf8</code></td><td><code class="literal">LATIN1</code></td><td><code class="literal">UTF8</code></td></tr><tr><td><code class="literal">iso_8859_2_to_mic</code></td><td><code class="literal">LATIN2</code></td><td><code class="literal">MULE_INTERNAL</code></td></tr><tr><td><code class="literal">iso_8859_2_to_utf8</code></td><td><code class="literal">LATIN2</code></td><td><code class="literal">UTF8</code></td></tr><tr><td><code class="literal">iso_8859_2_to_windows_1250</code></td><td><code class="literal">LATIN2</code></td><td><code class="literal">WIN1250</code></td></tr><tr><td><code class="literal">iso_8859_3_to_mic</code></td><td><code class="literal">LATIN3</code></td><td><code class="literal">MULE_INTERNAL</code></td></tr><tr><td><code class="literal">iso_8859_3_to_utf8</code></td><td><code class="literal">LATIN3</code></td><td><code class="literal">UTF8</code></td></tr><tr><td><code class="literal">iso_8859_4_to_mic</code></td><td><code class="literal">LATIN4</code></td><td><code class="literal">MULE_INTERNAL</code></td></tr><tr><td><code class="literal">iso_8859_4_to_utf8</code></td><td><code class="literal">LATIN4</code></td><td><code class="literal">UTF8</code></td></tr><tr><td><code class="literal">iso_8859_5_to_koi8_r</code></td><td><code class="literal">ISO_8859_5</code></td><td><code class="literal">KOI8R</code></td></tr><tr><td><code class="literal">iso_8859_5_to_mic</code></td><td><code class="literal">ISO_8859_5</code></td><td><code class="literal">MULE_INTERNAL</code></td></tr><tr><td><code class="literal">iso_8859_5_to_utf8</code></td><td><code class="literal">ISO_8859_5</code></td><td><code class="literal">UTF8</code></td></tr><tr><td><code class="literal">iso_8859_5_to_windows_1251</code></td><td><code class="literal">ISO_8859_5</code></td><td><code class="literal">WIN1251</code></td></tr><tr><td><code class="literal">iso_8859_5_to_windows_866</code></td><td><code class="literal">ISO_8859_5</code></td><td><code class="literal">WIN866</code></td></tr><tr><td><code class="literal">iso_8859_6_to_utf8</code></td><td><code class="literal">ISO_8859_6</code></td><td><code class="literal">UTF8</code></td></tr><tr><td><code class="literal">iso_8859_7_to_utf8</code></td><td><code class="literal">ISO_8859_7</code></td><td><code class="literal">UTF8</code></td></tr><tr><td><code class="literal">iso_8859_8_to_utf8</code></td><td><code class="literal">ISO_8859_8</code></td><td><code class="literal">UTF8</code></td></tr><tr><td><code class="literal">iso_8859_9_to_utf8</code></td><td><code class="literal">LATIN5</code></td><td><code class="literal">UTF8</code></td></tr><tr><td><code class="literal">johab_to_utf8</code></td><td><code class="literal">JOHAB</code></td><td><code class="literal">UTF8</code></td></tr><tr><td><code class="literal">koi8_r_to_iso_8859_5</code></td><td><code class="literal">KOI8R</code></td><td><code class="literal">ISO_8859_5</code></td></tr><tr><td><code class="literal">koi8_r_to_mic</code></td><td><code class="literal">KOI8R</code></td><td><code class="literal">MULE_INTERNAL</code></td></tr><tr><td><code class="literal">koi8_r_to_utf8</code></td><td><code class="literal">KOI8R</code></td><td><code class="literal">UTF8</code></td></tr><tr><td><code class="literal">koi8_r_to_windows_1251</code></td><td><code class="literal">KOI8R</code></td><td><code class="literal">WIN1251</code></td></tr><tr><td><code class="literal">koi8_r_to_windows_866</code></td><td><code class="literal">KOI8R</code></td><td><code class="literal">WIN866</code></td></tr><tr><td><code class="literal">koi8_u_to_utf8</code></td><td><code class="literal">KOI8U</code></td><td><code class="literal">UTF8</code></td></tr><tr><td><code class="literal">mic_to_ascii</code></td><td><code class="literal">MULE_INTERNAL</code></td><td><code class="literal">SQL_ASCII</code></td></tr><tr><td><code class="literal">mic_to_big5</code></td><td><code class="literal">MULE_INTERNAL</code></td><td><code class="literal">BIG5</code></td></tr><tr><td><code class="literal">mic_to_euc_cn</code></td><td><code class="literal">MULE_INTERNAL</code></td><td><code class="literal">EUC_CN</code></td></tr><tr><td><code class="literal">mic_to_euc_jp</code></td><td><code class="literal">MULE_INTERNAL</code></td><td><code class="literal">EUC_JP</code></td></tr><tr><td><code class="literal">mic_to_euc_kr</code></td><td><code class="literal">MULE_INTERNAL</code></td><td><code class="literal">EUC_KR</code></td></tr><tr><td><code class="literal">mic_to_euc_tw</code></td><td><code class="literal">MULE_INTERNAL</code></td><td><code class="literal">EUC_TW</code></td></tr><tr><td><code class="literal">mic_to_iso_8859_1</code></td><td><code class="literal">MULE_INTERNAL</code></td><td><code class="literal">LATIN1</code></td></tr><tr><td><code class="literal">mic_to_iso_8859_2</code></td><td><code class="literal">MULE_INTERNAL</code></td><td><code class="literal">LATIN2</code></td></tr><tr><td><code class="literal">mic_to_iso_8859_3</code></td><td><code class="literal">MULE_INTERNAL</code></td><td><code class="literal">LATIN3</code></td></tr><tr><td><code class="literal">mic_to_iso_8859_4</code></td><td><code class="literal">MULE_INTERNAL</code></td><td><code class="literal">LATIN4</code></td></tr><tr><td><code class="literal">mic_to_iso_8859_5</code></td><td><code class="literal">MULE_INTERNAL</code></td><td><code class="literal">ISO_8859_5</code></td></tr><tr><td><code class="literal">mic_to_koi8_r</code></td><td><code class="literal">MULE_INTERNAL</code></td><td><code class="literal">KOI8R</code></td></tr><tr><td><code class="literal">mic_to_sjis</code></td><td><code class="literal">MULE_INTERNAL</code></td><td><code class="literal">SJIS</code></td></tr><tr><td><code class="literal">mic_to_windows_1250</code></td><td><code class="literal">MULE_INTERNAL</code></td><td><code class="literal">WIN1250</code></td></tr><tr><td><code class="literal">mic_to_windows_1251</code></td><td><code class="literal">MULE_INTERNAL</code></td><td><code class="literal">WIN1251</code></td></tr><tr><td><code class="literal">mic_to_windows_866</code></td><td><code class="literal">MULE_INTERNAL</code></td><td><code class="literal">WIN866</code></td></tr><tr><td><code class="literal">sjis_to_euc_jp</code></td><td><code class="literal">SJIS</code></td><td><code class="literal">EUC_JP</code></td></tr><tr><td><code class="literal">sjis_to_mic</code></td><td><code class="literal">SJIS</code></td><td><code class="literal">MULE_INTERNAL</code></td></tr><tr><td><code class="literal">sjis_to_utf8</code></td><td><code class="literal">SJIS</code></td><td><code class="literal">UTF8</code></td></tr><tr><td><code class="literal">tcvn_to_utf8</code></td><td><code class="literal">WIN1258</code></td><td><code class="literal">UTF8</code></td></tr><tr><td><code class="literal">uhc_to_utf8</code></td><td><code class="literal">UHC</code></td><td><code class="literal">UTF8</code></td></tr><tr><td><code class="literal">utf8_to_ascii</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">SQL_ASCII</code></td></tr><tr><td><code class="literal">utf8_to_big5</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">BIG5</code></td></tr><tr><td><code class="literal">utf8_to_euc_cn</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">EUC_CN</code></td></tr><tr><td><code class="literal">utf8_to_euc_jp</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">EUC_JP</code></td></tr><tr><td><code class="literal">utf8_to_euc_kr</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">EUC_KR</code></td></tr><tr><td><code class="literal">utf8_to_euc_tw</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">EUC_TW</code></td></tr><tr><td><code class="literal">utf8_to_gb18030</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">GB18030</code></td></tr><tr><td><code class="literal">utf8_to_gbk</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">GBK</code></td></tr><tr><td><code class="literal">utf8_to_iso_8859_1</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">LATIN1</code></td></tr><tr><td><code class="literal">utf8_to_iso_8859_10</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">LATIN6</code></td></tr><tr><td><code class="literal">utf8_to_iso_8859_13</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">LATIN7</code></td></tr><tr><td><code class="literal">utf8_to_iso_8859_14</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">LATIN8</code></td></tr><tr><td><code class="literal">utf8_to_iso_8859_15</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">LATIN9</code></td></tr><tr><td><code class="literal">utf8_to_iso_8859_16</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">LATIN10</code></td></tr><tr><td><code class="literal">utf8_to_iso_8859_2</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">LATIN2</code></td></tr><tr><td><code class="literal">utf8_to_iso_8859_3</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">LATIN3</code></td></tr><tr><td><code class="literal">utf8_to_iso_8859_4</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">LATIN4</code></td></tr><tr><td><code class="literal">utf8_to_iso_8859_5</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">ISO_8859_5</code></td></tr><tr><td><code class="literal">utf8_to_iso_8859_6</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">ISO_8859_6</code></td></tr><tr><td><code class="literal">utf8_to_iso_8859_7</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">ISO_8859_7</code></td></tr><tr><td><code class="literal">utf8_to_iso_8859_8</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">ISO_8859_8</code></td></tr><tr><td><code class="literal">utf8_to_iso_8859_9</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">LATIN5</code></td></tr><tr><td><code class="literal">utf8_to_johab</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">JOHAB</code></td></tr><tr><td><code class="literal">utf8_to_koi8_r</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">KOI8R</code></td></tr><tr><td><code class="literal">utf8_to_koi8_u</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">KOI8U</code></td></tr><tr><td><code class="literal">utf8_to_sjis</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">SJIS</code></td></tr><tr><td><code class="literal">utf8_to_tcvn</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">WIN1258</code></td></tr><tr><td><code class="literal">utf8_to_uhc</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">UHC</code></td></tr><tr><td><code class="literal">utf8_to_windows_1250</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">WIN1250</code></td></tr><tr><td><code class="literal">utf8_to_windows_1251</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">WIN1251</code></td></tr><tr><td><code class="literal">utf8_to_windows_1252</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">WIN1252</code></td></tr><tr><td><code class="literal">utf8_to_windows_1253</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">WIN1253</code></td></tr><tr><td><code class="literal">utf8_to_windows_1254</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">WIN1254</code></td></tr><tr><td><code class="literal">utf8_to_windows_1255</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">WIN1255</code></td></tr><tr><td><code class="literal">utf8_to_windows_1256</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">WIN1256</code></td></tr><tr><td><code class="literal">utf8_to_windows_1257</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">WIN1257</code></td></tr><tr><td><code class="literal">utf8_to_windows_866</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">WIN866</code></td></tr><tr><td><code class="literal">utf8_to_windows_874</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">WIN874</code></td></tr><tr><td><code class="literal">windows_1250_to_iso_8859_2</code></td><td><code class="literal">WIN1250</code></td><td><code class="literal">LATIN2</code></td></tr><tr><td><code class="literal">windows_1250_to_mic</code></td><td><code class="literal">WIN1250</code></td><td><code class="literal">MULE_INTERNAL</code></td></tr><tr><td><code class="literal">windows_1250_to_utf8</code></td><td><code class="literal">WIN1250</code></td><td><code class="literal">UTF8</code></td></tr><tr><td><code class="literal">windows_1251_to_iso_8859_5</code></td><td><code class="literal">WIN1251</code></td><td><code class="literal">ISO_8859_5</code></td></tr><tr><td><code class="literal">windows_1251_to_koi8_r</code></td><td><code class="literal">WIN1251</code></td><td><code class="literal">KOI8R</code></td></tr><tr><td><code class="literal">windows_1251_to_mic</code></td><td><code class="literal">WIN1251</code></td><td><code class="literal">MULE_INTERNAL</code></td></tr><tr><td><code class="literal">windows_1251_to_utf8</code></td><td><code class="literal">WIN1251</code></td><td><code class="literal">UTF8</code></td></tr><tr><td><code class="literal">windows_1251_to_windows_866</code></td><td><code class="literal">WIN1251</code></td><td><code class="literal">WIN866</code></td></tr><tr><td><code class="literal">windows_1252_to_utf8</code></td><td><code class="literal">WIN1252</code></td><td><code class="literal">UTF8</code></td></tr><tr><td><code class="literal">windows_1256_to_utf8</code></td><td><code class="literal">WIN1256</code></td><td><code class="literal">UTF8</code></td></tr><tr><td><code class="literal">windows_866_to_iso_8859_5</code></td><td><code class="literal">WIN866</code></td><td><code class="literal">ISO_8859_5</code></td></tr><tr><td><code class="literal">windows_866_to_koi8_r</code></td><td><code class="literal">WIN866</code></td><td><code class="literal">KOI8R</code></td></tr><tr><td><code class="literal">windows_866_to_mic</code></td><td><code class="literal">WIN866</code></td><td><code class="literal">MULE_INTERNAL</code></td></tr><tr><td><code class="literal">windows_866_to_utf8</code></td><td><code class="literal">WIN866</code></td><td><code class="literal">UTF8</code></td></tr><tr><td><code class="literal">windows_866_to_windows_1251</code></td><td><code class="literal">WIN866</code></td><td><code class="literal">WIN</code></td></tr><tr><td><code class="literal">windows_874_to_utf8</code></td><td><code class="literal">WIN874</code></td><td><code class="literal">UTF8</code></td></tr><tr><td><code class="literal">euc_jis_2004_to_utf8</code></td><td><code class="literal">EUC_JIS_2004</code></td><td><code class="literal">UTF8</code></td></tr><tr><td><code class="literal">utf8_to_euc_jis_2004</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">EUC_JIS_2004</code></td></tr><tr><td><code class="literal">shift_jis_2004_to_utf8</code></td><td><code class="literal">SHIFT_JIS_2004</code></td><td><code class="literal">UTF8</code></td></tr><tr><td><code class="literal">utf8_to_shift_jis_2004</code></td><td><code class="literal">UTF8</code></td><td><code class="literal">SHIFT_JIS_2004</code></td></tr><tr><td><code class="literal">euc_jis_2004_to_shift_jis_2004</code></td><td><code class="literal">EUC_JIS_2004</code></td><td><code class="literal">SHIFT_JIS_2004</code></td></tr><tr><td><code class="literal">shift_jis_2004_to_euc_jis_2004</code></td><td><code class="literal">SHIFT_JIS_2004</code></td><td><code class="literal">EUC_JIS_2004</code></td></tr></tbody><tbody class="footnotes"><tr><td colspan="3"><div id="ftn.id-1.5.8.9.10.2.1.1.1.1" class="footnote"><p><a href="#id-1.5.8.9.10.2.1.1.1.1" class="para"><sup class="para">[a] </sup></a>
          转换名遵循一种标准命名模式：将全部非字母数字字符替换为下划线的源编码的官方名称，后面跟上<code class="literal">_to_</code>，最后是按照相似方式处理过的目标编码名称。因此，名称可能会不同于习惯的编码名称。
         </p></div></td></tr></tbody></table></div></div><br class="table-break" /><div class="sect2" id="FUNCTIONS-STRING-FORMAT"><div class="titlepage"><div><div><h3 class="title">9.4.1. <code class="function">format</code></h3></div></div></div><a id="id-1.5.8.9.11.2" class="indexterm"></a><p>
     函数<code class="function">format</code>根据一个格式字符串产生格式化的输出，其形式类似于 C 函数<code class="function">sprintf</code>。
    </p><p>
</p><pre class="synopsis">
<code class="function">format</code>(<em class="parameter"><code>formatstr</code></em> <code class="type">text</code> [, <em class="parameter"><code>formatarg</code></em> <code class="type">"any"</code> [, ...] ])
</pre><p>
     <em class="replaceable"><code>formatstr</code></em>是一个格式字符串，它指定了结果应该如何被格式化。格式字符串中的文本被直接复制到结果中，除了使用<em class="firstterm">格式说明符</em>的地方。格式说明符在字符串中扮演着占位符的角色，它定义后续的函数参数如何被格式化及插入到结果中。每一个<em class="replaceable"><code>formatarg</code></em>参数会被根据其数据类型的常规输出规则转换为文本，并接着根据格式说明符被格式化和插入到结果字符串中。
    </p><p>
     格式说明符由一个<code class="literal">%</code>字符开始并且有这样的形式
</p><pre class="synopsis">
%[<em class="replaceable"><code>position</code></em>][<em class="replaceable"><code>flags</code></em>][<em class="replaceable"><code>width</code></em>]<em class="replaceable"><code>type</code></em>
</pre><p>
     其中的各组件域是：

     </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><em class="replaceable"><code>position</code></em>（可选）</span></dt><dd><p>
         一个形式为<code class="literal"><em class="replaceable"><code>n</code></em>$</code>的字符串，其中<em class="replaceable"><code>n</code></em>是要打印的参数的索引。索引 1 表示<em class="replaceable"><code>formatstr</code></em>之后的第一个参数。如果<em class="replaceable"><code>position</code></em>被忽略，默认会使用序列中的下一个参数。
        </p></dd><dt><span class="term"><em class="replaceable"><code>flags</code></em>（可选）</span></dt><dd><p>
         控制格式说明符的输出如何被格式化的附加选项。当前唯一支持的标志是一个负号（<code class="literal">-</code>），它将导致格式说明符的输出会被左对齐（left-justified）。除非<em class="replaceable"><code>width</code></em>域也被指定，否者这个域不会产生任何效果。
        </p></dd><dt><span class="term"><em class="replaceable"><code>width</code></em>（可选）</span></dt><dd><p>
         指定用于显示格式说明符输出的<span class="emphasis"><em>最小</em></span>字符数。输出将被在左部或右部（取决于<code class="literal">-</code>标志）用空格填充以保证充满该宽度。太小的宽度设置不会导致输出被截断，但是会被简单地忽略。宽度可以使用下列形式之一指定：一个正整数；一个星号（<code class="literal">*</code>）表示使用下一个函数参数作为宽度；或者一个形式为<code class="literal">*<em class="replaceable"><code>n</code></em>$</code>的字符串表示使用第<em class="replaceable"><code>n</code></em>个函数参数作为宽度。
        </p><p>
         如果宽度来自于一个函数参数，则参数在被格式说明符的值使用之前就被消耗掉了。如果宽度参数是负值，结果会在长度为<code class="function">abs</code>(<em class="replaceable"><code>width</code></em>)的域中被左对齐（如果<code class="literal">-</code>标志被指定）。
        </p></dd><dt><span class="term"><em class="replaceable"><code>type</code></em>（必需）</span></dt><dd><p>
         格式转换的类型，用于产生格式说明符的输出。支持下面的类型：
         </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
            <code class="literal">s</code>将参数值格式化为一个简单字符串。一个控制被视为一个空字符串。
           </p></li><li class="listitem"><p>
            <code class="literal">I</code>将参数值视作 SQL 标识符，并在必要时用双写引号包围它。如果参数为空，将会是一个错误（等效于<code class="function">quote_ident</code>）。
           </p></li><li class="listitem"><p>
            <code class="literal">L</code>将参数值引用为 SQL 文字。一个空值将被显示为不带引号的字符串<code class="literal">NULL</code>（等效于<code class="function">quote_nullable</code>）。
           </p></li></ul></div><p>
        </p></dd></dl></div><p>
    </p><p>
     除了以上所述的格式说明符之外，要输出一个文字形式的<code class="literal">%</code>字符，可以使用特殊序列<code class="literal">%%</code>。
    </p><p>
     下面有一些基本的格式转换的例子：

</p><pre class="screen">
SELECT format('Hello %s', 'World');
<em class="lineannotation"><span class="lineannotation">结果：</span></em><code class="computeroutput">Hello World</code>

SELECT format('Testing %s, %s, %s, %%', 'one', 'two', 'three');
<em class="lineannotation"><span class="lineannotation">结果：</span></em><code class="computeroutput">Testing one, two, three, %</code>

SELECT format('INSERT INTO %I VALUES(%L)', 'Foo bar', E'O\'Reilly');
<em class="lineannotation"><span class="lineannotation">结果：</span></em><code class="computeroutput">INSERT INTO "Foo bar" VALUES('O''Reilly')</code>

SELECT format('INSERT INTO %I VALUES(%L)', 'locations', 'C:\Program Files');
<em class="lineannotation"><span class="lineannotation">结果：</span></em><code class="computeroutput">INSERT INTO locations VALUES(E'C:\\Program Files')</code>
</pre><p>
    </p><p>
     下面是使用<em class="replaceable"><code>width</code></em>域和<code class="literal">-</code>标志的例子：

</p><pre class="screen">
SELECT format('|%10s|', 'foo');
<em class="lineannotation"><span class="lineannotation">结果：</span></em><code class="computeroutput">|       foo|</code>

SELECT format('|%-10s|', 'foo');
<em class="lineannotation"><span class="lineannotation">结果：</span></em><code class="computeroutput">|foo       |</code>

SELECT format('|%*s|', 10, 'foo');
<em class="lineannotation"><span class="lineannotation">结果：</span></em><code class="computeroutput">|       foo|</code>

SELECT format('|%*s|', -10, 'foo');
<em class="lineannotation"><span class="lineannotation">结果：</span></em><code class="computeroutput">|foo       |</code>

SELECT format('|%-*s|', 10, 'foo');
<em class="lineannotation"><span class="lineannotation">结果：</span></em><code class="computeroutput">|foo       |</code>

SELECT format('|%-*s|', -10, 'foo');
<em class="lineannotation"><span class="lineannotation">结果：</span></em><code class="computeroutput">|foo       |</code>
</pre><p>
    </p><p>
     这些例子展示了<em class="replaceable"><code>position</code></em>域的例子：

</p><pre class="screen">
SELECT format('Testing %3$s, %2$s, %1$s', 'one', 'two', 'three');
<em class="lineannotation"><span class="lineannotation">结果：</span></em><code class="computeroutput">Testing three, two, one</code>

SELECT format('|%*2$s|', 'foo', 10, 'bar');
<em class="lineannotation"><span class="lineannotation">结果：</span></em><code class="computeroutput">|       bar|</code>

SELECT format('|%1$*2$s|', 'foo', 10, 'bar');
<em class="lineannotation"><span class="lineannotation">结果：</span></em><code class="computeroutput">|       foo|</code>
</pre><p>
    </p><p>
     不同于标准的 C 函数<code class="function">sprintf</code>，<span class="productname">PostgreSQL</span>的<code class="function">format</code>函数允许将带有或者不带有<em class="replaceable"><code>position</code></em>域的格式说明符被混在同一个格式字符串中。一个不带有<em class="replaceable"><code>position</code></em>域的格式说明符总是使用最后一个被消耗的参数的下一个参数。另外，<code class="function">format</code>函数不要求所有函数参数都被用在格式字符串中。例如：

</p><pre class="screen">
SELECT format('Testing %3$s, %2$s, %s', 'one', 'two', 'three');
<em class="lineannotation"><span class="lineannotation">结果：</span></em><code class="computeroutput">Testing three, two, three</code>
</pre><p>
    </p><p>
     对于安全地构造动态 SQL 语句，<code class="literal">%I</code>和<code class="literal">%L</code>格式说明符特别有用。参见<a class="xref" href="plpgsql-statements.html#PLPGSQL-QUOTE-LITERAL-EXAMPLE" title="例 43.1. 在动态查询中引用值">例 43.1</a>。
    </p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="functions-math.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="functions.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="functions-binarystring.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">9.3. 数学函数和操作符 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> 9.5. 二进制串函数和操作符</td></tr></table></div></body></html>