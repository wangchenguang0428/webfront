<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>44.1. 概述</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="pltcl.html" title="第 44 章 PL/Tcl - Tcl 过程语言" /><link rel="next" href="pltcl-functions.html" title="44.2. PL/Tcl 函数和参数" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">44.1. 概述</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="pltcl.html" title="第 44 章 PL/Tcl - Tcl 过程语言">上一页</a> </td><td width="10%" align="left"><a accesskey="u" href="pltcl.html" title="第 44 章 PL/Tcl - Tcl 过程语言">上一级</a></td><th width="60%" align="center">第 44 章 PL/Tcl - Tcl 过程语言</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 11.2 手册">起始页</a></td><td width="10%" align="right"> <a accesskey="n" href="pltcl-functions.html" title="44.2. PL/Tcl 函数和参数">下一页</a></td></tr></table><hr></hr></div><div class="sect1" id="PLTCL-OVERVIEW"><div class="titlepage"><div><div><h2 class="title" style="clear: both">44.1. 概述</h2></div></div></div><p>
    PL/Tcl 提供了大部分函数编写者在 C 语言中能够获得的能力，虽然有一些限制，但是却额外提供了 Tcl 中强大的字符串处理库。
   </p><p>
    一种强制性的<span class="emphasis"><em>好</em></span>限制是所有被执行的东西都处于 Tcl 解释器的安全上下文中。除了安全 Tcl 的有限的命令集合之外，只有几个通过 SPI 访问数据库的命令以及通过<code class="function">elog()</code>产生消息的命令。PL/Tcl 没有提供访问数据库服务器内部或者在<span class="productname">PostgreSQL</span>服务器进程权限之下得到 OS-级访问的方法，而 C 函数是可以那样做的。因此，非特权数据库用户可以使用这种语言，它不会给予他们无限制的权利。
   </p><p>
    其他值得注意的实现限制是 Tcl 函数不能被用来创建新数据类型的输入/输出函数。
   </p><p>
    有时候我们想要编写不受安全 Tcl 限制的 Tcl 函数。例如，我们可能想要一个能发送电子邮件的 Tcl 函数。要处理这些情况，可以使用一种<span class="application">PL/Tcl</span>的变体，它被称为<code class="literal">PL/TclU</code>（用于非可信 Tcl）。它其实是完全相同的一种语言，不过它使用了一个完整的 Tcl 解释器。<span class="emphasis"><em>如果使用了<span class="application">PL/TclU</span>，它必须被安装为一种非可信的过程语言</em></span>，这样只有数据库超级用户可以用它来创建函数。<span class="application">PL/TclU</span>函数的编写者必须注意该函数不能被用来做其设计目的之外的事情，因为该函数能做一个作为数据库管理员登录的用户可以做的任何事情。
   </p><p>
    如果在安装过程的配置步骤中指定了 Tcl 支持，<span class="application">PL/Tcl</span>以及<span class="application">PL/TclU</span>调用处理器的共享对象代码会被自动编译并且被安装在<span class="productname">PostgreSQL</span>的库目录中。要在一个特定数据库中安装<span class="application">PL/Tcl</span>或者<span class="application">PL/TclU</span>，请使用<code class="command">CREATE EXTENSION</code>命令，例如<code class="literal">CREATE EXTENSION pltcl</code>或者<code class="literal">CREATE EXTENSION pltclu</code>。
   </p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="pltcl.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="pltcl.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="pltcl-functions.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">第 44 章 PL/Tcl - Tcl 过程语言 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> 44.2. PL/Tcl 函数和参数</td></tr></table></div></body></html>