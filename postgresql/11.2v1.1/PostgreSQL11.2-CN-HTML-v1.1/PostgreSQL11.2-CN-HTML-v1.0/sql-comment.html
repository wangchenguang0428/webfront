<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>COMMENT</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="sql-cluster.html" title="CLUSTER" /><link rel="next" href="sql-commit.html" title="COMMIT" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">COMMENT</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="sql-cluster.html" title="CLUSTER">上一页</a> </td><td width="10%" align="left"><a accesskey="u" href="sql-commands.html" title="SQL 命令">上一级</a></td><th width="60%" align="center">SQL 命令</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 11.2 手册">起始页</a></td><td width="10%" align="right"> <a accesskey="n" href="sql-commit.html" title="COMMIT">下一页</a></td></tr></table><hr></hr></div><div class="refentry" id="SQL-COMMENT"><div class="titlepage"></div><a id="id-1.9.3.52.1" class="indexterm"></a><div class="refnamediv"><h2><span class="refentrytitle">COMMENT</span></h2><p>COMMENT — 定义或者更改一个对象的注释</p></div><div class="refsynopsisdiv"><h2>大纲</h2><pre class="synopsis">
COMMENT ON
{
  ACCESS METHOD <em class="replaceable"><code>object_name</code></em> |
  AGGREGATE <em class="replaceable"><code>aggregate_name</code></em> ( <em class="replaceable"><code>aggregate_signature</code></em> ) |
  CAST (<em class="replaceable"><code>source_type</code></em> AS <em class="replaceable"><code>target_type</code></em>) |
  COLLATION <em class="replaceable"><code>object_name</code></em> |
  COLUMN <em class="replaceable"><code>relation_name</code></em>.<em class="replaceable"><code>column_name</code></em> |
  CONSTRAINT <em class="replaceable"><code>constraint_name</code></em> ON <em class="replaceable"><code>table_name</code></em> |
  CONSTRAINT <em class="replaceable"><code>constraint_name</code></em> ON DOMAIN <em class="replaceable"><code>domain_name</code></em> |
  CONVERSION <em class="replaceable"><code>object_name</code></em> |
  DATABASE <em class="replaceable"><code>object_name</code></em> |
  DOMAIN <em class="replaceable"><code>object_name</code></em> |
  EXTENSION <em class="replaceable"><code>object_name</code></em> |
  EVENT TRIGGER <em class="replaceable"><code>object_name</code></em> |
  FOREIGN DATA WRAPPER <em class="replaceable"><code>object_name</code></em> |
  FOREIGN TABLE <em class="replaceable"><code>object_name</code></em> |
  FUNCTION <em class="replaceable"><code>function_name</code></em> [ ( [ [ <em class="replaceable"><code>argmode</code></em> ] [ <em class="replaceable"><code>argname</code></em> ] <em class="replaceable"><code>argtype</code></em> [, ...] ] ) ] |
  INDEX <em class="replaceable"><code>object_name</code></em> |
  LARGE OBJECT <em class="replaceable"><code>large_object_oid</code></em> |
  MATERIALIZED VIEW <em class="replaceable"><code>object_name</code></em> |
  OPERATOR <em class="replaceable"><code>operator_name</code></em> (<em class="replaceable"><code>left_type</code></em>, <em class="replaceable"><code>right_type</code></em>) |
  OPERATOR CLASS <em class="replaceable"><code>object_name</code></em> USING <em class="replaceable"><code>index_method</code></em> |
  OPERATOR FAMILY <em class="replaceable"><code>object_name</code></em> USING <em class="replaceable"><code>index_method</code></em> |
  POLICY <em class="replaceable"><code>policy_name</code></em> ON <em class="replaceable"><code>table_name</code></em> |
  [ PROCEDURAL ] LANGUAGE <em class="replaceable"><code>object_name</code></em> |
  PROCEDURE <em class="replaceable"><code>procedure_name</code></em> [ ( [ [ <em class="replaceable"><code>argmode</code></em> ] [ <em class="replaceable"><code>argname</code></em> ] <em class="replaceable"><code>argtype</code></em> [, ...] ] ) ] |
  PUBLICATION <em class="replaceable"><code>object_name</code></em> |
  ROLE <em class="replaceable"><code>object_name</code></em> |
  ROUTINE <em class="replaceable"><code>routine_name</code></em> [ ( [ [ <em class="replaceable"><code>argmode</code></em> ] [ <em class="replaceable"><code>argname</code></em> ] <em class="replaceable"><code>argtype</code></em> [, ...] ] ) ] |
  RULE <em class="replaceable"><code>rule_name</code></em> ON <em class="replaceable"><code>table_name</code></em> |
  SCHEMA <em class="replaceable"><code>object_name</code></em> |
  SEQUENCE <em class="replaceable"><code>object_name</code></em> |
  SERVER <em class="replaceable"><code>object_name</code></em> |
  STATISTICS <em class="replaceable"><code>object_name</code></em> |
  SUBSCRIPTION <em class="replaceable"><code>object_name</code></em> |
  TABLE <em class="replaceable"><code>object_name</code></em> |
  TABLESPACE <em class="replaceable"><code>object_name</code></em> |
  TEXT SEARCH CONFIGURATION <em class="replaceable"><code>object_name</code></em> |
  TEXT SEARCH DICTIONARY <em class="replaceable"><code>object_name</code></em> |
  TEXT SEARCH PARSER <em class="replaceable"><code>object_name</code></em> |
  TEXT SEARCH TEMPLATE <em class="replaceable"><code>object_name</code></em> |
  TRANSFORM FOR <em class="replaceable"><code>type_name</code></em> LANGUAGE <em class="replaceable"><code>lang_name</code></em> |
  TRIGGER <em class="replaceable"><code>trigger_name</code></em> ON <em class="replaceable"><code>table_name</code></em> |
  TYPE <em class="replaceable"><code>object_name</code></em> |
  VIEW <em class="replaceable"><code>object_name</code></em>
} IS '<em class="replaceable"><code>text</code></em>'

<span class="phrase">其中 <em class="replaceable"><code>aggregate_signature</code></em> 是：</span>

* |
[ <em class="replaceable"><code>argmode</code></em> ] [ <em class="replaceable"><code>argname</code></em> ] <em class="replaceable"><code>argtype</code></em> [ , ... ] |
[ [ <em class="replaceable"><code>argmode</code></em> ] [ <em class="replaceable"><code>argname</code></em> ] <em class="replaceable"><code>argtype</code></em> [ , ... ] ] ORDER BY [ <em class="replaceable"><code>argmode</code></em> ] [ <em class="replaceable"><code>argname</code></em> ] <em class="replaceable"><code>argtype</code></em> [ , ... ]
</pre></div><div class="refsect1" id="id-1.9.3.52.5"><h2>描述</h2><p>
   <code class="command">COMMENT</code>存储关于一个数据库对象的注释。
  </p><p>
   对每一个对象只保存一个注释字符串，因此为了修改一段注释，对同一个对象
   发出一个新的<code class="command">COMMENT</code>命令。要移除一段注释，可在文
   本字符串的位置上写上<code class="literal">NULL</code>。当对象被删除时，其注释
   也会被自动删除。
  </p><p>
   对大部分类型的对象，只有对象的拥有者可以设置注释。角色没有拥有者，因此
   <code class="literal">COMMENT ON ROLE</code>的规则是你必须作为一个超级用户来对一个
   超级用户角色设置注释，或者具有<code class="literal">CREATEROLE</code>特权来对非超级用
   户角色设置注释。同样的，访问方法也没有拥有者，你必须作为一个超级用户来
   对一个访问方法设置注释。当然，一个超级用户可以对任何东西设置注释。
  </p><p>
    使用<span class="application">psql</span>的<code class="command">\d</code>
    命令家族可以查看注释。其他检索注释的用户接口可以构建在
    <span class="application">psql</span>使用的内建函数之上，即
    <code class="function">obj_description</code>、<code class="function">col_description</code>
    以及<code class="function">shobj_description</code>
    （见<a class="xref" href="functions-info.html#FUNCTIONS-INFO-COMMENT-TABLE" title="表 9.68. 注释信息函数">表 9.68</a>）。
  </p></div><div class="refsect1" id="id-1.9.3.52.6"><h2>参数</h2><div class="variablelist"><dl class="variablelist"><dt><span class="term"><em class="replaceable"><code>object_name</code></em><br /></span><span class="term"><em class="replaceable"><code>relation_name</code></em>.<em class="replaceable"><code>column_name</code></em><br /></span><span class="term"><em class="replaceable"><code>aggregate_name</code></em><br /></span><span class="term"><em class="replaceable"><code>constraint_name</code></em><br /></span><span class="term"><em class="replaceable"><code>function_name</code></em><br /></span><span class="term"><em class="replaceable"><code>operator_name</code></em><br /></span><span class="term"><em class="replaceable"><code>policy_name</code></em><br /></span><span class="term"><em class="replaceable"><code>procedure_name</code></em><br /></span><span class="term"><em class="replaceable"><code>routine_name</code></em><br /></span><span class="term"><em class="replaceable"><code>rule_name</code></em><br /></span><span class="term"><em class="replaceable"><code>trigger_name</code></em></span></dt><dd><p>
      要被注释的对象的名称。表、聚集、排序方式、转换、域、外部表、函数、
      索引、操作符、操作符类、操作符族、存储过程、例程、序列、统计信息、文本搜索对象、类型和视图
      的名称可以被模式限定。在注释一列时，
      <em class="replaceable"><code>relation_name</code></em>必须
      引用一个表、视图、组合类型或者外部表。
     </p></dd><dt><span class="term"><em class="replaceable"><code>table_name</code></em><br /></span><span class="term"><em class="replaceable"><code>domain_name</code></em></span></dt><dd><p>
      当在一个约束、触发器、规则或者策略上创建一段注释时，这些参数指定在其上定义
      该对象的表或域的名称。
     </p></dd><dt><span class="term"><em class="replaceable"><code>source_type</code></em></span></dt><dd><p>
       造型的源数据类型的名称。
      </p></dd><dt><span class="term"><em class="replaceable"><code>target_type</code></em></span></dt><dd><p>
       造型的目标数据类型的名称。
      </p></dd><dt><span class="term"><em class="replaceable"><code>argmode</code></em></span></dt><dd><p>
      一个函数，存储过程或者聚集函数的参数的模式：<code class="literal">IN</code>、
      <code class="literal">OUT</code>、<code class="literal">INOUT</code>或者<code class="literal">VARIADIC</code>。
      如果被省略，默认值是<code class="literal">IN</code>。注意
      <code class="command">COMMENT</code>并不真正关心
      <code class="literal">OUT</code>参数，因为决定函数的身份只需要输入参数。因此
      列出<code class="literal">IN</code>、<code class="literal">INOUT</code>和<code class="literal">VARIADIC</code>
      参数就足够了。
     </p></dd><dt><span class="term"><em class="replaceable"><code>argname</code></em></span></dt><dd><p>
      一个函数，存储过程或者聚集函数参数的名称。注意
      <code class="command">COMMENT</code>并不真正关心参数名称，
      因为决定函数的身份只需要参数数据类型。
     </p></dd><dt><span class="term"><em class="replaceable"><code>argtype</code></em></span></dt><dd><p>
      一个函数，存储过程或者聚集函数参数的数据类型。
     </p></dd><dt><span class="term"><em class="replaceable"><code>large_object_oid</code></em></span></dt><dd><p>
      大对象的 OID。
     </p></dd><dt><span class="term"><em class="replaceable"><code>left_type</code></em><br /></span><span class="term"><em class="replaceable"><code>right_type</code></em></span></dt><dd><p>
      操作符的参数的数据类型（可以是模式限定的）。对一个前缀后后缀操作符
      的缺失参数可以写<code class="literal">NONE</code>。
     </p></dd><dt><span class="term"><code class="literal">PROCEDURAL</code></span></dt><dd><p>
       这是一个噪声词。
      </p></dd><dt><span class="term"><em class="replaceable"><code>type_name</code></em></span></dt><dd><p>
       该转换的数据类型的名称。
      </p></dd><dt><span class="term"><em class="replaceable"><code>lang_name</code></em></span></dt><dd><p>
       该转换的语言的名称。
      </p></dd><dt><span class="term"><em class="replaceable"><code>text</code></em></span></dt><dd><p>
      写成一个字符串的新注释。如果要删除注释，写成<code class="literal">NULL</code>。
     </p></dd></dl></div></div><div class="refsect1" id="id-1.9.3.52.7"><h2>注解</h2><p>
   当前对查看注释没有安全机制：任何连接到一个数据库的用户能够看到
   该数据库中所有对象的注释。对于数据库、角色、表空间这类共享对象，
   注释被全局存储，因此连接到集簇中任何数据库的任何用户可以看到共
   享对象的所有注释。因此，不要在注释中放置有安全性风险的信息。
  </p></div><div class="refsect1" id="id-1.9.3.52.8"><h2>示例</h2><p>
   为表<code class="literal">mytable</code>附加一段注释：

</p><pre class="programlisting">
COMMENT ON TABLE mytable IS 'This is my table.';
</pre><p>

   移除它：

</p><pre class="programlisting">
COMMENT ON TABLE mytable IS NULL;
</pre><p>
  </p><p>
   更多的一些例子：

</p><pre class="programlisting">
COMMENT ON ACCESS METHOD rtree IS 'R-Tree access method';
COMMENT ON AGGREGATE my_aggregate (double precision) IS 'Computes sample variance';
COMMENT ON CAST (text AS int4) IS 'Allow casts from text to int4';
COMMENT ON COLLATION "fr_CA" IS 'Canadian French';
COMMENT ON COLUMN my_table.my_column IS 'Employee ID number';
COMMENT ON CONVERSION my_conv IS 'Conversion to UTF8';
COMMENT ON CONSTRAINT bar_col_cons ON bar IS 'Constrains column col';
COMMENT ON CONSTRAINT dom_col_constr ON DOMAIN dom IS 'Constrains col of domain';
COMMENT ON DATABASE my_database IS 'Development Database';
COMMENT ON DOMAIN my_domain IS 'Email Address Domain';
COMMENT ON EXTENSION hstore IS 'implements the hstore data type';
COMMENT ON FOREIGN DATA WRAPPER mywrapper IS 'my foreign data wrapper';
COMMENT ON FOREIGN TABLE my_foreign_table IS 'Employee Information in other database';
COMMENT ON FUNCTION my_function (timestamp) IS 'Returns Roman Numeral';
COMMENT ON INDEX my_index IS 'Enforces uniqueness on employee ID';
COMMENT ON LANGUAGE plpython IS 'Python support for stored procedures';
COMMENT ON LARGE OBJECT 346344 IS 'Planning document';
COMMENT ON MATERIALIZED VIEW my_matview IS 'Summary of order history';
COMMENT ON OPERATOR ^ (text, text) IS 'Performs intersection of two texts';
COMMENT ON OPERATOR - (NONE, integer) IS 'Unary minus';
COMMENT ON OPERATOR CLASS int4ops USING btree IS '4 byte integer operators for btrees';
COMMENT ON OPERATOR FAMILY integer_ops USING btree IS 'all integer operators for btrees';
COMMENT ON POLICY my_policy ON mytable IS 'Filter rows by users';
COMMENT ON PROCEDURE my_proc (integer, integer) IS 'Runs a report';
COMMENT ON ROLE my_role IS 'Administration group for finance tables';
COMMENT ON RULE my_rule ON my_table IS 'Logs updates of employee records';
COMMENT ON SCHEMA my_schema IS 'Departmental data';
COMMENT ON SEQUENCE my_sequence IS 'Used to generate primary keys';
COMMENT ON SERVER myserver IS 'my foreign server';
COMMENT ON STATISTICS my_statistics IS 'Improves planner row estimations';
COMMENT ON TABLE my_schema.my_table IS 'Employee Information';
COMMENT ON TABLESPACE my_tablespace IS 'Tablespace for indexes';
COMMENT ON TEXT SEARCH CONFIGURATION my_config IS 'Special word filtering';
COMMENT ON TEXT SEARCH DICTIONARY swedish IS 'Snowball stemmer for Swedish language';
COMMENT ON TEXT SEARCH PARSER my_parser IS 'Splits text into words';
COMMENT ON TEXT SEARCH TEMPLATE snowball IS 'Snowball stemmer';
COMMENT ON TRANSFORM FOR hstore LANGUAGE plpythonu IS 'Transform between hstore and Python dict';
COMMENT ON TRIGGER my_trigger ON my_table IS 'Used for RI';
COMMENT ON TYPE complex IS 'Complex number data type';
COMMENT ON VIEW my_view IS 'View of departmental costs';
</pre></div><div class="refsect1" id="id-1.9.3.52.9"><h2>兼容性</h2><p>
   SQL 标准中没有<code class="command">COMMENT</code>命令。
  </p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="sql-cluster.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="sql-commands.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="sql-commit.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">CLUSTER </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> COMMIT</td></tr></table></div></body></html>