<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>21.2. 角色属性</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="database-roles.html" title="21.1. 数据库角色" /><link rel="next" href="role-membership.html" title="21.3. 角色成员关系" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">21.2. 角色属性</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="database-roles.html" title="21.1. 数据库角色">上一页</a> </td><td width="10%" align="left"><a accesskey="u" href="user-manag.html" title="第 21 章 数据库角色">上一级</a></td><th width="60%" align="center">第 21 章 数据库角色</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 11.2 手册">起始页</a></td><td width="10%" align="right"> <a accesskey="n" href="role-membership.html" title="21.3. 角色成员关系">下一页</a></td></tr></table><hr></hr></div><div class="sect1" id="ROLE-ATTRIBUTES"><div class="titlepage"><div><div><h2 class="title" style="clear: both">21.2. 角色属性</h2></div></div></div><p>
    一个数据库角色可以有一些属性，它们定义角色的权限并且与客户端认证系统交互。

    </p><div class="variablelist"><dl class="variablelist"><dt><span class="term">login privilege<a id="id-1.6.8.6.2.1.1.1.1" class="indexterm"></a></span></dt><dd><p>
        只有具有<code class="literal">LOGIN</code>属性的角色才能被用于一个数据库连接的初始角色名称。一个带有<code class="literal">LOGIN</code>属性的角色可以被认为和一个<span class="quote">“<span class="quote">数据库用户</span>”</span>相同。要创建一个带有登录权限的角色，使用两者之一：
</p><pre class="programlisting">
CREATE ROLE <em class="replaceable"><code>name</code></em> LOGIN;
CREATE USER <em class="replaceable"><code>name</code></em>;
</pre><p>
        （<code class="command">CREATE USER</code>和<code class="command">CREATE ROLE</code>等效，除了<code class="command">CREATE USER</code>默认假定有<code class="literal">LOGIN</code>，而<code class="command">CREATE ROLE</code>不这样认为）。
       </p></dd><dt><span class="term">superuser status<a id="id-1.6.8.6.2.1.2.1.1" class="indexterm"></a></span></dt><dd><p>
        一个数据库超级用户会绕开所有权限检查，除了登入的权利。这是一个危险的权限并且应该小心使用，最好用一个不是超级用户的角色来完成你的大部分工作。要创建一个新数据库超级用户，使用<code class="literal">CREATE ROLE <em class="replaceable"><code>name</code></em> SUPERUSER</code>。你必须作为一个超级用户来完成这些。
       </p></dd><dt><span class="term">database creation<a id="id-1.6.8.6.2.1.3.1.1" class="indexterm"></a></span></dt><dd><p>
        一个角色必须被显式给予权限才能创建数据库（除了超级用户，因为它们会绕开所有权限检查）。要创建这样一个角色，使用<code class="literal">CREATE ROLE <em class="replaceable"><code>name</code></em> CREATEDB</code>。
       </p></dd><dt><span class="term">role creation<a id="id-1.6.8.6.2.1.4.1.1" class="indexterm"></a></span></dt><dd><p>
        一个角色必须被显式给予权限才能创建更多角色（除了超级用户，因为它们会绕开所有权限检查）。要创建这样一个角色，使用<code class="literal">CREATE ROLE <em class="replaceable"><code>name</code></em> CREATEROLE</code>。一个带有<code class="literal">CREATEROLE</code>权限的角色也可以修改和删除其他角色，还可以授予或回收角色中的成员关系。然而，要创建、修改、删除或修改一个超级用户角色的成员关系，需要以超级用户的身份操作。<code class="literal">CREATEROLE</code>不足以完成这一切。
       </p></dd><dt><span class="term">initiating replication<a id="id-1.6.8.6.2.1.5.1.1" class="indexterm"></a></span></dt><dd><p>
        一个角色必须被显式给予权限才能发起流复制（除了超级用户，因为它们会绕开所有权限检查）。一个被用于流复制的角色必须也具有<code class="literal">LOGIN</code>权限。要创建这样一个角色，使用<code class="literal">CREATE ROLE <em class="replaceable"><code>name</code></em> REPLICATION LOGIN</code>。
       </p></dd><dt><span class="term">password<a id="id-1.6.8.6.2.1.6.1.1" class="indexterm"></a></span></dt><dd><p>
        只有当客户端认证方法要求用户在连接数据库时提供一个口令时，一个口令才有意义。<code class="option">password</code>和<code class="option">md5</code>认证方法使用口令。数据库口令与操作系统命令独立。在角色创建时指定一个口令：<code class="literal">CREATE ROLE <em class="replaceable"><code>name</code></em> PASSWORD '<em class="replaceable"><code>string</code></em>'</code>。
       </p></dd></dl></div><p>

    在创建后可以用<code class="command">ALTER ROLE</code>修改一个角色属性。<a id="id-1.6.8.6.2.3" class="indexterm"></a><a class="xref" href="sql-createrole.html" title="CREATE ROLE"><span class="refentrytitle">CREATE ROLE</span></a>和<a class="xref" href="sql-alterrole.html" title="ALTER ROLE"><span class="refentrytitle">ALTER ROLE</span></a>命令的细节可见参考页。
   </p><div class="tip"><h3 class="title">提示</h3><p>
    一个好习惯是创建一个具有<code class="literal">CREATEDB</code>和<code class="literal">CREATEROLE</code>权限的角色，而不是创建一个超级用户，并且然后用这个角色来完成对数据库和角色的例行管理。这种方法避免了在非必要时作为超级用户操作任务的风险。
   </p></div><p>
   对于<a class="xref" href="runtime-config.html" title="第 19 章 服务器配置">第 19 章</a>中描述的运行时配置设置，一个角色也可以有角色相关的默认值。例如，如果出于某些原因你希望在每次连接时禁用索引扫描（提示：不是好主意），你可以使用：
</p><pre class="programlisting">
ALTER ROLE myname SET enable_indexscan TO off;
</pre><p>
   这将保存设置（但是不会立刻设置它）。在这个角色的后续连接中，它就表现得像在会话开始之前执行过<code class="literal">SET enable_indexscan TO off</code>。你也可以在会话期间改变该设置，它将只是作为默认值。要移除一个角色相关的默认设置，使用<code class="literal">ALTER ROLE <em class="replaceable"><code>rolename</code></em> RESET <em class="replaceable"><code>varname</code></em></code>。注意附加到没有<code class="literal">LOGIN</code>权限的角色的角色相关默认值相当无用，因为它们从不会被调用。
  </p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="database-roles.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="user-manag.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="role-membership.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">21.1. 数据库角色 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> 21.3. 角色成员关系</td></tr></table></div></body></html>