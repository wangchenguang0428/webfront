<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>9.19. 范围函数和操作符</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="functions-array.html" title="9.18. 数组函数和操作符" /><link rel="next" href="functions-aggregate.html" title="9.20. 聚集函数" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">9.19. 范围函数和操作符</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="functions-array.html" title="9.18. 数组函数和操作符">上一页</a> </td><td width="10%" align="left"><a accesskey="u" href="functions.html" title="第 9 章 函数和操作符">上一级</a></td><th width="60%" align="center">第 9 章 函数和操作符</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 11.2 手册">起始页</a></td><td width="10%" align="right"> <a accesskey="n" href="functions-aggregate.html" title="9.20. 聚集函数">下一页</a></td></tr></table><hr></hr></div><div class="sect1" id="FUNCTIONS-RANGE"><div class="titlepage"><div><div><h2 class="title" style="clear: both">9.19. 范围函数和操作符</h2></div></div></div><p>
   范围类型的概述请见<a class="xref" href="rangetypes.html" title="8.17. 范围类型">第 8.17 节</a>。
  </p><p>
   <a class="xref" href="functions-range.html#RANGE-OPERATORS-TABLE" title="表 9.50. 范围操作符">表 9.50</a>展示了范围类型可用的操作符。
  </p><div class="table" id="RANGE-OPERATORS-TABLE"><p class="title"><strong>表 9.50. 范围操作符</strong></p><div class="table-contents"><table class="table" summary="范围操作符" border="1"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>操作符</th><th>描述</th><th>例子</th><th>结果</th></tr></thead><tbody><tr><td> <code class="literal">=</code> </td><td>等于</td><td><code class="literal">int4range(1,5) = '[1,4]'::int4range</code></td><td><code class="literal">t</code></td></tr><tr><td> <code class="literal">&lt;&gt;</code> </td><td>不等于</td><td><code class="literal">numrange(1.1,2.2) &lt;&gt; numrange(1.1,2.3)</code></td><td><code class="literal">t</code></td></tr><tr><td> <code class="literal">&lt;</code> </td><td>小于</td><td><code class="literal">int4range(1,10) &lt; int4range(2,3)</code></td><td><code class="literal">t</code></td></tr><tr><td> <code class="literal">&gt;</code> </td><td>大于</td><td><code class="literal">int4range(1,10) &gt; int4range(1,5)</code></td><td><code class="literal">t</code></td></tr><tr><td> <code class="literal">&lt;=</code> </td><td>小于等于</td><td><code class="literal">numrange(1.1,2.2) &lt;= numrange(1.1,2.2)</code></td><td><code class="literal">t</code></td></tr><tr><td> <code class="literal">&gt;=</code> </td><td>大于等于</td><td><code class="literal">numrange(1.1,2.2) &gt;= numrange(1.1,2.0)</code></td><td><code class="literal">t</code></td></tr><tr><td> <code class="literal">@&gt;</code> </td><td>包含范围</td><td><code class="literal">int4range(2,4) @&gt; int4range(2,3)</code></td><td><code class="literal">t</code></td></tr><tr><td> <code class="literal">@&gt;</code> </td><td>包含元素</td><td><code class="literal">'[2011-01-01,2011-03-01)'::tsrange @&gt; '2011-01-10'::timestamp</code></td><td><code class="literal">t</code></td></tr><tr><td> <code class="literal">&lt;@</code> </td><td>范围被包含</td><td><code class="literal">int4range(2,4) &lt;@ int4range(1,7)</code></td><td><code class="literal">t</code></td></tr><tr><td> <code class="literal">&lt;@</code> </td><td>元素被包含</td><td><code class="literal">42 &lt;@ int4range(1,7)</code></td><td><code class="literal">f</code></td></tr><tr><td> <code class="literal">&amp;&amp;</code> </td><td>重叠（有公共点）</td><td><code class="literal">int8range(3,7) &amp;&amp; int8range(4,12)</code></td><td><code class="literal">t</code></td></tr><tr><td> <code class="literal">&lt;&lt;</code> </td><td>严格左部</td><td><code class="literal">int8range(1,10) &lt;&lt; int8range(100,110)</code></td><td><code class="literal">t</code></td></tr><tr><td> <code class="literal">&gt;&gt;</code> </td><td>严格右部</td><td><code class="literal">int8range(50,60) &gt;&gt; int8range(20,30)</code></td><td><code class="literal">t</code></td></tr><tr><td> <code class="literal">&amp;&lt;</code> </td><td>不超过右部</td><td><code class="literal">int8range(1,20) &amp;&lt; int8range(18,20)</code></td><td><code class="literal">t</code></td></tr><tr><td> <code class="literal">&amp;&gt;</code> </td><td>不超过左部</td><td><code class="literal">int8range(7,20) &amp;&gt; int8range(5,10)</code></td><td><code class="literal">t</code></td></tr><tr><td> <code class="literal">-|-</code> </td><td>相邻</td><td><code class="literal">numrange(1.1,2.2) -|- numrange(2.2,3.3)</code></td><td><code class="literal">t</code></td></tr><tr><td> <code class="literal">+</code> </td><td>并</td><td><code class="literal">numrange(5,15) + numrange(10,20)</code></td><td><code class="literal">[5,20)</code></td></tr><tr><td> <code class="literal">*</code> </td><td>交</td><td><code class="literal">int8range(5,15) * int8range(10,20)</code></td><td><code class="literal">[10,15)</code></td></tr><tr><td> <code class="literal">-</code> </td><td>差</td><td><code class="literal">int8range(5,15) - int8range(10,20)</code></td><td><code class="literal">[5,10)</code></td></tr></tbody></table></div></div><br class="table-break" /><p>
   简单比较操作符<code class="literal">&lt;</code>、
   <code class="literal">&gt;</code>、<code class="literal">&lt;=</code>和
   <code class="literal">&gt;=</code>首先比较下界，并且只有在下界相等时才比较上界。这些比较通常对范围不怎么有用，但是还是提供它们以便能够在范围上构建 B树索引。
  </p><p>
   当涉及一个空范围时，左部/右部/相邻操作符总是返回假；即一个空范围被认为不在任何其他范围前面或者后面。
  </p><p>
   如果结果范围可能需要包含两个分离的子范围，并和差操作符将会失败，因为这样的范围无法被表示。
  </p><p>
   <a class="xref" href="functions-range.html#RANGE-FUNCTIONS-TABLE" title="表 9.51. 范围函数">表 9.51</a>显示可用于范围类型的函数。
  </p><a id="id-1.5.8.24.9" class="indexterm"></a><a id="id-1.5.8.24.10" class="indexterm"></a><a id="id-1.5.8.24.11" class="indexterm"></a><a id="id-1.5.8.24.12" class="indexterm"></a><a id="id-1.5.8.24.13" class="indexterm"></a><a id="id-1.5.8.24.14" class="indexterm"></a><a id="id-1.5.8.24.15" class="indexterm"></a><div class="table" id="RANGE-FUNCTIONS-TABLE"><p class="title"><strong>表 9.51. 范围函数</strong></p><div class="table-contents"><table class="table" summary="范围函数" border="1"><colgroup><col /><col /><col /><col /><col /></colgroup><thead><tr><th>函数</th><th>返回类型</th><th>描述</th><th>例子</th><th>结果</th></tr></thead><tbody><tr><td>
         <code class="literal">
          <code class="function">lower</code>(<code class="type">anyrange</code>)
         </code>
        </td><td>范围的元素类型</td><td>范围的下界</td><td><code class="literal">lower(numrange(1.1,2.2))</code></td><td><code class="literal">1.1</code></td></tr><tr><td>
         <code class="literal">
          <code class="function">upper</code>(<code class="type">anyrange</code>)
         </code>
        </td><td>范围的元素类型</td><td>范围的上界</td><td><code class="literal">upper(numrange(1.1,2.2))</code></td><td><code class="literal">2.2</code></td></tr><tr><td>
         <code class="literal">
          <code class="function">isempty</code>(<code class="type">anyrange</code>)
         </code>
        </td><td><code class="type">boolean</code></td><td>范围为空？</td><td><code class="literal">isempty(numrange(1.1,2.2))</code></td><td><code class="literal">false</code></td></tr><tr><td>
         <code class="literal">
          <code class="function">lower_inc</code>(<code class="type">anyrange</code>)
         </code>
        </td><td><code class="type">boolean</code></td><td>下界包含在内？</td><td><code class="literal">lower_inc(numrange(1.1,2.2))</code></td><td><code class="literal">true</code></td></tr><tr><td>
         <code class="literal">
          <code class="function">upper_inc</code>(<code class="type">anyrange</code>)
         </code>
        </td><td><code class="type">boolean</code></td><td>上界包含在内？</td><td><code class="literal">upper_inc(numrange(1.1,2.2))</code></td><td><code class="literal">false</code></td></tr><tr><td>
         <code class="literal">
          <code class="function">lower_inf</code>(<code class="type">anyrange</code>)
         </code>
        </td><td><code class="type">boolean</code></td><td>下界无限？</td><td><code class="literal">lower_inf('(,)'::daterange)</code></td><td><code class="literal">true</code></td></tr><tr><td>
         <code class="literal">
          <code class="function">upper_inf</code>(<code class="type">anyrange</code>)
         </code>
        </td><td><code class="type">boolean</code></td><td>上界无限？</td><td><code class="literal">upper_inf('(,)'::daterange)</code></td><td><code class="literal">true</code></td></tr><tr><td>
         <code class="literal">
          <code class="function">range_merge</code>(<code class="type">anyrange</code>, <code class="type">anyrange</code>)
         </code>
        </td><td><code class="type">anyrange</code></td><td>包含两个给定范围的最小范围</td><td><code class="literal">range_merge('[1,2)'::int4range, '[3,4)'::int4range)</code></td><td><code class="literal">[1,4)</code></td></tr></tbody></table></div></div><br class="table-break" /><p>
   如果范围为空或者被请求的界是无限的，<code class="function">lower</code>和<code class="function">upper</code>函数返回空值。函数<code class="function">lower_inc</code>、<code class="function">upper_inc</code>、<code class="function">lower_inf</code>和<code class="function">upper_inf</code>对一个空范围全部返回假。
  </p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="functions-array.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="functions.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="functions-aggregate.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">9.18. 数组函数和操作符 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> 9.20. 聚集函数</td></tr></table></div></body></html>