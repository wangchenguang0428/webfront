<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>14.5. 非持久设置</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="populate.html" title="14.4. 填充一个数据库" /><link rel="next" href="parallel-query.html" title="第 15 章 并行查询" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">14.5. 非持久设置</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="populate.html" title="14.4. 填充一个数据库">上一页</a> </td><td width="10%" align="left"><a accesskey="u" href="performance-tips.html" title="第 14 章 性能提示">上一级</a></td><th width="60%" align="center">第 14 章 性能提示</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 11.2 手册">起始页</a></td><td width="10%" align="right"> <a accesskey="n" href="parallel-query.html" title="第 15 章 并行查询">下一页</a></td></tr></table><hr></hr></div><div class="sect1" id="NON-DURABILITY"><div class="titlepage"><div><div><h2 class="title" style="clear: both">14.5. 非持久设置</h2></div></div></div><a id="id-1.5.13.8.2" class="indexterm"></a><p>
    持久性是数据库的一个保证已提交事务的记录的特性（即使是发生服务器崩溃或断电）。 然而，持久性会明显增加数据库的负荷，因此如果你的站点不需要这个保证，<span class="productname">PostgreSQL</span>可以被配置成运行更快。在这种情况下，你可以调整下列配置来提高性能。除了下面列出的，在数据库软件崩溃的情况下也能保证持久性。当这些设置被使用时，只有突然的操作系统停止会产生数据丢失或损坏的风险。

    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
       将数据库集簇的数据目录放在一个内存支持的文件系统上（即<acronym class="acronym">RAM</acronym>磁盘）。这消除了所有的数据库磁盘 I/O，但将数据存储限制到可用的内存量（可能有交换区）。
      </p></li><li class="listitem"><p>
       关闭<a class="xref" href="runtime-config-wal.html#GUC-FSYNC">fsync</a>；不需要将数据刷入磁盘。
      </p></li><li class="listitem"><p>
       关闭<a class="xref" href="runtime-config-wal.html#GUC-SYNCHRONOUS-COMMIT">synchronous_commit</a>；可能不需要在每次提交时
       强制把<acronym class="acronym">WAL</acronym>写入磁盘。这种设置可能会在
       <span class="emphasis"><em>数据库</em></span>崩溃时带来事务丢失的风险（但是没有数据破坏）。
      </p></li><li class="listitem"><p>
       关闭<a class="xref" href="runtime-config-wal.html#GUC-FULL-PAGE-WRITES">full_page_writes</a>；不需要警惕部分页面写入。
      </p></li><li class="listitem"><p>
       增加<a class="xref" href="runtime-config-wal.html#GUC-MAX-WAL-SIZE">max_wal_size</a>和<a class="xref" href="runtime-config-wal.html#GUC-CHECKPOINT-TIMEOUT">checkpoint_timeout</a>；
       这会降低检查点的频率，但会 增加<code class="filename">/pg_wal</code>的存储要求。
      </p></li><li class="listitem"><p>
       创建<a class="link" href="sql-createtable.html#SQL-CREATETABLE-UNLOGGED">不做日志的表</a>
       来避免<acronym class="acronym">WAL</acronym>写入，不过这会让表在崩溃时不安全。
      </p></li></ul></div><p>
   </p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="populate.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="performance-tips.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="parallel-query.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">14.4. 填充一个数据库 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> 第 15 章 并行查询</td></tr></table></div></body></html>