<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>12.5. 解析器</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="textsearch-features.html" title="12.4. 额外特性" /><link rel="next" href="textsearch-dictionaries.html" title="12.6. 词典" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">12.5. 解析器</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="textsearch-features.html" title="12.4. 额外特性">上一页</a> </td><td width="10%" align="left"><a accesskey="u" href="textsearch.html" title="第 12 章 全文搜索">上一级</a></td><th width="60%" align="center">第 12 章 全文搜索</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 11.2 手册">起始页</a></td><td width="10%" align="right"> <a accesskey="n" href="textsearch-dictionaries.html" title="12.6. 词典">下一页</a></td></tr></table><hr></hr></div><div class="sect1" id="TEXTSEARCH-PARSERS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">12.5. 解析器</h2></div></div></div><p>
   文本搜索解析器负责把未处理的文档文本划分成<em class="firstterm">记号</em>并且标识每一个记号的类型，而可能的类型集合由解析器本身定义。注意一个解析器完全不会修改文本 — 它简单地标识看似有理的词边界。因为这种有限的视野，对于应用相关的自定义解析器的需求就没有自定义字典那么强烈。目前<span class="productname">PostgreSQL</span>只提供了一种内建解析器，它已经被证实对很多种应用都适用。
  </p><p>
   内建解析器被称为<code class="literal">pg_catalog.default</code>。它识别 23 种记号类型，如<a class="xref" href="textsearch-parsers.html#TEXTSEARCH-DEFAULT-PARSER" title="表 12.1. 默认解析器的记号类型">表 12.1</a>所示。
  </p><div class="table" id="TEXTSEARCH-DEFAULT-PARSER"><p class="title"><strong>表 12.1. 默认解析器的记号类型</strong></p><div class="table-contents"><table class="table" summary="默认解析器的记号类型" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th>别名</th><th>描述</th><th>例子</th></tr></thead><tbody><tr><td><code class="literal">asciiword</code></td><td>单词，所有 ASCII 字母</td><td><code class="literal">elephant</code></td></tr><tr><td><code class="literal">word</code></td><td>单词，所有字母</td><td><code class="literal">mañana</code></td></tr><tr><td><code class="literal">numword</code></td><td>单词，字母和数字</td><td><code class="literal">beta1</code></td></tr><tr><td><code class="literal">asciihword</code></td><td>带连字符的单词，所有 ASCII</td><td><code class="literal">up-to-date</code></td></tr><tr><td><code class="literal">hword</code></td><td>带连字符的单词，所有字母</td><td><code class="literal">lógico-matemática</code></td></tr><tr><td><code class="literal">numhword</code></td><td>带连字符的单词，字母和数字</td><td><code class="literal">postgresql-beta1</code></td></tr><tr><td><code class="literal">hword_asciipart</code></td><td>带连字符的单词部分，所有 ASCII</td><td><code class="literal">postgresql</code> in the context <code class="literal">postgresql-beta1</code></td></tr><tr><td><code class="literal">hword_part</code></td><td>带连字符的单词部分，所有字母</td><td><code class="literal">lógico</code> or <code class="literal">matemática</code>
       in the context <code class="literal">lógico-matemática</code></td></tr><tr><td><code class="literal">hword_numpart</code></td><td>带连字符的单词部分，字母和数字</td><td><code class="literal">beta1</code> in the context
       <code class="literal">postgresql-beta1</code></td></tr><tr><td><code class="literal">email</code></td><td>Email 地址</td><td><code class="literal">foo@example.com</code></td></tr><tr><td><code class="literal">protocol</code></td><td>协议头部</td><td><code class="literal">http://</code></td></tr><tr><td><code class="literal">url</code></td><td>URL</td><td><code class="literal">example.com/stuff/index.html</code></td></tr><tr><td><code class="literal">host</code></td><td>主机</td><td><code class="literal">example.com</code></td></tr><tr><td><code class="literal">url_path</code></td><td>URL 路径</td><td><code class="literal">/stuff/index.html</code>, in the context of a URL</td></tr><tr><td><code class="literal">file</code></td><td>文件或路径名</td><td><code class="literal">/usr/local/foo.txt</code>, if not within a URL</td></tr><tr><td><code class="literal">sfloat</code></td><td>科学记数法</td><td><code class="literal">-1.234e56</code></td></tr><tr><td><code class="literal">float</code></td><td>十进制记数法</td><td><code class="literal">-1.234</code></td></tr><tr><td><code class="literal">int</code></td><td>有符号整数</td><td><code class="literal">-1234</code></td></tr><tr><td><code class="literal">uint</code></td><td>无符号整数</td><td><code class="literal">1234</code></td></tr><tr><td><code class="literal">version</code></td><td>版本号</td><td><code class="literal">8.3.0</code></td></tr><tr><td><code class="literal">tag</code></td><td>XML 标签</td><td><code class="literal">&lt;a href="dictionaries.html"&gt;</code></td></tr><tr><td><code class="literal">entity</code></td><td>XML 实体</td><td><code class="literal">&amp;amp;</code></td></tr><tr><td><code class="literal">blank</code></td><td>空格符号</td><td>（其他不识别的任意空白或标点符号）</td></tr></tbody></table></div></div><br class="table-break" /><div class="note"><h3 class="title">注意</h3><p>
    解析器的一个<span class="quote">“<span class="quote">字母</span>”</span>的概念由数据库的区域设置决定，具体是<code class="varname">lc_ctype</code>。只包含基本 ASCII 字母的词被报告为一个单独的记号类型，因为有时可以用来区别它们。在大部分欧洲语言中，记号类型<code class="literal">word</code>和<code class="literal">asciiword</code>应该被同样对待。
   </p><p>
    <code class="literal">email</code>不支持 RFC 5322 定义的所有合法 email 字符。具体来说，对 email 用户名被支持的非字母数字字符只有句点、破折号和下划线。
   </p></div><p>
   解析器有可能从同一份文本得出相互覆盖的记号。例如，一个带连字符的词可能会被报告为一整个词或者多个部分：

</p><pre class="screen">
SELECT alias, description, token FROM ts_debug('foo-bar-beta1');
      alias      |               description                |     token     
-----------------+------------------------------------------+---------------
 numhword        | Hyphenated word, letters and digits      | foo-bar-beta1
 hword_asciipart | Hyphenated word part, all ASCII          | foo
 blank           | Space symbols                            | -
 hword_asciipart | Hyphenated word part, all ASCII          | bar
 blank           | Space symbols                            | -
 hword_numpart   | Hyphenated word part, letters and digits | beta1
</pre><p>

   这种行为是值得要的，因为它允许对整个复合词和每个部分进行搜索。这里是另一个例子：

</p><pre class="screen">
SELECT alias, description, token FROM ts_debug('http://example.com/stuff/index.html');
  alias   |  description  |            token             
----------+---------------+------------------------------
 protocol | Protocol head | http://
 url      | URL           | example.com/stuff/index.html
 host     | Host          | example.com
 url_path | URL path      | /stuff/index.html
</pre><p>
  </p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="textsearch-features.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="textsearch.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="textsearch-dictionaries.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">12.4. 额外特性 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> 12.6. 词典</td></tr></table></div></body></html>