<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>ecpg</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="app-dropuser.html" title="dropuser" /><link rel="next" href="app-pgbasebackup.html" title="pg_basebackup" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center"><span xmlns="http://www.w3.org/1999/xhtml" class="application">ecpg</span></th></tr><tr><td width="10%" align="left"><a accesskey="p" href="app-dropuser.html" title="dropuser">上一页</a> </td><td width="10%" align="left"><a accesskey="u" href="reference-client.html" title="PostgreSQL 客户端应用">上一级</a></td><th width="60%" align="center">PostgreSQL 客户端应用</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 11.2 手册">起始页</a></td><td width="10%" align="right"> <a accesskey="n" href="app-pgbasebackup.html" title="pg_basebackup">下一页</a></td></tr></table><hr></hr></div><div class="refentry" id="APP-ECPG"><div class="titlepage"></div><a id="id-1.9.4.8.1" class="indexterm"></a><div class="refnamediv"><h2><span class="refentrytitle"><span class="application">ecpg</span></span></h2><p><span class="application">ecpg</span> — 嵌入式 SQL C 预处理器</p></div><div class="refsynopsisdiv"><h2>大纲</h2><div class="cmdsynopsis"><p id="id-1.9.4.8.4.1"><code class="command">ecpg</code> [<em class="replaceable"><code>option</code></em>...]  <em class="replaceable"><code>file</code></em>... </p></div></div><div class="refsect1" id="APP-ECPG-DESCRIPTION"><h2>描述</h2><p>
   <code class="command">ecpg</code>是用于 C 程序的嵌入式 SQL 预处理器。它通过将 SQL 调用替换为特殊函数调用把带有嵌入式 SQL 语句的 C 程序转换为普通 C 代码。输出文件可以被任何 C 编译器工具链处理。
  </p><p>
   <code class="command">ecpg</code>将把命令行中给出的每一个输入文件转换为相应的 C 输出文件。
   输入文件更适宜于使用扩展名<code class="filename">.pgc</code>。
   该扩展名将被替换为<code class="filename">.c</code>来决定输出文件名。
   输出文件名也可以使用<code class="option">-o</code>选项覆盖。
  </p><p>
   这个参考页没有描述嵌入式 SQL 语言。关于该主题请参考<a class="xref" href="ecpg.html" title="第 36 章 ECPG - C 中的嵌入式 SQL">第 36 章</a>。
  </p></div><div class="refsect1" id="id-1.9.4.8.6"><h2>选项</h2><p>
   <code class="command">ecpg</code>接受下列命令行参数：

   </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-c</code></span></dt><dd><p>
       自动从 SQL 代码生成确定的 C 代码。当前，这对<code class="literal">EXEC SQL TYPE</code>起效。
      </p></dd><dt><span class="term"><code class="option">-C <em class="replaceable"><code>mode</code></em></code></span></dt><dd><p>
       设置一个兼容性模式。<em class="replaceable"><code>mode</code></em>可以是<code class="literal">INFORMIX</code>，<code class="literal">INFORMIX_SE</code>或<code class="literal">ORACLE</code>。
      </p></dd><dt><span class="term"><code class="option">-D <em class="replaceable"><code>symbol</code></em></code></span></dt><dd><p>
       定义一个 C 预处理器符号。
      </p></dd><dt><span class="term"><code class="option">-i</code></span></dt><dd><p>
       分析系统也包括文件。
      </p></dd><dt><span class="term"><code class="option">-I <em class="replaceable"><code>directory</code></em></code></span></dt><dd><p>
       指定一个额外的包括路径，用来寻找通过<code class="literal">EXEC SQL INCLUDE</code>包括的文件。默认值是<code class="filename">.</code>（当前目录）、<code class="filename">/usr/local/include</code>、在编译时定义的<span class="productname">PostgreSQL</span>包括目录（默认：<code class="filename">/usr/local/pgsql/include</code>）以及<code class="filename">/usr/include</code>。
      </p></dd><dt><span class="term"><code class="option">-o <em class="replaceable"><code>filename</code></em></code></span></dt><dd><p>
       指定<code class="command">ecpg</code>应该将它的所有输出写到给定的<em class="replaceable"><code>filename</code></em>。
      </p></dd><dt><span class="term"><code class="option">-r <em class="replaceable"><code>option</code></em></code></span></dt><dd><p>
       选择运行时行为。<em class="replaceable"><code>option</code></em>可以是下列之一：
       </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">no_indicator</code></span></dt><dd><p>
         不使用指示器而使用特殊值来表示空值。历史上曾有数据库使用这种方法。
         </p></dd><dt><span class="term"><code class="option">prepare</code></span></dt><dd><p>
         在使用所有语句之前准备它们。libecpg 将保持一个预备语句的缓冲并当语句再被执行时重用该语句。如果缓冲满了，libecpg 将释放最少使用的语句。
         </p></dd><dt><span class="term"><code class="option">questionmarks</code></span></dt><dd><p>
         为兼容性原因允许使用问号作为占位符。在很久以前这被用作默认值。
         </p></dd></dl></div></dd><dt><span class="term"><code class="option">-t</code></span></dt><dd><p>
       打开事务的自动提交。在这种模式下，每一个 SQL 命令会被自动提交，除非它位于一个显式事务块中。在默认模式中，命令只有当<code class="command">EXEC SQL COMMIT</code>被发出时才被提交。
      </p></dd><dt><span class="term"><code class="option">-v</code></span></dt><dd><p>
       打印额外信息，包括版本和“包括”路径。
      </p></dd><dt><span class="term"><code class="option">--version</code></span></dt><dd><p>
       打印<span class="application">ecpg</span>版本并退出。
      </p></dd><dt><span class="term"><code class="option">-?</code><br /></span><span class="term"><code class="option">--help</code></span></dt><dd><p>
       显示关于<span class="application">ecpg</span>命令行参数的帮助并退出。
      </p></dd></dl></div><p>
  </p></div><div class="refsect1" id="id-1.9.4.8.7"><h2>注解</h2><p>
   在编译预处理好的 C 代码文件时，编译器需要能够找到<span class="productname">PostgreSQL</span>包括目录中的<span class="application">ECPG</span>头文件。因此，在调用编译器时，你可能必须使用<code class="option">-I</code>选项（例如，<code class="literal">-I/usr/local/pgsql/include</code>）。
  </p><p>
   使用带有嵌入式 SQL 的 C 代码的程序必须被链接到<code class="filename">libecpg</code>库，例如使用链接器选项<code class="literal">-L/usr/local/pgsql/lib -lecpg</code>。
  </p><p>
   适合于安装的这些目录的值可以使用<a class="xref" href="app-pgconfig.html" title="pg_config"><span class="refentrytitle">pg_config</span></a>找到。
  </p></div><div class="refsect1" id="id-1.9.4.8.8"><h2>例子</h2><p>
   如果你有一个名为<code class="filename">prog1.pgc</code>的嵌入式 SQL C 源文件，你可以使用下列命令序列创建一个可执行程序：
</p><pre class="programlisting">
ecpg prog1.pgc
cc -I/usr/local/pgsql/include -c prog1.c
cc -o prog1 prog1.o -L/usr/local/pgsql/lib -lecpg
</pre></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="app-dropuser.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="reference-client.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="app-pgbasebackup.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top"><span class="application">dropuser</span> </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> pg_basebackup</td></tr></table></div></body></html>