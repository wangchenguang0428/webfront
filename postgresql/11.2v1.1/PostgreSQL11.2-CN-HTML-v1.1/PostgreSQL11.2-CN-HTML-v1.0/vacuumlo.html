<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>vacuumlo</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="oid2name.html" title="oid2name" /><link rel="next" href="contrib-prog-server.html" title="G.2. 服务器应用" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center"><span xmlns="http://www.w3.org/1999/xhtml" class="application">vacuumlo</span></th></tr><tr><td width="10%" align="left"><a accesskey="p" href="oid2name.html" title="oid2name">上一页</a> </td><td width="10%" align="left"><a accesskey="u" href="contrib-prog-client.html" title="G.1. 客户端应用">上一级</a></td><th width="60%" align="center">G.1. 客户端应用</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 11.2 手册">起始页</a></td><td width="10%" align="right"> <a accesskey="n" href="contrib-prog-server.html" title="G.2. 服务器应用">下一页</a></td></tr></table><hr></hr></div><div class="refentry" id="VACUUMLO"><div class="titlepage"></div><a id="id-1.11.8.4.4.1" class="indexterm"></a><div class="refnamediv"><h2><span class="refentrytitle"><span class="application">vacuumlo</span></span></h2><p>vacuumlo — 从<span class="productname">PostgreSQL</span>数据库中移除孤立的大对象</p></div><div class="refsynopsisdiv"><h2>大纲</h2><div class="cmdsynopsis"><p id="id-1.11.8.4.4.4.1"><code class="command">vacuumlo</code> [<em class="replaceable"><code>option</code></em>...]  <em class="replaceable"><code>dbname</code></em>... </p></div></div><div class="refsect1" id="id-1.11.8.4.4.5"><h2>描述</h2><p>
  <span class="application">vacuumlo</span>是一个从<span class="productname">PostgreSQL</span>数据库中移除<span class="quote">“<span class="quote">孤立</span>”</span>大对象的简单使用程序。一个孤立的大对象（LO）是指其OID不出现在数据中任何<code class="type">oid</code>或<code class="type">lo</code>数据列中的LO。
 </p><p>
  如果你使用该程序，你也许还会对<a class="xref" href="lo.html" title="F.20. lo">lo</a>模块中的<code class="function">lo_manage</code>触发器感兴趣。<code class="function">lo_manage</code>对于避免创建孤立LO有用处。
 </p><p>
   在命令行中提到的所有数据库都将被处理。
  </p></div><div class="refsect1" id="id-1.11.8.4.4.6"><h2>选项</h2><p>
   <span class="application">vacuumlo</span>接受下列命令行参数：

  </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-l</code> <em class="replaceable"><code>limit</code></em></span></dt><dd><p>
      在每一个事务中移除不超过<em class="replaceable"><code>limit</code></em>个大对象（默认值为1000）。因为移除每一个LO时服务器都将要求一个锁，所以在一个事务中移除过多的LO会有超过<a class="xref" href="runtime-config-locks.html#GUC-MAX-LOCKS-PER-TRANSACTION">max_locks_per_transaction</a>的风险。如果你想在一个事务中就完成所有的移除工作，请将这个限制设置为0。
     </p></dd><dt><span class="term"><code class="option">-n</code></span></dt><dd><p>不移除任何东西，只是显示将会做什么。</p></dd><dt><span class="term"><code class="option">-v</code></span></dt><dd><p>写一些进度消息。</p></dd><dt><span class="term"><code class="option">-V</code><br /></span><span class="term"><code class="option">--version</code></span></dt><dd><p>
      打印<span class="application">vacuumlo</span>的版本并退出。
     </p></dd><dt><span class="term"><code class="option">-?</code><br /></span><span class="term"><code class="option">--help</code></span></dt><dd><p>
      显示关于<span class="application">vacuumlo</span>的命令行参数，并且退出。
     </p></dd></dl></div><p>
  </p><p>
   <span class="application">vacuumlo</span>也接受下列命令行参数用于连接：

  </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="option">-h</code> <em class="replaceable"><code>hostname</code></em></span></dt><dd><p>数据库服务器的主机名。</p></dd><dt><span class="term"><code class="option">-p</code> <em class="replaceable"><code>port</code></em></span></dt><dd><p>数据库服务器的端口。</p></dd><dt><span class="term"><code class="option">-U</code> <em class="replaceable"><code>username</code></em></span></dt><dd><p>用于连接的用户名。</p></dd><dt><span class="term"><code class="option">-w</code><br /></span><span class="term"><code class="option">--no-password</code></span></dt><dd><p>
      不要发出一个口令提示。如果服务器要求口令认证并且没有其他方式可以提供一个口令（例如一个<code class="filename">.pgpass</code>文件），连接尝试将会失败。这个选项可用于批处理任务以及脚本，因为在这些情况下不会有用户输入口令。
     </p></dd><dt><span class="term"><code class="option">-W</code></span></dt><dd><p>
      强制<span class="application">vacuumlo</span>在连接到数据库之前提示要求一个口令。
     </p><p>
      这个选项不是不可缺少的，因为如果服务器要求口令认证，<span class="application">vacuumlo</span>会自动提示要求一个口令。但是，<span class="application">vacuumlo</span>将会浪费一次连接尝试来了解到服务器需要口令。在某些情况，值得用<code class="option">-W</code>来避免这种额外的连接尝试。
     </p></dd></dl></div><p>
  </p></div><div class="refsect1" id="id-1.11.8.4.4.7"><h2>说明</h2><p>
   <span class="application">vacuumlo</span>按照下列方法工作：首先<span class="application">vacuumlo</span>建立一个临时表，其中包含所选择数据库中所有大对象的OID。然后它会扫描数据库中所有类型为<code class="type">oid</code>或<code class="type">lo</code>的列，并且从临时表中移除在这些列中出现过的OID（注意：只有类型为这些名字的才被考虑，特别的，在这些类型之上的域是不被考虑的）。临时表中剩下的项就标识了鼓励LO。它们将被移除。
  </p></div><div class="refsect1" id="id-1.11.8.4.4.8"><h2>作者</h2><p>
   Peter Mount <code class="email">&lt;<a class="email" href="mailto:peter@retep.org.uk">peter@retep.org.uk</a>&gt;</code>
  </p></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="oid2name.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="contrib-prog-client.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="contrib-prog-server.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">oid2name </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> G.2. 服务器应用</td></tr></table></div></body></html>