<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>第 53 章 前端/后端协议</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="view-pg-views.html" title="52.93. pg_views" /><link rel="next" href="protocol-overview.html" title="53.1. 概述" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">第 53 章 前端/后端协议</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="view-pg-views.html" title="52.93. pg_views">上一页</a> </td><td width="10%" align="left"><a accesskey="u" href="internals.html" title="部分 VII. 内部">上一级</a></td><th width="60%" align="center">部分 VII. 内部</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 11.2 手册">起始页</a></td><td width="10%" align="right"> <a accesskey="n" href="protocol-overview.html" title="53.1. 概述">下一页</a></td></tr></table><hr></hr></div><div class="chapter" id="PROTOCOL"><div class="titlepage"><div><div><h2 class="title">第 53 章 前端/后端协议</h2></div></div></div><div class="toc"><p><strong>目录</strong></p><dl class="toc"><dt><span class="sect1"><a href="protocol-overview.html">53.1. 概述</a></span></dt><dd><dl><dt><span class="sect2"><a href="protocol-overview.html#PROTOCOL-MESSAGE-CONCEPTS">53.1.1. 消息概貌</a></span></dt><dt><span class="sect2"><a href="protocol-overview.html#PROTOCOL-QUERY-CONCEPTS">53.1.2. 扩展查询概述</a></span></dt><dt><span class="sect2"><a href="protocol-overview.html#PROTOCOL-FORMAT-CODES">53.1.3.  格式和格式代码</a></span></dt></dl></dd><dt><span class="sect1"><a href="protocol-flow.html">53.2. 消息流</a></span></dt><dd><dl><dt><span class="sect2"><a href="protocol-flow.html#id-1.10.5.7.3">53.2.1. 启动</a></span></dt><dt><span class="sect2"><a href="protocol-flow.html#id-1.10.5.7.4">53.2.2.  简单查询</a></span></dt><dt><span class="sect2"><a href="protocol-flow.html#PROTOCOL-FLOW-EXT-QUERY">53.2.3. 扩展查询</a></span></dt><dt><span class="sect2"><a href="protocol-flow.html#id-1.10.5.7.6">53.2.4.  函数调用</a></span></dt><dt><span class="sect2"><a href="protocol-flow.html#PROTOCOL-COPY">53.2.5. COPY操作</a></span></dt><dt><span class="sect2"><a href="protocol-flow.html#PROTOCOL-ASYNC">53.2.6.  异步操作</a></span></dt><dt><span class="sect2"><a href="protocol-flow.html#id-1.10.5.7.9">53.2.7.  取消正在处理的请求</a></span></dt><dt><span class="sect2"><a href="protocol-flow.html#id-1.10.5.7.10">53.2.8. 终止</a></span></dt><dt><span class="sect2"><a href="protocol-flow.html#id-1.10.5.7.11">53.2.9. <acronym class="acronym">SSL</acronym>会话加密</a></span></dt></dl></dd><dt><span class="sect1"><a href="sasl-authentication.html">53.3. SASL认证</a></span></dt><dd><dl><dt><span class="sect2"><a href="sasl-authentication.html#SASL-SCRAM-SHA-256">53.3.1. SCRAM-SHA-256认证</a></span></dt></dl></dd><dt><span class="sect1"><a href="protocol-replication.html">53.4. 流复制协议</a></span></dt><dt><span class="sect1"><a href="protocol-logical-replication.html">53.5. 逻辑流复制协议</a></span></dt><dd><dl><dt><span class="sect2"><a href="protocol-logical-replication.html#PROTOCOL-LOGICAL-REPLICATION-PARAMS">53.5.1. 逻辑流复制参数</a></span></dt><dt><span class="sect2"><a href="protocol-logical-replication.html#PROTOCOL-LOGICAL-MESSAGES">53.5.2. 逻辑复制协议消息</a></span></dt><dt><span class="sect2"><a href="protocol-logical-replication.html#PROTOCOL-LOGICAL-MESSAGES-FLOW">53.5.3. 逻辑复制协议的消息流</a></span></dt></dl></dd><dt><span class="sect1"><a href="protocol-message-types.html">53.6. 消息数据类型</a></span></dt><dt><span class="sect1"><a href="protocol-message-formats.html">53.7. 消息格式</a></span></dt><dt><span class="sect1"><a href="protocol-error-fields.html">53.8. 错误和通知消息域</a></span></dt><dt><span class="sect1"><a href="protocol-logicalrep-message-formats.html">53.9. 逻辑复制消息格式</a></span></dt><dt><span class="sect1"><a href="protocol-changes.html">53.10. 自协议2.0以来的变化总结</a></span></dt></dl></div><a id="id-1.10.5.2" class="indexterm"></a><p>
  <span class="productname">PostgreSQL</span>使用一种基于消息的协议用于前端和后端（服务器和客户机）之间通讯。该协议是在<acronym class="acronym">TCP/IP</acronym>和Unix 域套接字上实现的。端口号 5432 已经在IANA 注册为支持这种协议的服务器的常用端口，但实际上任何非特权端口号都可以使用。
 </p><p>
  这份文档描述了版本3.0的协议，它在<span class="productname">PostgreSQL</span>版本 7.4 和以后的版本中实现。对于以前版本协议的描述，请参考以前版本的<span class="productname">PostgreSQL</span>文档。一台服务器能够支持多种协议版本。初始的启动请求消息告诉服务器客户端尝试使用哪个协议版本。如果客户端请求的主版本不被服务器支持，连接将被拒绝（例如，如果客户端请求的协议版本是4.0就会发生这种情况，因为在写作这份文档时，4.0根本还不存在）。如果客户端请求的次版本不被服务器支持（例如客户端请求版本3.1，但服务器仅支持3.0），服务器可能会拒绝该连接或者用一个包含它支持的最高次协议版本的NegotiateProtocolVersion消息进行响应。然后客户端可以选择使用指定的协议版本继续连接或者中止连接。
 </p><p>
   为了可以有效地为多个客户端提供服务，服务器为每个客户端派生一个新的<span class="quote">“<span class="quote">后端</span>”</span>进程。 在目前的实现里，在检测到新来的连接请求后，马上创建一个新的子进程。 不过，这些是对协议透明的。对于协议而言，术语<span class="quote">“<span class="quote">后端</span>”</span>和<span class="quote">“<span class="quote">服务器</span>”</span>是可以互换的； 类似的还有<span class="quote">“<span class="quote">前端</span>”</span>和<span class="quote">“<span class="quote">客户端</span>”</span>也是可以互换的。
  </p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="view-pg-views.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="internals.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="protocol-overview.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">52.93. <code class="structname">pg_views</code> </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> 53.1. 概述</td></tr></table></div></body></html>