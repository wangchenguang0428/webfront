<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>50.1. 一个查询的路径</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="overview.html" title="第 50 章 PostgreSQL内部概述" /><link rel="next" href="connect-estab.html" title="50.2. 连接如何建立" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">50.1. 一个查询的路径</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="overview.html" title="第 50 章 PostgreSQL内部概述">上一页</a> </td><td width="10%" align="left"><a accesskey="u" href="overview.html" title="第 50 章 PostgreSQL内部概述">上一级</a></td><th width="60%" align="center">第 50 章 PostgreSQL内部概述</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 12.2 手册">起始页</a></td><td width="10%" align="right"> <a accesskey="n" href="connect-estab.html" title="50.2. 连接如何建立">下一页</a></td></tr></table><hr></hr></div><div class="sect1" id="QUERY-PATH"><div class="titlepage"><div><div><h2 class="title" style="clear: both">50.1. 一个查询的路径</h2></div></div></div><p>
    这里我们将介绍为了获取结果，一个查询将会经历那些阶段。
   </p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>
      一个由应用程序到<span class="productname">PostgreSQL</span>服务器的连接必须被建立。应用程序传递一个查询给服务器并等待接收由服务器传回的结果。
     </p></li><li class="step"><p>
      <em class="firstterm">分析阶段</em>对由应用程序传递的查询进行语法检查，并创建一个<em class="firstterm">查询树</em>。
     </p></li><li class="step"><p>
      <em class="firstterm">重写系统</em>得到分析阶段创建的查询树，并查找可以应用到该查询树的任何<em class="firstterm">规则</em>（存储在<em class="firstterm">系统目录</em>中）。对找到的规则，它会执行<em class="firstterm">规则体</em>中给定的转换。
     </p><p>
      重写系统的一个应用是实现<em class="firstterm">视图</em>。不论何时发生一个视图（即一个<em class="firstterm">虚拟表</em>）上的查询，重写系统将用户查询重写为一个访问<em class="firstterm">视图定义</em>中给定的<em class="firstterm">基本表</em>的查询来替代。
     </p></li><li class="step"><p>
      <em class="firstterm">规划器/优化器</em>接手（重写过的）查询树并创建一个将被作为<em class="firstterm">执行器</em>输入的<em class="firstterm">查询计划</em>。
     </p><p>
      它会先创建所有可能导向相同结果的<em class="firstterm">路径</em>。例如，如果在一个被扫描的关系上有一个索引，则有两条可供扫描的路径。其中之一是一个简单的顺序扫描，而另一个则是使用索引。接下来执行每条路径所需的代价被估算出来并且代价最低的路径将被选中。代价最低的路径将被扩展成一个完整的计划可供执行器使用。
     </p></li><li class="step"><p>
      执行器递归地逐步通过<em class="firstterm">计划树</em>并按照计划表述的方式获取行。执行器在扫描关系时会使用<em class="firstterm">存储系统</em>、执行<em class="firstterm">排序</em>和<em class="firstterm">连接</em>、估算<em class="firstterm">条件</em>并最后归还得到的行。
     </p></li></ol></div><p>
    在下面的小节中我们将覆盖上述列出的每一项的详细内容，以便更好地理解<span class="productname">PostgreSQL</span>的内部控制和数据结构。
   </p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="overview.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="overview.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="connect-estab.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">第 50 章 PostgreSQL内部概述 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> 50.2. 连接如何建立</td></tr></table></div></body></html>