<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>18.8. 加密选项</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="preventing-server-spoofing.html" title="18.7. 阻止服务器欺骗" /><link rel="next" href="ssl-tcp.html" title="18.9. 用 SSL 进行安全的 TCP/IP 连接" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">18.8. 加密选项</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="preventing-server-spoofing.html" title="18.7. 阻止服务器欺骗">上一页</a> </td><td width="10%" align="left"><a accesskey="u" href="runtime.html" title="第 18 章 服务器设置和操作">上一级</a></td><th width="60%" align="center">第 18 章 服务器设置和操作</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 12.2 手册">起始页</a></td><td width="10%" align="right"> <a accesskey="n" href="ssl-tcp.html" title="18.9. 用 SSL 进行安全的 TCP/IP 连接">下一页</a></td></tr></table><hr></hr></div><div class="sect1" id="ENCRYPTION-OPTIONS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">18.8. 加密选项</h2></div></div></div><a id="id-1.6.5.10.2" class="indexterm"></a><p>
   <span class="productname">PostgreSQL</span>提供了几个不同级别的加密， 并且在保护数据不会因为数据库服务器偷窃、不道德的管理员、不安全网络等因素而泄漏方面 提供很高的灵活性。加密可能也是保护一些诸如医疗记录或财务交易等敏感数据所要求的。
  </p><div class="variablelist"><dl class="variablelist"><dt><span class="term">口令加密</span></dt><dd><p>
     数据库用户的口令都是以哈希(取决于<a class="xref" href="runtime-config-connection.html#GUC-PASSWORD-ENCRYPTION">password_encryption</a>配置)的方式存储， 所以管理员不能限定实际的口令赋予用户。如果 SCRAM 或者 MD5 加密算法被用于客户端认证， 那么未加密的口令甚至都不可能出现在服务器上，因为客户端在通过网络发送口令之前，就已经加密过。推荐使用SCRAM，因为它是互联网标准而且相比于PostgreSQL特定的MD5认证协议更安全。
    </p></dd><dt><span class="term">指定列加密</span></dt><dd><p>
     <a class="xref" href="pgcrypto.html" title="F.25. pgcrypto">pgcrypto</a>模块允许对特定域进行加密存储。这个功能只对某些敏感数据有用。 客户端提供解密的密钥，然后数据在服务器端解密并发送给客户端。
    </p><p>
     在数据被解密和在服务器与客户端之间传递时，解密数据和解密密钥将会在服务器端存在短暂的一段时间。 这就给那些能完全访问数据库服务器的人提供了一个短暂的截获密钥和数据的时间，例如系统管理员。
    </p></dd><dt><span class="term">数据分区加密</span></dt><dd><p>
     存储加密可以在文件系统层面或者块层面上执行。Linux 文件系统加密
     选项包括 eCryptfs 和 EncFS，而 FreeBSD 使用 PEFS。快层面或者全
     盘加密选项包括 Linux 上的 dm-crypt + LUKS 以及 FreeBSD 上的
     GEOM 模块 geli 及 gbde。很多其他操作系统也支持这个功能，包括
     Windows。
    </p><p>
     这个机制避免了在整个计算机或者驱动器被盗的情况下， 未加密的数据被从驱动器中读取。它无法防止在文件系统被挂 载时的攻击，因为在挂载之后，操作系统提供数据的解密视图。不过，要想挂载该文件系统，你需要有一些方法把加密密钥传递给操作 系统，并且有时候这个密钥就存储在挂载该磁盘的主机上的某处。
    </p></dd><dt><span class="term">跨网络加密数据</span></dt><dd><p>
      SSL 连接加密所有跨网络发送的数据：口令、查询以及返回的数据。<code class="filename">pg_hba.conf</code>文件允许管理员指定哪些主机可以使用 非加密连接（<code class="literal">host</code>），以及哪些主机需要使用 SSL 加密的连接（<code class="literal">hostssl</code>）。
      客户端还可以指定它们只通过 SSL 连接到服务器。
     </p><p>
      GSSAPI 加密的连接加密通过网络发送的所有数据，包括查询和返回的数据。（不会在网络中发送密码。）
      <code class="filename">pg_hba.conf</code> 文件允许管理员指定哪些主机可以使用非加密连接 (<code class="literal">host</code>) 和哪些主机需要 GSSAPI-加密连接(<code class="literal">hostgssenc</code>。 
      此外，客户端还可以指定它们仅在GSSAPI-加密的连接上来连接服务器(<code class="literal">gssencmode=require</code>)。
     </p><p>
      <span class="application">Stunnel</span> 或 <span class="application">SSH</span> 也能够被用于加密传输。
     </p></dd><dt><span class="term">SSL 主机认证</span></dt><dd><p>
     客户端和主机都可以提供 SSL 证书给对方。这在两边都需要一些额外的配置， 但是这种方式提供了比仅使用口令更强的身份验证。 它避免一个计算机伪装成服务器，这个时长只要足够读取客户端发送的口令就行了。它还避免了 <span class="quote">“<span class="quote">中间人</span>”</span>攻击，在其中有一台计算机处于客户端和服务器之间并伪装成服务器读取和传递两者之间的所有数据。
    </p></dd><dt><span class="term">客户端加密</span></dt><dd><p>
     如果服务器所在机器的系统管理员是不可信的，那么客户端加密数据也是必要的。在这种情况下，未加密的数据从来不会在数据库服务器上出现。数据在发送给服务器之前加密，而数据库结果在能使用之前必须在客户端上解密。
    </p></dd></dl></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="preventing-server-spoofing.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="runtime.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="ssl-tcp.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">18.7. 阻止服务器欺骗 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> 18.9. 用 SSL 进行安全的 TCP/IP 连接</td></tr></table></div></body></html>