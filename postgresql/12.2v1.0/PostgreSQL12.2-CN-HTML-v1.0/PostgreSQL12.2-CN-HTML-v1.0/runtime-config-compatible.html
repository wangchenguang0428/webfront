<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>19.13. 版本和平台兼容性</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="runtime-config-locks.html" title="19.12. 锁管理" /><link rel="next" href="runtime-config-error-handling.html" title="19.14. 错误处理" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">19.13. 版本和平台兼容性</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="runtime-config-locks.html" title="19.12. 锁管理">上一页</a> </td><td width="10%" align="left"><a accesskey="u" href="runtime-config.html" title="第 19 章 服务器配置">上一级</a></td><th width="60%" align="center">第 19 章 服务器配置</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 12.2 手册">起始页</a></td><td width="10%" align="right"> <a accesskey="n" href="runtime-config-error-handling.html" title="19.14. 错误处理">下一页</a></td></tr></table><hr></hr></div><div class="sect1" id="RUNTIME-CONFIG-COMPATIBLE"><div class="titlepage"><div><div><h2 class="title" style="clear: both">19.13. 版本和平台兼容性</h2></div></div></div><div class="toc"><dl class="toc"><dt><span class="sect2"><a href="runtime-config-compatible.html#RUNTIME-CONFIG-COMPATIBLE-VERSION">19.13.1. 以前的 PostgreSQL 版本</a></span></dt><dt><span class="sect2"><a href="runtime-config-compatible.html#RUNTIME-CONFIG-COMPATIBLE-CLIENTS">19.13.2. 平台和客户端兼容性</a></span></dt></dl></div><div class="sect2" id="RUNTIME-CONFIG-COMPATIBLE-VERSION"><div class="titlepage"><div><div><h3 class="title">19.13.1. 以前的 PostgreSQL 版本</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="GUC-ARRAY-NULLS"><span class="term"><code class="varname">array_nulls</code> (<code class="type">boolean</code>)
      <a id="id-1.6.6.16.2.2.1.1.3" class="indexterm"></a>
      </span></dt><dd><p>
        这个参数控制数组输入解析器是否把未用引号的<code class="literal">NULL</code>识别为一个空数组元素。默认为<code class="literal">on</code>，允许输入包含空值的数组值。但是<span class="productname">PostgreSQL</span> 8.2 之前的版本不支持数组中的空值，并且因此将把<code class="literal">NULL</code>当作指定一个值为字符串<span class="quote">“<span class="quote">NULL</span>”</span>的正常数组元素。对于那些要求旧行为的应用的向后兼容性，这个变量可以被设置为<code class="literal">off</code>。
       </p><p>
        注意即使这个变量为<code class="literal">off</code>也能够创建包含空值的数组值。
       </p></dd><dt id="GUC-BACKSLASH-QUOTE"><span class="term"><code class="varname">backslash_quote</code> (<code class="type">enum</code>)
      <a id="id-1.6.6.16.2.2.2.1.3" class="indexterm"></a>
      <a id="id-1.6.6.16.2.2.2.1.4" class="indexterm"></a>
      </span></dt><dd><p>
        这个参数控制字符串文本中的单引号是否能够用<code class="literal">\'</code>来表示。首选的 SQL 标准的方法是将其双写（<code class="literal">''</code>），但是<span class="productname">PostgreSQL</span>在历史上也接受<code class="literal">\'</code>。不过使用<code class="literal">\'</code>容易导致安全风险，因为在某些客户端字符集编码中，有多字节字符的最后一个字节在数值上等价于 ASCII 的<code class="literal">\'</code>。如果客户端代码没有做到正确转义，那么将会导致 SQL 注入攻击。如果服务器拒绝看起来带有被反斜线转义的单引号的查询，那么就可以避免这种风险。<code class="varname">backslash_quote</code>的可用值是<code class="literal">on</code>（总是允许<code class="literal">\'</code>）、<code class="literal">off</code>（总是拒绝）以及<code class="literal">safe_encoding</code>（只有客户端编码不允许在多字节字符中存在 ASCII <code class="literal">\</code>时允许）。<code class="literal">safe_encoding</code>是默认设置。
       </p><p>
        注意在符合标准的字符串文本中，<code class="literal">\</code>就表示<code class="literal">\</code>。这个参数只影响不符合标准的文本的处理，包括转义字符串语法（<code class="literal">E'...'</code>）。
       </p></dd><dt id="GUC-ESCAPE-STRING-WARNING"><span class="term"><code class="varname">escape_string_warning</code> (<code class="type">boolean</code>)
      <a id="id-1.6.6.16.2.2.3.1.3" class="indexterm"></a>
      <a id="id-1.6.6.16.2.2.3.1.4" class="indexterm"></a>
      </span></dt><dd><p>
        打开时，如果在普通字符串文本中（<code class="literal">'...'</code>语法）出现了 一个反斜线（<code class="literal">\</code>）并且<code class="varname">standard_conforming_strings</code>为关闭，那么就会发出一个警告。默认值是<code class="literal">on</code>。
       </p><p>
        希望使用反斜线作为转义符的应用应该被修改来使用转义字符串语法（<code class="literal">E'...'</code>），因为在 SQL 标准中普通字符串的默认行为是将反斜线视作一个普通字符。这个变量可以被启用来帮助定位需要被更改的代码。
       </p></dd><dt id="GUC-LO-COMPAT-PRIVILEGES"><span class="term"><code class="varname">lo_compat_privileges</code> (<code class="type">boolean</code>)
      <a id="id-1.6.6.16.2.2.4.1.3" class="indexterm"></a>
      </span></dt><dd><p>
        在<span class="productname">PostgreSQL</span> 9.0 之前，大对象不具有访问特权并且因此总是所有用户可读可写的。为了和以前的版本兼容，把这个变量设置为<code class="literal">on</code>可以禁用这种新的特权检查。默认是<code class="literal">off</code>。只有超级用户可以更改这个设置。
       </p><p>
        设置这个参数不会禁用所有与大对象相关的安全检查 — 除了那些在<span class="productname">PostgreSQL</span> 9.0中已经修改了的默认行为。
       </p></dd><dt id="GUC-OPERATOR-PRECEDENCE-WARNING"><span class="term"><code class="varname">operator_precedence_warning</code> (<code class="type">boolean</code>)
      <a id="id-1.6.6.16.2.2.5.1.3" class="indexterm"></a>
      </span></dt><dd><p>
        当开启时，对于任何从<span class="productname">PostgreSQL</span> 9.4 以来由于操作符优先级
        变化而导致含义改变的结构，解析器将发出一个警告。这有助于审计应用，已检查是否
        优先级变化破坏了什么东西。但是它的本意并不是希望在生产环境中保持打开，因为它
        会对某些完全合法、兼容标准的 SQL 代码发出警告。默认为<code class="literal">off</code>。
       </p><p>
        更多信息请见<a class="xref" href="sql-syntax-lexical.html#SQL-PRECEDENCE" title="4.1.6. 操作符优先级">第 4.1.6 节</a>。
       </p></dd><dt id="GUC-QUOTE-ALL-IDENTIFIERS"><span class="term"><code class="varname">quote_all_identifiers</code> (<code class="type">boolean</code>)
      <a id="id-1.6.6.16.2.2.6.1.3" class="indexterm"></a>
      </span></dt><dd><p>
        当数据库产生 SQL 时，强制所有标识符被引号包围，即使它们（当前）不是关键字。这将影响<code class="command">EXPLAIN</code>的输出以及<code class="function">pg_get_viewdef</code>等函数的结果。另请参阅<a class="xref" href="app-pgdump.html" title="pg_dump"><span class="refentrytitle">pg_dump</span></a>和<a class="xref" href="app-pg-dumpall.html" title="pg_dumpall"><span class="refentrytitle"><span class="application">pg_dumpall</span></span></a>的<code class="option">--quote-all-identifiers</code>选项。
       </p></dd><dt id="GUC-STANDARD-CONFORMING-STRINGS"><span class="term"><code class="varname">standard_conforming_strings</code> (<code class="type">boolean</code>)
      <a id="id-1.6.6.16.2.2.7.1.3" class="indexterm"></a>
      <a id="id-1.6.6.16.2.2.7.1.4" class="indexterm"></a>
      </span></dt><dd><p>
        控制普通字符串文本（<code class="literal">'...'</code>）是否按照 SQL 标准把反斜线当普通文本。从<span class="productname">PostgreSQL</span> 9.1 开始，默认值为<code class="literal">on</code>（之前的发行中默认值为<code class="literal">off</code>）。应用可以检查这个参数来判断字符串文本如何被处理。这个参数的存在也可以被当做转义字符串语法（<code class="literal">E'...'</code>）被支持的标志。如果一个应用希望反斜线被当做转义字符，应该使用转义字符串语法（<a class="xref" href="sql-syntax-lexical.html#SQL-SYNTAX-STRINGS-ESCAPE" title="4.1.2.2. C风格转义的字符串常量">第 4.1.2.2 节</a>）。
       </p></dd><dt id="GUC-SYNCHRONIZE-SEQSCANS"><span class="term"><code class="varname">synchronize_seqscans</code> (<code class="type">boolean</code>)
      <a id="id-1.6.6.16.2.2.8.1.3" class="indexterm"></a>
      </span></dt><dd><p>
        它允许对大型表的顺序扫描与其他扫描同步，因此并发扫描可以在几乎相同的时刻读取相同的块，这样可以分担 I/O 负载。当启用这个参数时，一个扫描可能会从表的中间开始并且之后<span class="quote">“<span class="quote">绕回</span>”</span>到开头以覆盖所有的行，这样可以与已在进行中的扫描活动同步。对于没有<code class="literal">ORDER BY</code>子句的查询来，这样的扫描会在返回行的顺序中造成不可预料的改变。将这个参数设置为<code class="literal">off</code>以保证 8.3 之前的行为（顺序扫描总是从表的起始处开始）。默认值是<code class="literal">on</code>。
       </p></dd></dl></div></div><div class="sect2" id="RUNTIME-CONFIG-COMPATIBLE-CLIENTS"><div class="titlepage"><div><div><h3 class="title">19.13.2. 平台和客户端兼容性</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="GUC-TRANSFORM-NULL-EQUALS"><span class="term"><code class="varname">transform_null_equals</code> (<code class="type">boolean</code>)
      <a id="id-1.6.6.16.3.2.1.1.3" class="indexterm"></a>
      <a id="id-1.6.6.16.3.2.1.1.4" class="indexterm"></a>
      </span></dt><dd><p>
        当打开时，形为<code class="literal"><em class="replaceable"><code>expr</code></em> = NULL</code>（或<code class="literal">NULL =  <em class="replaceable"><code>expr</code></em></code>）的表达式将被当做<code class="literal"><em class="replaceable"><code>expr</code></em> IS NULL</code>， 也就是说，如果<em class="replaceable"><code>expr</code></em>得出空值值则返回真，否则返回假。正确的 SQL 标准兼容的<code class="literal"><em class="replaceable"><code>expr</code></em> = NULL</code>行为总是返回空（未知）。因此这个参数默认为<code class="literal">off</code>。
       </p><p>
        不过，在<span class="productname">Microsoft Access</span>里的过滤表单生成的查询似乎使用<code class="literal"><em class="replaceable"><code>expr</code></em> = NULL</code>来测试空值，因此，如果你使用这个接口访问数据库，你可能想把这个选项打开。因为<code class="literal"><em class="replaceable"><code>expr</code></em> = NULL</code>形式的表达式总是返回空值（使用 SQL 标准解释）。它们不是非常有用并且在普通应用中也不常见，在应用中也不常见，因此这个选项实际上没有什么危害。但是新用户常常对涉及 空值的表达式的语义上感到困惑，因此这个选项默认为关闭。
       </p><p>
        请注意这个选项只影响<code class="literal">= NULL</code>形式，而不影响其它比较操作符或者其它与一些涉及等值操作符的表达式在计算上等效的其他表达式（例如<code class="literal">IN</code>）。因此，这个选项不是劣质程序的一般修复。
       </p><p>
        相关信息请见<a class="xref" href="functions-comparison.html" title="9.2. 比较函数和操作符">第 9.2 节</a>。
       </p></dd></dl></div></div></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="runtime-config-locks.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="runtime-config.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="runtime-config-error-handling.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">19.12. 锁管理 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> 19.14. 错误处理</td></tr></table></div></body></html>