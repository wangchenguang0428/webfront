<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>20.4. 信任认证</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="auth-methods.html" title="20.3. 认证方法" /><link rel="next" href="auth-password.html" title="20.5. 口令认证" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">20.4. 信任认证</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="auth-methods.html" title="20.3. 认证方法">上一页</a> </td><td width="10%" align="left"><a accesskey="u" href="client-authentication.html" title="第 20 章 客户端认证">上一级</a></td><th width="60%" align="center">第 20 章 客户端认证</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 12.2 手册">起始页</a></td><td width="10%" align="right"> <a accesskey="n" href="auth-password.html" title="20.5. 口令认证">下一页</a></td></tr></table><hr></hr></div><div class="sect1" id="AUTH-TRUST"><div class="titlepage"><div><div><h2 class="title" style="clear: both">20.4. 信任认证</h2></div></div></div><p>
    当<code class="literal">trust</code>认证被指定时，<span class="productname">PostgreSQL</span>假设任何可以连接到服务器的人都被授权使用他们指定的任何数据库用户名（即使是超级用户）访问数据库。当然，在<code class="literal">database</code>和 <code class="literal">user</code>列中设置的限制仍然适用。只有当在操作系统层对进入服务器的连接有足够保护时，才应该使用这种方法。
   </p><p>
    <code class="literal">trust</code>认证对于单用户工作站的本地连接是非常合适和方便的。通常它本身<span class="emphasis"><em>不</em></span>适用于一台多用户机器。不过，只要你利用文件系统权限限制了对服务器的 Unix 域套接字文件的访问，即使在多用户机器上，你也可以使用<code class="literal">trust</code>。 要做这些限制，你可以设置<a class="xref" href="runtime-config-connection.html" title="19.3. 连接和认证">第 19.3 节</a>中描述的<code class="varname">unix_socket_permissions</code>配置参数（可能还有<code class="varname">unix_socket_group</code>）。 或者你可以设置<code class="varname">unix_socket_directories</code>配置参数来把 Unix 域套接字文件放在一个经过恰当限制的目录中。
   </p><p>
    设置文件系统权限只能有助于 Unix 套接字连接。本地 TCP/IP 连接不会被文件系统权限限制。因此，如果你想利用文件系统权限来控制本地安全，那么从<code class="filename">pg_hba.conf</code>中移除<code class="literal">host ... 127.0.0.1 ...</code>行，或者把它改为一个非<code class="literal">trust</code>认证方法。
   </p><p>
    如果通过指定<code class="literal">trust</code>的<code class="filename">pg_hba.conf</code>行让你信任每一个被允许连接到服务器的机器上的用户，<code class="literal">trust</code>认证只适合 TCP/IP 连接。为任何不是来自<span class="systemitem">localhost</span>（127.0.0.1）的 TCP/IP 连接使用<code class="literal">trust</code>很少是合理的。
   </p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="auth-methods.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="client-authentication.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="auth-password.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">20.3. 认证方法 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> 20.5. 口令认证</td></tr></table></div></body></html>