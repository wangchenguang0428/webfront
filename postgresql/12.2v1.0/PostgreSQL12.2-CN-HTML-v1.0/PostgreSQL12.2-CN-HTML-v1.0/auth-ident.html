<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>20.8. Ident 认证</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="sspi-auth.html" title="20.7. SSPI 认证" /><link rel="next" href="auth-peer.html" title="20.9. Peer 认证" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">20.8. Ident 认证</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="sspi-auth.html" title="20.7. SSPI 认证">上一页</a> </td><td width="10%" align="left"><a accesskey="u" href="client-authentication.html" title="第 20 章 客户端认证">上一级</a></td><th width="60%" align="center">第 20 章 客户端认证</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 12.2 手册">起始页</a></td><td width="10%" align="right"> <a accesskey="n" href="auth-peer.html" title="20.9. Peer 认证">下一页</a></td></tr></table><hr></hr></div><div class="sect1" id="AUTH-IDENT"><div class="titlepage"><div><div><h2 class="title" style="clear: both">20.8. Ident 认证</h2></div></div></div><a id="id-1.6.7.15.2" class="indexterm"></a><p>
    ident 认证方法通过从一个 ident 服务器获得客户端的操作系统用户名并且用它作为被允许的数据库用户名（和可选的用户名映射）来工作。它只在 TCP/IP 连接上支持。
   </p><div class="note"><h3 class="title">注意</h3><p>
     当为一个本地（非 TCP/IP）连接指定 ident 时，将实际使用 peer 认证（见<a class="xref" href="auth-peer.html" title="20.9. Peer 认证">第 20.9 节</a>）。
    </p></div><p>
    下列被支持的配置选项用于<span class="productname">ident</span>：
    </p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">map</code></span></dt><dd><p>
        允许系统和数据库用户名之间的映射。详见<a class="xref" href="auth-username-maps.html" title="20.2. 用户名映射">第 20.2 节</a>。
       </p></dd></dl></div><p>
   </p><p>
    <span class="quote">“<span class="quote">Identification Protocol（标识协议）</span>”</span>在 RFC 1413 中描述。实际上每个类 Unix 操作系统都带着一个默认监听 TCP 113 端口的 ident 服务器。ident 服务器的基本功能是回答类似这样的问题：<span class="quote">“<span class="quote">哪个用户从你的端口<em class="replaceable"><code>X</code></em>发起了连接并且连到了我的端口<em class="replaceable"><code>Y</code></em>？</span>”</span> 。因为当一个物理连接被建立后，<span class="productname">PostgreSQL</span>既知道<em class="replaceable"><code>X</code></em>也知道<em class="replaceable"><code>Y</code></em>， 所以它可以询问尝试连接的客户端主机上的 ident 服务器并且在理论上可以判断任意给定连接的操作系统用户。
   </p><p>
    这个过程的缺点是它依赖于客户端的完整性：如果客户端机器不可信或者被攻破，攻击者可能在 113 端口上运行任何程序并且返回他们选择的任何用户。因此这种认证方法只适用于封闭的网络， 这样的网络中的每台客户端机器都处于严密的控制下并且数据库和操作系统管理员操作时可以方便地联系。换句话说，你必须信任运行 ident 服务器的机器。注意这样的警告：
    </p><div class="blockquote"><table border="0" class="blockquote" style="width: 100%; cellspacing: 0; cellpadding: 0;" summary="Block quote"><tr><td width="10%" valign="top"> </td><td width="80%" valign="top"><p>
      标识协议的本意不是作为一种认证或访问控制协议。
     </p></td><td width="10%" valign="top"> </td></tr><tr><td width="10%" valign="top"> </td><td colspan="2" align="right" valign="top">--<span class="attribution">RFC 1413</span></td></tr></table></div><p>
   </p><p>
    有些 ident 服务器有一个非标准的选项，它导致返回的用户名是被加密的，使用的是只有原机器管理员知道的一个密钥。当与<span class="productname">PostgreSQL</span>配合使用 ident 服务器时，<span class="emphasis"><em>一定不要</em></span>使用这个选项，因为<span class="productname">PostgreSQL</span>没有任何方法对返回的字符串进行解密以获取实际的用户名。
   </p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="sspi-auth.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="client-authentication.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="auth-peer.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">20.7. SSPI 认证 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> 20.9. Peer 认证</td></tr></table></div></body></html>