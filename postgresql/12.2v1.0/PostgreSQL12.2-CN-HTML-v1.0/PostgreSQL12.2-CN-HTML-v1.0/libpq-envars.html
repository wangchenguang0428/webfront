<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>33.14. 环境变量</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="libpq-events.html" title="33.13. 事件系统" /><link rel="next" href="libpq-pgpass.html" title="33.15. 口令文件" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">33.14. 环境变量</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="libpq-events.html" title="33.13. 事件系统">上一页</a> </td><td width="10%" align="left"><a accesskey="u" href="libpq.html" title="第 33 章 libpq - C 库">上一级</a></td><th width="60%" align="center">第 33 章 <span xmlns="http://www.w3.org/1999/xhtml" class="application">libpq</span> - C 库</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 12.2 手册">起始页</a></td><td width="10%" align="right"> <a accesskey="n" href="libpq-pgpass.html" title="33.15. 口令文件">下一页</a></td></tr></table><hr></hr></div><div class="sect1" id="LIBPQ-ENVARS"><div class="titlepage"><div><div><h2 class="title" style="clear: both">33.14. 环境变量</h2></div></div></div><a id="id-1.7.3.21.2" class="indexterm"></a><p>
   下列环境变量能被用于选择默认的连接参数值，如果调用代码没有直接指定值，它们将被用于<code class="function">PQconnectdb</code>、<code class="function">PQsetdbLogin</code>和<code class="function">PQsetdb</code>。例如，这些有助于防止数据库连接信息被硬编码到简单的客户端应用中。

   </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
      <a id="id-1.7.3.21.3.4.1.1.1" class="indexterm"></a>
      <code class="envar">PGHOST</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-HOST">host</a>连接参数相同。
     </p></li><li class="listitem"><p>
      <a id="id-1.7.3.21.3.4.2.1.1" class="indexterm"></a>
      <code class="envar">PGHOSTADDR</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-HOSTADDR">hostaddr</a>连接参数相同。可以设置它来替代或者作为<code class="envar">PGHOST</code>的补充来防止 DNS 查找负担。
     </p></li><li class="listitem"><p>
      <a id="id-1.7.3.21.3.4.3.1.1" class="indexterm"></a>
      <code class="envar">PGPORT</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-PORT">port</a>连接参数相同。
     </p></li><li class="listitem"><p>
      <a id="id-1.7.3.21.3.4.4.1.1" class="indexterm"></a>
      <code class="envar">PGDATABASE</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-DBNAME">dbname</a>连接参数相同。
      </p></li><li class="listitem"><p>
      <a id="id-1.7.3.21.3.4.5.1.1" class="indexterm"></a>
      <code class="envar">PGUSER</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-USER">user</a>连接参数相同。
     </p></li><li class="listitem"><p>
      <a id="id-1.7.3.21.3.4.6.1.1" class="indexterm"></a>
      <code class="envar">PGPASSWORD</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-PASSWORD">password</a>连接参数相同。出于安全原因，我们不推荐使用这个环境变量，因为某些操作系统允许非根用户通过<span class="application">ps</span>看到进程的环境变量。可以考虑使用一个口令文件（见<a class="xref" href="libpq-pgpass.html" title="33.15. 口令文件">第 33.15 节</a>）。
     </p></li><li class="listitem"><p>
      <a id="id-1.7.3.21.3.4.7.1.1" class="indexterm"></a>
      <code class="envar">PGPASSFILE</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-PASSFILE">passfile</a>连接参数相同。
     </p></li><li class="listitem"><p>
      <a id="id-1.7.3.21.3.4.8.1.1" class="indexterm"></a>
      <code class="envar">PGSERVICE</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-SERVICE">service</a>连接参数相同。
     </p></li><li class="listitem"><p>
      <a id="id-1.7.3.21.3.4.9.1.1" class="indexterm"></a>
      <code class="envar">PGSERVICEFILE</code>指定针对每个用户的连接服务文件名。如果没有设置，默认为<code class="filename">~/.pg_service.conf</code>（见<a class="xref" href="libpq-pgservice.html" title="33.16. 连接服务文件">第 33.16 节</a>）。
     </p></li><li class="listitem"><p>
      <a id="id-1.7.3.21.3.4.10.1.1" class="indexterm"></a>
      <code class="envar">PGOPTIONS</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-OPTIONS">options</a>连接参数相同。
     </p></li><li class="listitem"><p>
      <a id="id-1.7.3.21.3.4.11.1.1" class="indexterm"></a>
      <code class="envar">PGAPPNAME</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-APPLICATION-NAME">application_name</a>连接参数相同。
     </p></li><li class="listitem"><p>
      <a id="id-1.7.3.21.3.4.12.1.1" class="indexterm"></a>
      <code class="envar">PGSSLMODE</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-SSLMODE">sslmode</a>连接参数相同。
     </p></li><li class="listitem"><p>
      <a id="id-1.7.3.21.3.4.13.1.1" class="indexterm"></a>
      <code class="envar">PGREQUIRESSL</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-REQUIRESSL">requiressl</a>连接参数相同。为了支持<code class="envar">PGSSLMODE</code>变量，这个环境变量已被废弃。同时设置两个变量会抑制这一个的效果。
     </p></li><li class="listitem"><p>
      <a id="id-1.7.3.21.3.4.14.1.1" class="indexterm"></a>
      <code class="envar">PGSSLCOMPRESSION</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-SSLCOMPRESSION">sslcompression</a>连接参数相同。
     </p></li><li class="listitem"><p>
      <a id="id-1.7.3.21.3.4.15.1.1" class="indexterm"></a>
      <code class="envar">PGSSLCERT</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-SSLCERT">sslcert</a>连接参数相同。
     </p></li><li class="listitem"><p>
      <a id="id-1.7.3.21.3.4.16.1.1" class="indexterm"></a>
      <code class="envar">PGSSLKEY</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-SSLKEY">sslkey</a>连接参数相同。
     </p></li><li class="listitem"><p>
      <a id="id-1.7.3.21.3.4.17.1.1" class="indexterm"></a>
      <code class="envar">PGSSLROOTCERT</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-SSLROOTCERT">sslrootcert</a>连接参数相同。
     </p></li><li class="listitem"><p>
      <a id="id-1.7.3.21.3.4.18.1.1" class="indexterm"></a>
      <code class="envar">PGSSLCRL</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-SSLCRL">sslcrl</a>连接参数相同。
     </p></li><li class="listitem"><p>
      <a id="id-1.7.3.21.3.4.19.1.1" class="indexterm"></a>
      <code class="envar">PGREQUIREPEER</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-REQUIREPEER">requirepeer</a>连接参数相同。
     </p></li><li class="listitem"><p>
      <a id="id-1.7.3.21.3.4.20.1.1" class="indexterm"></a>
      <code class="envar">PGGSSENCMODE</code> 的行为和 <a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-GSSENCMODE">gssencmode</a>连接参数相同。
     </p></li><li class="listitem"><p>
      <a id="id-1.7.3.21.3.4.21.1.1" class="indexterm"></a>
      <code class="envar">PGKRBSRVNAME</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-KRBSRVNAME">krbsrvname</a>连接参数相同。
     </p></li><li class="listitem"><p>
      <a id="id-1.7.3.21.3.4.22.1.1" class="indexterm"></a>
      <code class="envar">PGGSSLIB</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-GSSLIB">gsslib</a>连接参数相同。
     </p></li><li class="listitem"><p>
      <a id="id-1.7.3.21.3.4.23.1.1" class="indexterm"></a>
      <code class="envar">PGCONNECT_TIMEOUT</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-CONNECT-TIMEOUT">connect_timeout</a>连接参数相同。
     </p></li><li class="listitem"><p>
      <a id="id-1.7.3.21.3.4.24.1.1" class="indexterm"></a>
      <code class="envar">PGCLIENTENCODING</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-CLIENT-ENCODING">client_encoding</a>连接参数相同。
     </p></li><li class="listitem"><p>
      <a id="id-1.7.3.21.3.4.25.1.1" class="indexterm"></a>
      <code class="envar">PGTARGETSESSIONATTRS</code>的行为和<a class="xref" href="libpq-connect.html#LIBPQ-CONNECT-TARGET-SESSION-ATTRS">target_session_attrs</a>连接参数相同。
     </p></li></ul></div><p>
  </p><p>
   下面的环境变量可用来为每一个<span class="productname">PostgreSQL</span>会话指定默认行为（为每一个用户或每一个数据库设置默认行为的方法还可见<a class="xref" href="sql-alterrole.html" title="ALTER ROLE"><span class="refentrytitle">ALTER ROLE</span></a>和<a class="xref" href="sql-alterdatabase.html" title="ALTER DATABASE"><span class="refentrytitle">ALTER DATABASE</span></a>命令）。

   </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
      <a id="id-1.7.3.21.4.4.1.1.1" class="indexterm"></a>
      <code class="envar">PGDATESTYLE</code>设置日期/时间表示的默认风格（等同于<code class="literal">SET datestyle TO ...</code>）。
     </p></li><li class="listitem"><p>
      <a id="id-1.7.3.21.4.4.2.1.1" class="indexterm"></a>
      <code class="envar">PGTZ</code>设置默认的时区（等同于<code class="literal">SET timezone TO ...</code>）。
     </p></li><li class="listitem"><p>
      <a id="id-1.7.3.21.4.4.3.1.1" class="indexterm"></a>
      <code class="envar">PGGEQO</code>为遗传查询优化器设置默认模式（等同于<code class="literal">SET geqo TO ...</code>）。
     </p></li></ul></div><p>

   这些环境变量的正确值可参考<acronym class="acronym">SQL</acronym> 命令 <a class="xref" href="sql-set.html" title="SET"><span class="refentrytitle">SET</span></a>。
  </p><p>
   下面的环境变量决定<span class="application">libpq</span>的内部行为，它们会覆盖编译在程序中的默认值。

   </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
      <a id="id-1.7.3.21.5.2.1.1.1" class="indexterm"></a>
      <code class="envar">PGSYSCONFDIR</code>设置包含<code class="filename">pg_service.conf</code>文件以及未来版本中可能出现的其他系统范围配置文件的目录。
     </p></li><li class="listitem"><p>
      <a id="id-1.7.3.21.5.2.2.1.1" class="indexterm"></a>
      <code class="envar">PGLOCALEDIR</code>设置包含用于消息本地化的<code class="literal">locale</code>文件的目录。
     </p></li></ul></div><p>
  </p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="libpq-events.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="libpq.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="libpq-pgpass.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">33.13. 事件系统 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> 33.15. 口令文件</td></tr></table></div></body></html>