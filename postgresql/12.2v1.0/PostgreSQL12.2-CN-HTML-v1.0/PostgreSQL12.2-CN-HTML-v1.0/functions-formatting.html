<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>9.8. 数据类型格式化函数</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="functions-matching.html" title="9.7. 模式匹配" /><link rel="next" href="functions-datetime.html" title="9.9. 时间/日期函数和操作符" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">9.8. 数据类型格式化函数</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="functions-matching.html" title="9.7. 模式匹配">上一页</a> </td><td width="10%" align="left"><a accesskey="u" href="functions.html" title="第 9 章 函数和操作符">上一级</a></td><th width="60%" align="center">第 9 章 函数和操作符</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 12.2 手册">起始页</a></td><td width="10%" align="right"> <a accesskey="n" href="functions-datetime.html" title="9.9. 时间/日期函数和操作符">下一页</a></td></tr></table><hr></hr></div><div class="sect1" id="FUNCTIONS-FORMATTING"><div class="titlepage"><div><div><h2 class="title" style="clear: both">9.8. 数据类型格式化函数</h2></div></div></div><a id="id-1.5.8.13.2" class="indexterm"></a><p>
    <span class="productname">PostgreSQL</span>格式化函数提供一套强大的工具用于把各种数据类型 （日期/时间、整数、浮点、数字） 转换成格式化的字符串以及反过来从格式化的字符串转换成 指定的数据类型。<a class="xref" href="functions-formatting.html#FUNCTIONS-FORMATTING-TABLE" title="表 9.24. 格式化函数">表 9.24</a>列出了这些函数。这些函数都遵循一个公共的调用规范： 第一个参数是待格式化的值，而第二个是一个定义输出或输入格式的模板。
   </p><div class="table" id="FUNCTIONS-FORMATTING-TABLE"><p class="title"><strong>表 9.24. 格式化函数</strong></p><div class="table-contents"><table class="table" summary="格式化函数" border="1"><colgroup><col /><col /><col /><col /></colgroup><thead><tr><th>函数</th><th>返回类型</th><th>描述</th><th>例子</th></tr></thead><tbody><tr><td>
         <a id="id-1.5.8.13.4.2.2.1.1.1" class="indexterm"></a>
         <code class="literal"><code class="function">to_char(<code class="type">timestamp</code>, <code class="type">text</code>)</code></code>
        </td><td><code class="type">text</code></td><td>把时间戳转成字符串</td><td><code class="literal">to_char(current_timestamp, 'HH12:MI:SS')</code></td></tr><tr><td><code class="literal"><code class="function">to_char(<code class="type">interval</code>, <code class="type">text</code>)</code></code></td><td><code class="type">text</code></td><td>把间隔转成字符串</td><td><code class="literal">to_char(interval '15h 2m 12s', 'HH24:MI:SS')</code></td></tr><tr><td><code class="literal"><code class="function">to_char(<code class="type">int</code>, <code class="type">text</code>)</code></code></td><td><code class="type">text</code></td><td>把整数转成字符串</td><td><code class="literal">to_char(125, '999')</code></td></tr><tr><td><code class="literal"><code class="function">to_char</code>(<code class="type">double precision</code>,
        <code class="type">text</code>)</code></td><td><code class="type">text</code></td><td>把实数或双精度转成字符串</td><td><code class="literal">to_char(125.8::real, '999D9')</code></td></tr><tr><td><code class="literal"><code class="function">to_char(<code class="type">numeric</code>, <code class="type">text</code>)</code></code></td><td><code class="type">text</code></td><td>把数字转成字符串</td><td><code class="literal">to_char(-125.8, '999D99S')</code></td></tr><tr><td>
         <a id="id-1.5.8.13.4.2.2.6.1.1" class="indexterm"></a>
         <code class="literal"><code class="function">to_date(<code class="type">text</code>, <code class="type">text</code>)</code></code>
        </td><td><code class="type">date</code></td><td>把字符串转成日期</td><td><code class="literal">to_date('05 Dec 2000', 'DD Mon YYYY')</code></td></tr><tr><td>
         <a id="id-1.5.8.13.4.2.2.7.1.1" class="indexterm"></a>
         <code class="literal"><code class="function">to_number(<code class="type">text</code>, <code class="type">text</code>)</code></code>
        </td><td><code class="type">numeric</code></td><td>把字符串转成数字</td><td><code class="literal">to_number('12,454.8-', '99G999D9S')</code></td></tr><tr><td>
         <a id="id-1.5.8.13.4.2.2.8.1.1" class="indexterm"></a>
         <code class="literal"><code class="function">to_timestamp(<code class="type">text</code>, <code class="type">text</code>)</code></code>
        </td><td><code class="type">timestamp with time zone</code></td><td>把字符串转成时间戳</td><td><code class="literal">to_timestamp('05 Dec 2000', 'DD Mon YYYY')</code></td></tr></tbody></table></div></div><br class="table-break" /><div class="note"><h3 class="title">注意</h3><p>
     还有一个单一参数的<code class="function">to_timestamp</code>函数，请见<a class="xref" href="functions-datetime.html#FUNCTIONS-DATETIME-TABLE" title="表 9.31. 日期/时间函数">表 9.31</a>。
    </p></div><div class="tip"><h3 class="title">提示</h3><p>
     <code class="function">to_timestamp</code>和<code class="function">to_date</code>存在的目的是为了处理无法用简单造型转换的输入格式。对于大部分标准的日期/时间格式，简单地把源字符串造型成所需的数据类型是可以的，并且简单很多。类似地，对于标准的数字表示形式，<code class="function">to_number</code>也是没有必要的。
    </p></div><p>
    在一个<code class="function">to_char</code>输出模板串中，一些特定的模式可以被识别并且被替换成基于给定值的被恰当地格式化的数据。任何不属于模板模式的文本都简单地照字面拷贝。同样，在一个输入 模板串里（对其他函数），模板模式标识由输入数据串提供的值。如果在模板字符串中有不是模板模式的字符，输入数据字符串中的对应字符会被简单地跳过（不管它们是否等于模板字符串字符）。
   </p><p>
   <a class="xref" href="functions-formatting.html#FUNCTIONS-FORMATTING-DATETIME-TABLE" title="表 9.25. 用于日期/时间格式化的模板模式">表 9.25</a>展示了可以用于格式化日期和时间值的模版。
  </p><div class="table" id="FUNCTIONS-FORMATTING-DATETIME-TABLE"><p class="title"><strong>表 9.25. 用于日期/时间格式化的模板模式</strong></p><div class="table-contents"><table class="table" summary="用于日期/时间格式化的模板模式" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>模式</th><th>描述</th></tr></thead><tbody><tr><td><code class="literal">HH</code></td><td>一天中的小时 （01-12）</td></tr><tr><td><code class="literal">HH12</code></td><td>一天中的小时 （01-12）</td></tr><tr><td><code class="literal">HH24</code></td><td>一天中的小时 （00-23）</td></tr><tr><td><code class="literal">MI</code></td><td>分钟 （00-59）minute (00-59)</td></tr><tr><td><code class="literal">SS</code></td><td>秒（00-59）</td></tr><tr><td><code class="literal">MS</code></td><td>毫秒（000-999）</td></tr><tr><td><code class="literal">US</code></td><td>微秒（000000-999999）</td></tr><tr><td><code class="literal">SSSS</code></td><td>午夜后的秒（0-86399）</td></tr><tr><td><code class="literal">AM</code>, <code class="literal">am</code>,
        <code class="literal">PM</code> or <code class="literal">pm</code></td><td>正午指示器（不带句号）</td></tr><tr><td><code class="literal">A.M.</code>, <code class="literal">a.m.</code>,
        <code class="literal">P.M.</code> or <code class="literal">p.m.</code></td><td>正午指示器（带句号）</td></tr><tr><td><code class="literal">Y,YYY</code></td><td>带逗号的年（4 位或者更多位）</td></tr><tr><td><code class="literal">YYYY</code></td><td>年（4 位或者更多位）</td></tr><tr><td><code class="literal">YYY</code></td><td>年的后三位</td></tr><tr><td><code class="literal">YY</code></td><td>年的后两位</td></tr><tr><td><code class="literal">Y</code></td><td>年的最后一位</td></tr><tr><td><code class="literal">IYYY</code></td><td>ISO 8601 周编号方式的年（4 位或更多位）</td></tr><tr><td><code class="literal">IYY</code></td><td>ISO 8601 周编号方式的年的最后 3 位</td></tr><tr><td><code class="literal">IY</code></td><td>ISO 8601 周编号方式的年的最后 2 位</td></tr><tr><td><code class="literal">I</code></td><td>ISO 8601 周编号方式的年的最后一位</td></tr><tr><td><code class="literal">BC</code>, <code class="literal">bc</code>,
        <code class="literal">AD</code>或者<code class="literal">ad</code></td><td>纪元指示器（不带句号）</td></tr><tr><td><code class="literal">B.C.</code>, <code class="literal">b.c.</code>,
        <code class="literal">A.D.</code>或者<code class="literal">a.d.</code></td><td>纪元指示器（带句号）</td></tr><tr><td><code class="literal">MONTH</code></td><td>全大写形式的月名（空格补齐到 9 字符）</td></tr><tr><td><code class="literal">Month</code></td><td>全首字母大写形式的月名（空格补齐到 9 字符）</td></tr><tr><td><code class="literal">month</code></td><td>全小写形式的月名（空格补齐到 9 字符）</td></tr><tr><td><code class="literal">MON</code></td><td>简写的大写形式的月名（英文 3 字符，本地化长度可变）</td></tr><tr><td><code class="literal">Mon</code></td><td>简写的首字母大写形式的月名（英文 3 字符，本地化长度可变）</td></tr><tr><td><code class="literal">mon</code></td><td>简写的小写形式的月名（英文 3 字符，本地化长度可变）</td></tr><tr><td><code class="literal">MM</code></td><td>月编号（01-12）</td></tr><tr><td><code class="literal">DAY</code></td><td>全大写形式的日名（空格补齐到 9 字符）</td></tr><tr><td><code class="literal">Day</code></td><td>全首字母大写形式的日名（空格补齐到 9 字符）</td></tr><tr><td><code class="literal">day</code></td><td>全小写形式的日名（空格补齐到 9 字符）</td></tr><tr><td><code class="literal">DY</code></td><td>简写的大写形式的日名（英语 3 字符，本地化长度可变）</td></tr><tr><td><code class="literal">Dy</code></td><td>简写的首字母大写形式的日名（英语 3 字符，本地化长度可变） </td></tr><tr><td><code class="literal">dy</code></td><td>简写的小写形式的日名（英语 3 字符，本地化长度可变）</td></tr><tr><td><code class="literal">DDD</code></td><td>一年中的日（001-366）</td></tr><tr><td><code class="literal">IDDD</code></td><td>ISO 8601 周编号方式的年中的日（001-371，年的第 1 日时第一个 ISO 周的周一）</td></tr><tr><td><code class="literal">DD</code></td><td>月中的日（01-31）</td></tr><tr><td><code class="literal">D</code></td><td>周中的日，周日（<code class="literal">1</code>）到周六（<code class="literal">7</code>）</td></tr><tr><td><code class="literal">ID</code></td><td>周中的 ISO 8601 日，周一（<code class="literal">1</code>）到周日（<code class="literal">7</code>）</td></tr><tr><td><code class="literal">W</code></td><td>月中的周（1-5）（第一周从该月的第一天开始）</td></tr><tr><td><code class="literal">WW</code></td><td>年中的周数（1-53）（第一周从该年的第一天开始）</td></tr><tr><td><code class="literal">IW</code></td><td>ISO 8601 周编号方式的年中的周数（01 - 53；新的一年的第一个周四在第一周）</td></tr><tr><td><code class="literal">CC</code></td><td>世纪（2 位数）（21 世纪开始于 2001-01-01）</td></tr><tr><td><code class="literal">J</code></td><td>儒略日（从午夜 UTC 的公元前 4714 年 11 月 24 日开始的整数日数）</td></tr><tr><td><code class="literal">Q</code></td><td>季度（<code class="function">to_date</code>和<code class="function">to_timestamp</code>会忽略）</td></tr><tr><td><code class="literal">RM</code></td><td>大写形式的罗马计数法的月（I-XII；I 是 一月）</td></tr><tr><td><code class="literal">rm</code></td><td>小写形式的罗马计数法的月（i-xii；i 是 一月）</td></tr><tr><td><code class="literal">TZ</code></td><td>大写形式的时区缩写（仅在<code class="function">to_char</code>中支持）</td></tr><tr><td><code class="literal">tz</code></td><td>小写形式的时区缩写（仅在<code class="function">to_char</code>中支持）</td></tr><tr><td><code class="literal">TZH</code></td><td>时区的小时</td></tr><tr><td><code class="literal">TZM</code></td><td>时区的分钟</td></tr><tr><td><code class="literal">OF</code></td><td>从UTC开始的时区偏移（仅在<code class="function">to_char</code>中支持）</td></tr></tbody></table></div></div><br class="table-break" /><p>
    修饰语可以被应用于模板模式来修改它们的行为。例如，<code class="literal">FMMonth</code>就是带着<code class="literal">FM</code>修饰语的<code class="literal">Month</code>模式。<a class="xref" href="functions-formatting.html#FUNCTIONS-FORMATTING-DATETIMEMOD-TABLE" title="表 9.26. 用于日期/时间格式化的模板模式修饰语">表 9.26</a>展示了可用于日期/时间格式化的修饰语模式。
   </p><div class="table" id="FUNCTIONS-FORMATTING-DATETIMEMOD-TABLE"><p class="title"><strong>表 9.26. 用于日期/时间格式化的模板模式修饰语</strong></p><div class="table-contents"><table class="table" summary="用于日期/时间格式化的模板模式修饰语" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th>修饰语</th><th>描述</th><th>例子</th></tr></thead><tbody><tr><td><code class="literal">FM</code> prefix</td><td>填充模式（抑制前导零和填充的空格）</td><td><code class="literal">FMMonth</code></td></tr><tr><td><code class="literal">TH</code> suffix</td><td>大写形式的序数后缀</td><td><code class="literal">DDTH</code>, e.g., <code class="literal">12TH</code></td></tr><tr><td><code class="literal">th</code> suffix</td><td>小写形式的序数后缀</td><td><code class="literal">DDth</code>, e.g., <code class="literal">12th</code></td></tr><tr><td><code class="literal">FX</code> prefix</td><td>固定的格式化全局选项（见使用须知）</td><td><code class="literal">FX Month DD Day</code></td></tr><tr><td><code class="literal">TM</code> prefix</td><td>翻译模式（基于<a class="xref" href="runtime-config-client.html#GUC-LC-TIME">lc_time</a>打印本地化的日和月名）</td><td><code class="literal">TMMonth</code></td></tr><tr><td><code class="literal">SP</code> suffix</td><td>拼写模式（未实现）</td><td><code class="literal">DDSP</code></td></tr></tbody></table></div></div><br class="table-break" /><p>
    日期/时间格式化的使用须知：

    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
       <code class="literal">FM</code>抑制前导的零或尾随的空白， 否则会把它们增加到输入从而把一个模式的输出变成固定宽度。在<span class="productname">PostgreSQL</span>中，<code class="literal">FM</code>只修改下一个声明，而在 Oracle 中，<code class="literal">FM</code>影响所有随后的声明，并且重复的<code class="literal">FM</code>修饰语将触发填充模式开和关。
      </p></li><li class="listitem"><p>
       <code class="literal">TM</code>不包括结尾空白。<code class="function">to_timestamp</code>和<code class="function">to_date</code>会忽略<code class="literal">TM</code>修饰语。
      </p></li><li class="listitem"><p>
       <code class="function">to_timestamp</code>和<code class="function">to_date</code>跳过了输入字符串开头和日期和时间值周围的多个空格，除非使用了<code class="literal">FX</code>选项。 例如，<code class="literal">to_to_timestamp(' 2000         JUN', 'YYY-MON')</code>和<code class="literal">to_timestamp('2000 - JUN', 'YYY-MON')</code>都能工作，但<code class="literal">to_timestamp('2000        JUN', 'FXYYYY-MON')</code>返回一个错误，因为<code class="function">to_timestamp</code>只期望一个空格。<code class="literal">FX</code>必须指定为模板中的第一个项目。
      </p></li><li class="listitem"><p>
       <code class="function">to_timestamp</code>和<code class="function">to_date</code>的模板字符串中的分隔符（一个空格或非字母/非数字字符）与输入字符串中的任何一个分隔符相匹配，或者被跳过，除非使用了<code class="literal">FX</code>选项。例如，<code class="literal">to_to_timestamp('2000JUN', 'YYY///MON')</code>和<code class="literal">to_timestamp('2000/JUN', 'YYY/MON')</code>可以工作，但<code class="literal">to_timestamp('2000/JUN', 'YYYY/MON')</code>返回一个错误，因为输入字符串中的分隔符数量超过了模板中的分隔符数量。
      </p><p>
       如果指定了<code class="literal">FX</code>，模板字符串中的分隔符正好与输入字符串中的一个字符匹配。 但要注意的是，输入字符串中的字符不需要与模板字符串中的分隔符相同。例如，<code class="literal">to_timestamp('2000/JUN', 'FXYYYY MON')</code>可以工作，但是<code class="literal">to_timestamp('2000/JUN', 'FXYYYY  MON')</code>返回错误，因为模板字符串中的第二个空格会消耗掉输入字符串中的字母<code class="literal">J</code>。
      </p></li><li class="listitem"><p>
       <code class="literal">TZH</code>模板模式可以匹配一个有符号的数字。如果没有<code class="literal">FX</code>选项，减号可能是模糊的，可能被解释为分隔符。这种模棱两可的问题可以通过以下方式解决。 如果模板字符串中<code class="literal">TZH</code>前的分隔符的数量小于输入字符串中减号前的分隔符数量，则减号被解释为<code class="literal">TZH</code>的一部分。否则，减号被认为是值之间的分隔符。例如，<code class="literal">to_timestamp(''2000 -10', 'YYY TZH')</code>与<code class="literal">-10</code>匹配，但<code class="literal">to_timestamp('2000 -10', 'YYYY  TZH')</code>匹配<code class="literal">10</code>到<code class="literal">TZH</code>。
      </p></li><li class="listitem"><p>
       在<code class="function">to_char</code>模板里可以有普通文本，并且它们会被照字面输出。你可以把一个子串放到双引号里强迫它被解释成一个文本，即使它里面包含模板模式也如此。例如，在 <code class="literal">'"Hello Year "YYYY'</code>中，<code class="literal">YYYY</code>将被年份数据代替，但是<code class="literal">Year</code>中单独的<code class="literal">Y</code>不会。在<code class="function">to_date</code>、<code class="function">to_number</code>以及<code class="function">to_timestamp</code>中，文本和双引号字符串会导致跳过该字符串中所包含的字符数量，例如<code class="literal">"XX"</code>会跳过两个输入字符（不管它们是不是<code class="literal">XX</code>）。
      </p><div class="tip"><h3 class="title">提示</h3><p>
        在<span class="productname">PostgreSQL</span> 12之前，可以使用非字母或非数字字符跳过输入字符串中的任意文本。例如，<code class="literal">to_timestamp('2000y6m1d', 'yyyyy-MM-DD')</code>以前是有效的。 现在，你只能使用字母字符来实现这个目的。 例如，<code class="literal">to_timestamp(''2000y6m1d', 'yyyytMMtDDt')</code>和<code class="literal">to_timestamp('2000y6m1d', 'yyyyy"y"MM"m"DD"d"')</code>跳过<code class="literal">y</code>、<code class="literal">m</code>和<code class="literal">d</code>。
        </p></div></li><li class="listitem"><p>
       如果你想在输出里有双引号，那么你必须在它们前面放反斜线，例如 <code class="literal">'\"YYYY Month\"'</code>。不然，在双引号字符串外面的反斜线就不是特殊的。在双引号字符串内，反斜线会导致下一个字符被取其字面形式，不管它是什么字符（但是这没有特殊效果，除非下一个字符是一个双引号或者另一个反斜线）。
      </p></li><li class="listitem"><p>
       在<code class="function">to_timestamp</code>和<code class="function">to_date</code>中，如果年份格式声明少于四位（如<code class="literal">YYY</code>）并且提供的年份少于四位，年份将被调整为最接近于 2020 年，例如<code class="literal">95</code>会变成 1995。
      </p></li><li class="listitem"><p>
       在<code class="function">to_timestamp</code>和<code class="function">to_date</code>中，在处理超过4位数的年份时，<code class="literal">YYYY</code>转换具有限制。你必须在<code class="literal">YYYY</code>后面使用一些非数字字符或者模板， 否则年份总是被解释为 4 位数字。例如（对于 20000 年）：<code class="literal">to_date('200001131', 'YYYYMMDD')</code>将会被解释成一个 4 位数字的年份，而不是在年份后使用一个非数字分隔符，像<code class="literal">to_date('20000-1131', 'YYYY-MMDD')</code>或<code class="literal">to_date('20000Nov31', 'YYYYMonDD')</code>。
      </p></li><li class="listitem"><p>
       在<code class="function">to_timestamp</code>和<code class="function">to_date</code>中，<code class="literal">CC</code>（世纪）字段会被接受，但是如果有<code class="literal">YYY</code>、<code class="literal">YYYY</code>或者<code class="literal">Y,YYY</code>字段则会忽略它。如果<code class="literal">CC</code>与<code class="literal">YY</code>或<code class="literal">Y</code>一起使用，则结果被计算为指定世纪中的那一年。如果指定了世纪但是没有指定年，则会假定为该世纪的第一年。
      </p></li><li class="listitem"><p>
       在<code class="function">to_timestamp</code>和<code class="function">to_date</code>中，工作日名称或编号（<code class="literal">DAY</code>、<code class="literal">D</code>以及相关的字段类型）会被接受，但会为了计算结果的目的而忽略。季度（<code class="literal">Q</code>）字段也是一样。
      </p></li><li class="listitem"><p>
       在<code class="function">to_timestamp</code>和<code class="function">to_date</code>中，一个 ISO 8601 周编号的日期（与一个格里高利日期相区别）可以用两种方法之一被指定为<code class="function">to_timestamp</code>和<code class="function">to_date</code>：
       </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p>
          年、周编号和工作日：例如<code class="literal">to_date('2006-42-4', 'IYYY-IW-ID')</code>返回日期<code class="literal">2006-10-19</code>。如果你忽略工作日，它被假定为 1（周一）。
         </p></li><li class="listitem"><p>
          年和一年中的日：例如<code class="literal">to_date('2006-291', 'IYYY-IDDD')</code>也返回<code class="literal">2006-10-19</code>。
         </p></li></ul></div><p>
      </p><p>
       尝试使用一个混合了 ISO 8601 周编号和格里高利日期的域来输入一个日期是无意义的，并且将导致一个错误。在一个 ISO 周编号的年的环境下，一个<span class="quote">“<span class="quote">月</span>”</span>或<span class="quote">“<span class="quote">月中的日</span>”</span>的概念没有意义。在一个格里高利年的环境下，ISO 周没有意义。用户应当避免混合格里高利和 ISO 日期声明。
      </p><div class="caution"><h3 class="title">小心</h3><p>
        虽然<code class="function">to_date</code>将会拒绝混合使用格里高利和 ISO 周编号日期的域，
        <code class="function">to_char</code>却不会，因为<code class="literal">YYYY-MM-DD (IYYY-IDDD)</code>
        这种输出格式也会有用。但是避免写类似<code class="literal">IYYY-MM-DD</code>的东西，那会得到在
        起始年附近令人惊讶的结果（详见<a class="xref" href="functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT" title="9.9.1. EXTRACT, date_part">第 9.9.1 节</a>）。
       </p></div></li><li class="listitem"><p>
       在<code class="function">to_timestamp</code>中，毫秒（<code class="literal">MS</code>）和微秒（<code class="literal">US</code>）域都被用作小数点后的秒位。例如<code class="literal">to_timestamp('12.3', 'SS.MS')</code>不是 3 毫秒, 而是 300，因为该转换把它看做 12 + 0.3 秒。这意味着对于格式<code class="literal">SS.MS</code>而言，输入值<code class="literal">12.3</code>、<code class="literal">12.30</code>和<code class="literal">12.300</code>指定了相同数目的毫秒。要得到三毫秒，你必须使用 <code class="literal">12.003</code>，转换会把它看做 12 + 0.003 = 12.003 秒。
      </p><p>
       下面是一个更复杂的例子∶<code class="literal">to_timestamp('15:12:02.020.001230', 'HH24:MI:SS.MS.US')</code>是 15 小时、12 分钟和 2 秒 + 20 毫秒 + 1230微秒 = 2.021230 秒。
      </p></li><li class="listitem"><p>
        <code class="function">to_char(..., 'ID')</code>的一周中日的编号匹配<code class="function">extract(isodow from ...)</code>函数，但是<code class="function">to_char(..., 'D')</code>不匹配<code class="function">extract(dow from ...)</code>的日编号。
      </p></li><li class="listitem"><p>
        <code class="function">to_char(interval)</code>格式化<code class="literal">HH</code>和<code class="literal">HH12</code>为显示在一个 12 小时的时钟上，即零小时和 36 小时输出为<code class="literal">12</code>，而<code class="literal">HH24</code>会输出完整的小时值，对于间隔它可以超过 23.
      </p></li></ul></div><p>
   </p><p>
   <a class="xref" href="functions-formatting.html#FUNCTIONS-FORMATTING-NUMERIC-TABLE" title="表 9.27. 用于数字格式化的模板模式">表 9.27</a>展示了可以用于格式化数字值的模版模式。
  </p><div class="table" id="FUNCTIONS-FORMATTING-NUMERIC-TABLE"><p class="title"><strong>表 9.27. 用于数字格式化的模板模式</strong></p><div class="table-contents"><table class="table" summary="用于数字格式化的模板模式" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>模式</th><th>描述</th></tr></thead><tbody><tr><td><code class="literal">9</code></td><td>数位（如果无意义可以被删除）</td></tr><tr><td><code class="literal">0</code></td><td>数位（即便没有意义也不会被删除）</td></tr><tr><td><code class="literal">.</code> (period)</td><td>小数点</td></tr><tr><td><code class="literal">,</code> (comma)</td><td>分组（千）分隔符</td></tr><tr><td><code class="literal">PR</code></td><td>尖括号内的负值</td></tr><tr><td><code class="literal">S</code></td><td>带符号的数字（使用区域）</td></tr><tr><td><code class="literal">L</code></td><td>货币符号（使用区域）</td></tr><tr><td><code class="literal">D</code></td><td>小数点（使用区域）</td></tr><tr><td><code class="literal">G</code></td><td>分组分隔符（使用区域）</td></tr><tr><td><code class="literal">MI</code></td><td>在指定位置的负号（如果数字 &lt; 0）</td></tr><tr><td><code class="literal">PL</code></td><td>在指定位置的正号（如果数字 &gt; 0）</td></tr><tr><td><code class="literal">SG</code></td><td>在指定位置的正/负号</td></tr><tr><td><code class="literal">RN</code></td><td>罗马数字（输入在 1 和 3999 之间）</td></tr><tr><td><code class="literal">TH</code> or <code class="literal">th</code></td><td>序数后缀</td></tr><tr><td><code class="literal">V</code></td><td>移动指定位数（参阅注解）</td></tr><tr><td><code class="literal">EEEE</code></td><td>科学记数的指数</td></tr></tbody></table></div></div><br class="table-break" /><p>
    数字格式化的用法须知：

    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
       <code class="literal">0</code>指定一个总是被打印的数位，即便它包含前导/拖尾的零。<code class="literal">9</code>也指定一个数位，但是如果它是前导零则会被空格替换，而如果是拖尾零并且指定了填充模式则它会被删除（对于<code class="function">to_number()</code>来说，这两种模式字符等效）。
      </p></li><li class="listitem"><p>
       模式字符<code class="literal">S</code>、<code class="literal">L</code>、<code class="literal">D</code>以及<code class="literal">G</code>表示当前locale定义的负号、货币符号、小数点以及数字分隔符字符（见<a class="xref" href="runtime-config-client.html#GUC-LC-MONETARY">lc_monetary</a>和<a class="xref" href="runtime-config-client.html#GUC-LC-NUMERIC">lc_numeric</a>）。不管locale是什么，模式字符句号和逗号就表示小数点和数字分隔符。
      </p></li><li class="listitem"><p>
       对于<code class="function">to_char()</code>的模式中的一个负号，如果没有明确的规定，将为该负号保留一列，并且它将被锚接到（出现在左边）那个数字。如果<code class="literal">S</code>正好出现在某个<code class="literal">9</code>的左边，它也将被锚接到那个数字。
      </p></li><li class="listitem"><p>
       使用<code class="literal">SG</code>、<code class="literal">PL</code>或<code class="literal">MI</code>格式化的符号并不挂在数字上面； 例如，<code class="literal">to_char(-12, 'MI9999')</code>生成<code class="literal">'-  12'</code>，而<code class="literal">to_char(-12, 'S9999')</code>生成 <code class="literal">'  -12'</code>。（Oracle 里的实现不允许在<code class="literal">9</code>前面使用<code class="literal">MI</code>，而是要求<code class="literal">9</code>在<code class="literal">MI</code>前面。）
      </p></li><li class="listitem"><p>
       <code class="literal">TH</code>不会转换小于零的数值，也不会转换小数。
      </p></li><li class="listitem"><p>
       <code class="literal">PL</code>、<code class="literal">SG</code>和<code class="literal">TH</code>是<span class="productname">PostgreSQL</span>扩展。
      </p></li><li class="listitem"><p>
       在<code class="function">to_number</code>中，如果没有使用<code class="literal">L</code>或<code class="literal">TH</code>之类的非数据模板模式，相应数量的输入字符会被跳过，不管它们是否匹配模板模式，除非它们是数据字符（也就是数位、负号、小数点或者逗号）。例如，<code class="literal">TH</code>会跳过两个非数据字符。
      </p></li><li class="listitem"><p>
       带有<code class="function">to_char</code>的<code class="literal">V</code>会把输入值乘上<code class="literal">10^<em class="replaceable"><code>n</code></em></code>，其中<em class="replaceable"><code>n</code></em>是跟在<code class="literal">V</code>后面的位数。带有<code class="function">to_number</code>的<code class="literal">V</code>以类似的方式做除法。<code class="function">to_char</code>和<code class="function">to_number</code>不支持使用结合小数点的<code class="literal">V</code>（例如，不允许<code class="literal">99.9V99</code>）。
      </p></li><li class="listitem"><p>
       <code class="literal">EEEE</code>（科学记数法）不能和任何其他格式化模式或修饰语（数字和小数点模式除外）组合在一起使用，并且必须位于格式化字符串的最后（例如<code class="literal">9.99EEEE</code>是一个合法的模式）。
      </p></li></ul></div><p>
   </p><p>
    某些修饰语可以被应用到任何模板来改变其行为。例如，<code class="literal">FM99.99</code>是带有<code class="literal">FM</code>修饰语的<code class="literal">99.99</code>模式。<a class="xref" href="functions-formatting.html#FUNCTIONS-FORMATTING-NUMERICMOD-TABLE" title="表 9.28. 用于数字格式化的模板模式修饰语">表 9.28</a>中展示了用于数字格式化模式修饰语。
   </p><div class="table" id="FUNCTIONS-FORMATTING-NUMERICMOD-TABLE"><p class="title"><strong>表 9.28. 用于数字格式化的模板模式修饰语</strong></p><div class="table-contents"><table class="table" summary="用于数字格式化的模板模式修饰语" border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th>修饰语</th><th>描述</th><th>例子</th></tr></thead><tbody><tr><td><code class="literal">FM</code> prefix</td><td>填充模式（抑制拖尾零和填充的空白）</td><td><code class="literal">FM99.99</code></td></tr><tr><td><code class="literal">TH</code> suffix</td><td>大写序数后缀</td><td><code class="literal">999TH</code></td></tr><tr><td><code class="literal">th</code> suffix</td><td>小写序数后缀</td><td><code class="literal">999th</code></td></tr></tbody></table></div></div><br class="table-break" /><p>
   <a class="xref" href="functions-formatting.html#FUNCTIONS-FORMATTING-EXAMPLES-TABLE" title="表 9.29. to_char例子">表 9.29</a>展示了一些使用<code class="function">to_char</code>函数的例子。
  </p><div class="table" id="FUNCTIONS-FORMATTING-EXAMPLES-TABLE"><p class="title"><strong>表 9.29. <code class="function">to_char</code>例子</strong></p><div class="table-contents"><table class="table" summary="to_char例子" border="1"><colgroup><col /><col /></colgroup><thead><tr><th>表达式</th><th>结果</th></tr></thead><tbody><tr><td><code class="literal">to_char(current_timestamp, 'Day, DD  HH12:MI:SS')</code></td><td><code class="literal">'Tuesday  , 06  05:39:18'</code></td></tr><tr><td><code class="literal">to_char(current_timestamp, 'FMDay, FMDD  HH12:MI:SS')</code></td><td><code class="literal">'Tuesday, 6  05:39:18'</code></td></tr><tr><td><code class="literal">to_char(-0.1, '99.99')</code></td><td><code class="literal">'  -.10'</code></td></tr><tr><td><code class="literal">to_char(-0.1, 'FM9.99')</code></td><td><code class="literal">'-.1'</code></td></tr><tr><td><code class="literal">to_char(-0.1, 'FM90.99')</code></td><td><code class="literal">'-0.1'</code></td></tr><tr><td><code class="literal">to_char(0.1, '0.9')</code></td><td><code class="literal">' 0.1'</code></td></tr><tr><td><code class="literal">to_char(12, '9990999.9')</code></td><td><code class="literal">'    0012.0'</code></td></tr><tr><td><code class="literal">to_char(12, 'FM9990999.9')</code></td><td><code class="literal">'0012.'</code></td></tr><tr><td><code class="literal">to_char(485, '999')</code></td><td><code class="literal">' 485'</code></td></tr><tr><td><code class="literal">to_char(-485, '999')</code></td><td><code class="literal">'-485'</code></td></tr><tr><td><code class="literal">to_char(485, '9 9 9')</code></td><td><code class="literal">' 4 8 5'</code></td></tr><tr><td><code class="literal">to_char(1485, '9,999')</code></td><td><code class="literal">' 1,485'</code></td></tr><tr><td><code class="literal">to_char(1485, '9G999')</code></td><td><code class="literal">' 1 485'</code></td></tr><tr><td><code class="literal">to_char(148.5, '999.999')</code></td><td><code class="literal">' 148.500'</code></td></tr><tr><td><code class="literal">to_char(148.5, 'FM999.999')</code></td><td><code class="literal">'148.5'</code></td></tr><tr><td><code class="literal">to_char(148.5, 'FM999.990')</code></td><td><code class="literal">'148.500'</code></td></tr><tr><td><code class="literal">to_char(148.5, '999D999')</code></td><td><code class="literal">' 148,500'</code></td></tr><tr><td><code class="literal">to_char(3148.5, '9G999D999')</code></td><td><code class="literal">' 3 148,500'</code></td></tr><tr><td><code class="literal">to_char(-485, '999S')</code></td><td><code class="literal">'485-'</code></td></tr><tr><td><code class="literal">to_char(-485, '999MI')</code></td><td><code class="literal">'485-'</code></td></tr><tr><td><code class="literal">to_char(485, '999MI')</code></td><td><code class="literal">'485 '</code></td></tr><tr><td><code class="literal">to_char(485, 'FM999MI')</code></td><td><code class="literal">'485'</code></td></tr><tr><td><code class="literal">to_char(485, 'PL999')</code></td><td><code class="literal">'+485'</code></td></tr><tr><td><code class="literal">to_char(485, 'SG999')</code></td><td><code class="literal">'+485'</code></td></tr><tr><td><code class="literal">to_char(-485, 'SG999')</code></td><td><code class="literal">'-485'</code></td></tr><tr><td><code class="literal">to_char(-485, '9SG99')</code></td><td><code class="literal">'4-85'</code></td></tr><tr><td><code class="literal">to_char(-485, '999PR')</code></td><td><code class="literal">'&lt;485&gt;'</code></td></tr><tr><td><code class="literal">to_char(485, 'L999')</code></td><td><code class="literal">'DM 485'</code></td></tr><tr><td><code class="literal">to_char(485, 'RN')</code></td><td><code class="literal">'        CDLXXXV'</code></td></tr><tr><td><code class="literal">to_char(485, 'FMRN')</code></td><td><code class="literal">'CDLXXXV'</code></td></tr><tr><td><code class="literal">to_char(5.2, 'FMRN')</code></td><td><code class="literal">'V'</code></td></tr><tr><td><code class="literal">to_char(482, '999th')</code></td><td><code class="literal">' 482nd'</code></td></tr><tr><td><code class="literal">to_char(485, '"Good number:"999')</code></td><td><code class="literal">'Good number: 485'</code></td></tr><tr><td><code class="literal">to_char(485.8, '"Pre:"999" Post:" .999')</code></td><td><code class="literal">'Pre: 485 Post: .800'</code></td></tr><tr><td><code class="literal">to_char(12, '99V999')</code></td><td><code class="literal">' 12000'</code></td></tr><tr><td><code class="literal">to_char(12.4, '99V999')</code></td><td><code class="literal">' 12400'</code></td></tr><tr><td><code class="literal">to_char(12.45, '99V9')</code></td><td><code class="literal">' 125'</code></td></tr><tr><td><code class="literal">to_char(0.0004859, '9.99EEEE')</code></td><td><code class="literal">' 4.86e-04'</code></td></tr></tbody></table></div></div><br class="table-break" /></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="functions-matching.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="functions.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="functions-datetime.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">9.7. 模式匹配 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> 9.9. 时间/日期函数和操作符</td></tr></table></div></body></html>