<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>53.1. 格式化</title><link rel="stylesheet" type="text/css" href="stylesheet.css" /><link rev="made" href="pgsql-docs@lists.postgresql.org" /><meta name="generator" content="DocBook XSL Stylesheets V1.79.1" /><link rel="prev" href="source.html" title="第 53 章 PostgreSQL编码习惯" /><link rel="next" href="error-message-reporting.html" title="53.2. 在服务器中报告错误" /></head><body><div xmlns="http://www.w3.org/TR/xhtml1/transitional" class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="5" align="center">53.1. 格式化</th></tr><tr><td width="10%" align="left"><a accesskey="p" href="source.html" title="第 53 章 PostgreSQL编码习惯">上一页</a> </td><td width="10%" align="left"><a accesskey="u" href="source.html" title="第 53 章 PostgreSQL编码习惯">上一级</a></td><th width="60%" align="center">第 53 章 PostgreSQL编码习惯</th><td width="10%" align="right"><a accesskey="h" href="index.html" title="PostgreSQL 12.2 手册">起始页</a></td><td width="10%" align="right"> <a accesskey="n" href="error-message-reporting.html" title="53.2. 在服务器中报告错误">下一页</a></td></tr></table><hr></hr></div><div class="sect1" id="SOURCE-FORMAT"><div class="titlepage"><div><div><h2 class="title" style="clear: both">53.1. 格式化</h2></div></div></div><p>
    源代码格式化使用 4 列制表间隔，并且保留制表符（即制表符不会被扩展成空格）。每一个逻辑缩进层就是一个额外的制表位。
   </p><p>
    布局规则（括号定位等）遵循 BSD 习惯。特别地，<code class="literal">if</code>、<code class="literal">while</code>、<code class="literal">switch</code>等受控块的花括号要独自占据一行。
   </p><p>
    限制行长度，这样在 80 列窗口中代码也是可读的（这并不意味着你不能超过 80 列。例如，为了保持代码在 80 列以内而在任意位置打断一段长的错误消息字符串可能不会给可读性带来什么好处）。
   </p><p>
    要保持一致的编码风格，请勿使用C++风格注释（<code class="literal">//</code> comments）。<span class="application">pgindent</span> 会用 <code class="literal">/* ... */</code>替换它们。
   </p><p>
    多行注释块更好的风格是
</p><pre class="programlisting">
/*
 * 注释文本从这里开始
 * 延续到这里
 */
</pre><p>
    注意从列 1 开始的注释块将被<span class="application">pgindent</span>原样保留，但是它将重新对缩进的注释块断行，好像它们是纯文本一样。如果你想要保留一个缩进块中的换行，可以像这样增加破折号：
</p><pre class="programlisting">
    /*----------
     * 注释文本从这里开始
     * 延续到这里
     *----------
     */
</pre><p>
   </p><p>
    虽然在提交补丁时并不是一定要遵守这些格式化规则，但是最好能遵守。在下一次发行前你提交的代码将会通过<span class="application">pgindent</span>，因此使用某种其他格式化习惯无法使代码被编排得很好。对于补丁，一种比较好的经验规则是<span class="quote">“<span class="quote">让新代码看起来像它周围的原有代码</span>”</span>。
   </p><p>
    <code class="filename">src/tools</code>目录包含有可以用于<span class="productname">emacs</span>、<span class="productname">xemacs</span>或者<span class="productname">vim</span>编辑器的设置文件，它们可以帮助确保这些编辑器会根据上述习惯格式化代码。
   </p><p>
    可以这样调用文本浏览工具<span class="application">more</span>和<span class="application">less</span>：
</p><pre class="programlisting">
more -x4
less -x4
</pre><p>
    来让它们以合适的方式显示制表符。
   </p></div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="source.html">上一页</a> </td><td width="20%" align="center"><a accesskey="u" href="source.html">上一级</a></td><td width="40%" align="right"> <a accesskey="n" href="error-message-reporting.html">下一页</a></td></tr><tr><td width="40%" align="left" valign="top">第 53 章 PostgreSQL编码习惯 </td><td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td><td width="40%" align="right" valign="top"> 53.2. 在服务器中报告错误</td></tr></table></div></body></html>